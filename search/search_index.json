{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/","title":"SCE InventarioFiscal","text":""},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#proposito-geral","title":"\ud83d\udccb\u00a0Prop\u00f3sito Geral","text":"<p>Calcula valores unit\u00e1rios e totais de itens para fins de invent\u00e1rio fiscal, considerando diferentes regras fiscais.</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#tabelas-utilizadas","title":"\ud83c\udfe2\u00a0Tabelas Utilizadas","text":"<ul> <li>Bcb11: Item do invent\u00e1rio</li> <li>Aac10: Empresa</li> <li>Abm01: Item cadastral</li> <li>Abm0101: Configura\u00e7\u00f5es do item por empresa</li> <li>Abm12: Configura\u00e7\u00e3o fiscal do item</li> <li>Abm40: Grupo de invent\u00e1rio</li> <li>Bcc01: Saldo de estoque</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#validacoes-e-configuracoes","title":"Valida\u00e7\u00f5es e Configura\u00e7\u00f5es","text":"<ul> <li>Obt\u00e9m dados do item de invent\u00e1rio (Bcb11)</li> <li>Define per\u00edodo de 12 meses para c\u00e1lculo (data atual - 11 meses)</li> <li>Verifica exist\u00eancia da empresa ativa</li> <li>Obt\u00e9m configura\u00e7\u00f5es do item (Abm0101)</li> <li>Verifica exist\u00eancia da configura\u00e7\u00e3o fiscal do item (Abm12)</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#calculos","title":"\ud83d\udcca C\u00e1lculos","text":""},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#calculo-do-preco-unitario","title":"C\u00e1lculo do Pre\u00e7o Unit\u00e1rio","text":"<ul> <li>Obt\u00e9m taxa do grupo de invent\u00e1rio</li> <li>Busca pre\u00e7o unit\u00e1rio conforme m\u00e9todo definido no grupo</li> <li>Se pre\u00e7o zero, busca valor em invent\u00e1rio anterior</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#precomediounit","title":"\ud83d\udccc\u00a0<code>precoMedioUnit</code>","text":"<p>Calcula o\u00a0pre\u00e7o m\u00e9dio unit\u00e1rio\u00a0do item baseado no \u00faltimo saldo de estoque (Bcc01) antes da data do invent\u00e1rio.  Busca no Bcc01 (saldos de estoque):    - Filtra por data &lt;= data do invent\u00e1rio    - Filtra pelo item espec\u00edfico    - Aplica crit\u00e9rios padr\u00e3o do sistema    - Ordena por ID decrescente (mais recente primeiro)    - Retorna o campo bcc01pmu (pre\u00e7o m\u00e9dio unit\u00e1rio)</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#ultimnounitatiosaida","title":"\ud83d\udccc  <code>ultimnoUnitatioSaida</code>","text":"<p>Obt\u00e9m o\u00a0\u00faltimo pre\u00e7o unit\u00e1rio de sa\u00edda\u00a0do item dentro do per\u00edodo de 12 meses.</p> <p>Consulta documentos de sa\u00edda (Eaa01) no per\u00edodo  Filtra por:    - Item espec\u00edfico    - Documentos de sa\u00edda (eaa01esMov = 1)    - Documentos da classe 1 (eaa01clasdoc = 1)    - Per\u00edodo de 12 meses    - Ordena pelo documento mais recente</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#maiorprecounitario","title":"\ud83d\udccc\u00a0<code>maiorPrecoUnitario</code>","text":"<p>Encontra o\u00a0maior pre\u00e7o unit\u00e1rio de sa\u00edda\u00a0do item dentro do per\u00edodo especificado. - Consulta todas as sa\u00eddas do per\u00edodo - Aplica filtros espec\u00edficos:        - Item espec\u00edfico        - Documentos n\u00e3o cancelados        - Opera\u00e7\u00f5es de c\u00f3digo tipo 1 (abb10tipoCod = 1)        - Apenas movimenta\u00e7\u00f5es de sa\u00edda v\u00e1lidas - Calcula o valor m\u00e1ximo dos pre\u00e7os unit\u00e1rios  </p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#calculo-do-valor-total","title":"C\u00e1lculo do Valor Total","text":"<p><code>bcb11.bcb11unit</code> = pre\u00e7o unit\u00e1rio calculado <code>bcb11.bcb11total</code> = quantidade \u00d7 pre\u00e7o unit\u00e1rio (arredondado para 2 casas) Atualiza JSON com saldo da conta cont\u00e1bil na data do invent\u00e1rio</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#estrutura-de-dados-de-saida","title":"Estrutura de Dados de Sa\u00edda","text":""},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#campos-atualizados","title":"Campos Atualizados","text":"<ul> <li><code>bcb11unit</code>: Pre\u00e7o unit\u00e1rio calculado</li> <li><code>bcb11total</code>: Valor total (quantidade \u00d7 unit\u00e1rio)</li> <li><code>bcb11json</code>: Campos livres</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#importante","title":"\u26a0\ufe0f\u00a0IMPORTANTE!!! \u26a0\ufe0f","text":"<ul> <li>Configura\u00e7\u00e3o Fiscal: Item deve ter configura\u00e7\u00e3o fiscal v\u00e1lida</li> <li>Grupo de Invent\u00e1rio: Item deve pertencer a grupo de invent\u00e1rio (pr\u00f3prio ou terceiro)</li> <li>Tipos Fiscais: Itens dos tipos 7,8,9,99 n\u00e3o exigem grupo de invent\u00e1rio</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#configuracoes-por-item","title":"\ud83d\udd27\u00a0Configura\u00e7\u00f5es por Item","text":"<p>O c\u00e1lculo considera: - Tipo de item (pr\u00f3prio/terceiro) - Grupo de invent\u00e1rio associado - Configura\u00e7\u00f5es fiscais - Valores e percentuais definidos no grupo de invent\u00e1rio</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/","title":"SCF_Movimento.md","text":""},{"location":"ELTECH/formulas/scf/SCF_Movimento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de c\u00e1lculo de movimento financeiro para o SCF (Sistema de Controle Financeiro) da Linhasita, respons\u00e1vel pelo processamento de juros, multas, encargos e descontos em t\u00edtulos financeiros.</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular automaticamente os valores l\u00edquidos de t\u00edtulos financeiros considerando encargos, descontos e condi\u00e7\u00f5es de pagamento, garantindo a correta apura\u00e7\u00e3o financeira.</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Tesouraria</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> <li>Contabilidade</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SCF_Movimento</code> - C\u00e1lculo de movimento financeiro</p> <p>Localiza\u00e7\u00e3o: <code>eltech/formulas/scf/</code></p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA1001</code> - Movimentos financeiros - <code>DAA01</code> - T\u00edtulos a receber/pagar</p> <p>Entidades Envolvidas: - <code>Daa1001</code> - Movimento financeiro - <code>Daa01</code> - T\u00edtulo principal - <code>SCFService</code> - Servi\u00e7o de c\u00e1lculos financeiros</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o daa1001 Daa1001 Sim Movimento financeiro a ser calculado"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#campos-calculados","title":"\ud83d\udccb Campos Calculados","text":"Campo Descri\u00e7\u00e3o Tipo daa1001liquido Valor l\u00edquido do movimento BigDecimal jurosq Juros quitados BigDecimal multaq Multa quitada BigDecimal encargosq Encargos quitados BigDecimal descontoq Desconto aplicado BigDecimal"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Obt\u00e9m movimento financeiro (DAA1001)</li> <li>Recupera t\u00edtulo principal relacionado (DAA01)</li> <li> <p>Inicializa mapa JSON para campos livres</p> </li> <li> <p>C\u00e1lculo de Dias em Atraso</p> </li> <li>Utiliza servi\u00e7o SCF para calcular dias de atraso</li> <li>Aplica juros somente se houver atraso</li> <li> <p>Aplica multa somente se houver atraso</p> </li> <li> <p>Processamento de Encargos</p> </li> <li>Encargos aplicados independente de atraso</li> <li> <p>Considera valor fixo cadastrado</p> </li> <li> <p>Aplica\u00e7\u00e3o de Descontos</p> </li> <li>Verifica data limite para desconto</li> <li>Aplica desconto somente se pagamento dentro do prazo</li> <li> <p>Desconsidera desconto se fora do prazo</p> </li> <li> <p>Ajuste para Pagamento Parcial</p> </li> <li>Calcula fator proporcional para pagamentos parciais</li> <li>Aplica propor\u00e7\u00e3o aos valores de JMED</li> <li> <p>Mant\u00e9m consist\u00eancia nos c\u00e1lculos</p> </li> <li> <p>C\u00e1lculo do Valor L\u00edquido</p> </li> <li>Soma valor principal com encargos quitados</li> <li>Subtrai descontos aplicados</li> <li>Arredondamento preciso para 2 casas decimais</li> </ol>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/scf/SCF_Movimento/#condicoes-de-aplicacao","title":"Condi\u00e7\u00f5es de Aplica\u00e7\u00e3o","text":"<ul> <li>Juros: Aplicados apenas quando h\u00e1 dias em atraso (diasAtraso &gt; 0)</li> <li>Multa: Aplicada apenas quando h\u00e1 dias em atraso</li> <li>Encargos: Aplicados independente da situa\u00e7\u00e3o</li> <li>Desconto: Aplicado apenas se pagamento at\u00e9 data limite</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#calculos-especificos","title":"C\u00e1lculos Espec\u00edficos","text":"<ul> <li>Juros: <code>juros * diasAtraso</code> (acumulativo)</li> <li>Multa: Valor fixo conforme cadastro</li> <li>Desconto: Valor fixo, condicionado \u00e0 data</li> <li>Pagamento Parcial: Proporcionalidade nos encargos</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#tratamento-de-valores","title":"Tratamento de Valores","text":"<ul> <li>Desconto Quitado: Convertido para negativo (desconto \u00e9 redu\u00e7\u00e3o)</li> <li>Arredondamento: Sempre para 2 casas decimais</li> <li>Valor L\u00edquido: Soma alg\u00e9brica de todos os componentes</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Servi\u00e7os: - <code>SCFService</code> - Servi\u00e7o especializado em c\u00e1lculos financeiros - <code>calculaDiasDeAtraso()</code> - M\u00e9todo para c\u00e1lculo preciso de dias</p> <p>Bibliotecas: - <code>java.time</code> - Manipula\u00e7\u00e3o de datas e per\u00edodos - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a pagamentos parciais com proporcionalidade</li> <li>C\u00e1lculo autom\u00e1tico de dias de atraso</li> <li>Valida\u00e7\u00e3o de datas para aplica\u00e7\u00e3o de descontos</li> <li>Campos livres (JSON) para flexibilidade nas configura\u00e7\u00f5es</li> <li>Arredondamento preciso em todas as etapas</li> <li>Integra\u00e7\u00e3o com servi\u00e7o especializado SCF</li> <li>Tratamento de valores nulos e casos extremos</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/","title":"SGC - Lan\u00e7amento Cont\u00e1bil","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para processamento e formata\u00e7\u00e3o autom\u00e1tica do hist\u00f3rico de lan\u00e7amentos cont\u00e1beis no Sistema de Gest\u00e3o Cont\u00e1bil (SGC), substituindo coringas por informa\u00e7\u00f5es din\u00e2micas do documento.</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar a gera\u00e7\u00e3o do hist\u00f3rico cont\u00e1bil substituindo placeholders (<code>$1</code>, <code>$2</code>, etc.) por dados reais do documento, central, entidade e eventos relacionados.</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Tesouraria</li> <li>Controladoria</li> <li>Analistas Financeiros</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Ebb05</code> - Lan\u00e7amentos cont\u00e1beis - <code>Abb01</code> - Cabe\u00e7alho de documentos (central) - <code>Aah01</code> - Tipos de documento - <code>Abe01</code> - Entidades (clientes/fornecedores) - <code>Abh21</code> - Eventos cont\u00e1beis - <code>Eca01</code> - Classifica\u00e7\u00e3o patrimonial - <code>Eba02</code> - Planilha de lan\u00e7amento programado</p> <p>Entidades Envolvidas: - <code>Ebb05</code> - Lan\u00e7amento cont\u00e1bil - <code>Abb01</code> - Documento central - <code>Aah01</code> - Tipo de documento - <code>Abe01</code> - Entidade - <code>Abh21</code> - Evento - <code>Eca01</code> - Classifica\u00e7\u00e3o patrimonial - <code>Eba02</code> - Lan\u00e7amento programado</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o ebb05 Ebb05 Sim Lan\u00e7amento cont\u00e1bil a ser processado abh21 Abh21 N\u00e3o Evento cont\u00e1bil associado"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#1-inicializacao","title":"1. Inicializa\u00e7\u00e3o","text":"<ul> <li>Obt\u00e9m o lan\u00e7amento cont\u00e1bil (Ebb05)</li> <li>Verifica exist\u00eancia de hist\u00f3rico para processamento</li> <li>Inicializa vari\u00e1veis de entidades relacionadas</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#2-busca-de-dados-da-central","title":"2. Busca de Dados da Central","text":"<ul> <li>Recupera dados do documento central (Abb01)</li> <li>Busca tipo de documento (Aah01) relacionado</li> <li>Obt\u00e9m dados da entidade (Abe01) vinculada</li> <li>Recupera classifica\u00e7\u00e3o patrimonial (Eca01) se existir</li> <li>Busca dados do lan\u00e7amento programado (Eba02)</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#3-busca-de-dados-do-evento","title":"3. Busca de Dados do Evento","text":"<ul> <li>Recupera informa\u00e7\u00f5es do evento cont\u00e1bil (Abh21)</li> <li>Prioriza evento passado como par\u00e2metro</li> <li>Fallback para evento vinculado ao lan\u00e7amento</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#4-processamento-de-coringas","title":"4. Processamento de Coringas","text":"<p>Substitui placeholders no hist\u00f3rico por valores reais:</p> Coringa Descri\u00e7\u00e3o Fonte <code>$1</code> Nome abreviado do documento Aah01.aah01na <code>$2</code> N\u00famero do documento Abb01.abb01num <code>$3</code> S\u00e9rie do documento Abb01.abb01serie <code>$4</code> Data do documento (dd/MM/yyyy) Abb01.abb01data <code>$5</code> Nome da entidade Abe01.abe01nome <code>$6</code> Parcela do documento Abb01.abb01parcela <code>$7</code> Nome da classifica\u00e7\u00e3o patrimonial Eca01.eca01nome <code>$8</code> Observa\u00e7\u00e3o do SGC Eba02.eba02json.obs_sgc <code>$9</code> Nome do evento Abh21.abh21nome"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#5-atualizacao-do-historico","title":"5. Atualiza\u00e7\u00e3o do Hist\u00f3rico","text":"<ul> <li>Aplica todas as substitui\u00e7\u00f5es</li> <li>Atualiza o campo <code>ebb05historico</code> com o resultado final</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Processa apenas se <code>ebb05historico</code> n\u00e3o for nulo</li> <li>Considera central apenas se <code>ebb05.ebb05central</code> existir</li> <li>Trata valores nulos com strings vazias para evitar erros</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#formatacao-de-dados","title":"Formata\u00e7\u00e3o de Dados","text":"<ul> <li>Datas: Formato \"dd/MM/yyyy\"</li> <li>N\u00fameros: Convers\u00e3o direta para string</li> <li>Campos JSON: Acesso ao campo <code>obs_sgc</code> espec\u00edfico</li> <li>Valores Nulos: Substitu\u00eddos por string vazia</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#prioridade-de-eventos","title":"Prioridade de Eventos","text":"<ol> <li>Evento passado como par\u00e2metro (<code>abh21</code>)</li> <li>Evento vinculado ao lan\u00e7amento (<code>ebb05.abh21id</code>)</li> </ol>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de formata\u00e7\u00e3o do hist\u00f3rico.</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#buscas-no-banco","title":"Buscas no Banco","text":"<ul> <li>Consultas otimizadas com <code>getAcessoAoBanco().buscarRegistroUnico()</code></li> <li>Filtros por ID das entidades</li> <li>Aplica\u00e7\u00e3o de <code>WHERE</code> padr\u00e3o para entidade Abe01</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>Ebb05 (Lan\u00e7amento Cont\u00e1bil): - <code>ebb05historico</code> - Hist\u00f3rico formatado com coringas substitu\u00eddos</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.model</code> - Entidades do sistema - <code>sam.server.samdev</code> - Base de f\u00f3rmula e utilit\u00e1rios - <code>java.time.format</code> - Formata\u00e7\u00e3o de datas</p> <p>Entidades: - <code>FormulaBase</code> - Classe base para f\u00f3rmulas - <code>Parametro</code> - Par\u00e2metros de consulta ao banco</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza <code>DateTimeFormatter</code> para formata\u00e7\u00e3o consistente de datas</li> <li>Processamento seguro de valores nulos em todas as substitui\u00e7\u00f5es</li> <li>Consultas otimizadas com busca \u00fanica por entidade</li> <li>Suporte a campos JSON para observa\u00e7\u00f5es customizadas</li> <li>Integra\u00e7\u00e3o com sistema de lan\u00e7amentos programados (Eba02)</li> <li>Compat\u00edvel com classifica\u00e7\u00e3o patrimonial (Eca01)</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 23/10/2025 10:48 Autor: Bruno Tipo: F\u00f3rmula de Lan\u00e7amento Cont\u00e1bil (LCTO_SGC) Vers\u00e3o: 1.0</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/","title":"SGT - Apura\u00e7\u00e3o de Receita PIS/COFINS","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para apura\u00e7\u00e3o de receita e c\u00e1lculo da Contribui\u00e7\u00e3o Previdenci\u00e1ria sobre Receita Bruta (PIS/COFINS), considerando diferentes classifica\u00e7\u00f5es de receita e atividades econ\u00f4micas.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Realizar a apura\u00e7\u00e3o completa da receita bruta para fins de PIS/COFINS, classificando as receitas por tipo (tributada, n\u00e3o-tributada, exporta\u00e7\u00e3o, cumulativa) e calculando a base de c\u00e1lculo da contribui\u00e7\u00e3o previdenci\u00e1ria.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Gestores Tribut\u00e1rios</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais de entrada/sa\u00edda - <code>Eaa0103</code> - Itens de documentos fiscais - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Aah01</code> - Tipos de documento - <code>Abb10</code> - Opera\u00e7\u00f5es fiscais - <code>Aac10</code> - Empresas - <code>Abg02</code> - Atividades econ\u00f4micas - <code>Abc10</code> - Plano de contas cont\u00e1bil - <code>Edb10</code> - Per\u00edodo de apura\u00e7\u00e3o - <code>Edb1001</code> - Receita por empresa - <code>Edb10011</code> - Detalhe por atividade</p> <p>Entidades Envolvidas: - <code>Edb10</code> - Per\u00edodo de apura\u00e7\u00e3o - <code>Edb1001</code> - Receita por empresa - <code>Edb10011</code> - Detalhe por atividade econ\u00f4mica - <code>Aac10</code> - Empresa - <code>Abg02</code> - Atividade econ\u00f4mica - <code>Abc10</code> - Conta cont\u00e1bil</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o edb10 Edb10 Sim Per\u00edodo de apura\u00e7\u00e3o com m\u00eas/ano alinApur String Sim C\u00f3digo do alinhamento (0044) <p>Campos do Alinhamento: - <code>vlRecTotEst</code> - Valor total da receita do estabelecimento - <code>vlRecAtivEstab</code> - Valor da receita da atividade do estabelecimento - <code>vlExc</code> - Valor das exclus\u00f5es - <code>aliqCont</code> - Al\u00edquota da contribui\u00e7\u00e3o</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Seleciona alinhamento de apura\u00e7\u00e3o (0044)</li> <li>Busca matriz e filiais da empresa ativa</li> <li>Obt\u00e9m campos do alinhamento para c\u00e1lculo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#2-apuracao-da-receita-por-classificacao","title":"2. Apura\u00e7\u00e3o da Receita por Classifica\u00e7\u00e3o","text":"<ul> <li>Busca receitas do per\u00edodo por empresa</li> <li>Classifica em 4 categorias:</li> <li>1 - Tributada: Receitas sujeitas \u00e0 tributa\u00e7\u00e3o</li> <li>2 - N\u00e3o-Tributada: Receitas isentas ou n\u00e3o-tributadas</li> <li>3 - Exporta\u00e7\u00e3o: Receitas de exporta\u00e7\u00e3o</li> <li>4 - Cumulativa: Receitas do regime cumulativo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#3-calculo-da-contribuicao-previdenciaria-p100","title":"3. C\u00e1lculo da Contribui\u00e7\u00e3o Previdenci\u00e1ria (P100)","text":"<ul> <li>Processa receitas por atividade econ\u00f4mica</li> <li>Aplica al\u00edquotas espec\u00edficas por atividade</li> <li>Considera devolu\u00e7\u00f5es e exclus\u00f5es</li> <li>Calcula base de c\u00e1lculo e contribui\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#4-consolidacao-dos-resultados","title":"4. Consolida\u00e7\u00e3o dos Resultados","text":"<ul> <li>Totaliza receitas por categoria</li> <li>Calcula totais para o per\u00edodo</li> <li>Preenche entidades do modelo (Edb10, Edb1001, Edb10011)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#classificacao-de-receitas","title":"Classifica\u00e7\u00e3o de Receitas","text":"<ul> <li>Classe 1: Receitas tributadas</li> <li>Classe 2: Receitas n\u00e3o-tributadas  </li> <li>Classe 3: Receitas de exporta\u00e7\u00e3o</li> <li>Classe 4: Receitas do regime cumulativo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>Base de C\u00e1lculo: Receita da atividade - Exclus\u00f5es</li> <li>Contribui\u00e7\u00e3o: Base de c\u00e1lculo \u00d7 Al\u00edquota</li> <li>Receita Total: Soma de todas as receitas do estabelecimento</li> <li>Receita com CP: Receitas com contribui\u00e7\u00e3o previdenci\u00e1ria</li> <li>Receita sem CP: Receitas sem contribui\u00e7\u00e3o previdenci\u00e1ria</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#filtros-de-periodo","title":"Filtros de Per\u00edodo","text":"<ul> <li>Considera documentos do m\u00eas/ano informado</li> <li>Apenas documentos n\u00e3o cancelados</li> <li>Apenas documentos com indicador EFD Contribuinte = 1</li> <li>Opera\u00e7\u00f5es fiscais do tipo 1 (entrada/sa\u00edda)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#tratamento-de-devolucoes","title":"Tratamento de Devolu\u00e7\u00f5es","text":"<ul> <li>Considera opera\u00e7\u00f5es fiscais do tipo 4 (devolu\u00e7\u00e3o)</li> <li>Ajusta valores de exclus\u00f5es nas atividades</li> <li>Mant\u00e9m demais dados da atividade original</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de apura\u00e7\u00e3o.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#selecionargcporempresalong-aac10id-string-tabela","title":"<code>selecionarGCPorEmpresa(Long aac10id, String tabela)</code>","text":"<p>Busca o grupo de empresas para a tabela especificada.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscarmatrizefiliais","title":"<code>buscarMatrizEFiliais()</code>","text":"<p>Retorna lista da matriz e todas suas filiais.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscarreceitainteger-mes-integer-ano-long-gcea","title":"<code>buscarReceita(Integer mes, Integer ano, Long gcEA)</code>","text":"<p>Busca receitas classificadas por tipo.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscarreceitap100integer-mes-integer-ano-string-campos","title":"<code>buscarReceitaP100(Integer mes, Integer ano, String... campos)</code>","text":"<p>Busca receitas para c\u00e1lculo da contribui\u00e7\u00e3o P100.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscardevolucoesp100integer-mes-integer-ano-string-campos","title":"<code>buscarDevolucoesP100(Integer mes, Integer ano, String... campos)</code>","text":"<p>Busca devolu\u00e7\u00f5es para ajuste do c\u00e1lculo P100.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>Edb10 (Per\u00edodo): - <code>edb10rbTrib</code> - Receita tributada - <code>edb10rbNaoTrib</code> - Receita n\u00e3o-tributada - <code>edb10rbExp</code> - Receita de exporta\u00e7\u00e3o - <code>edb10rbCumul</code> - Receita cumulativa - <code>edb10rbTotal</code> - Receita total - <code>edb10rbAtivCP</code> - Receita com contribui\u00e7\u00e3o previdenci\u00e1ria - <code>edb10rbAtivSemCP</code> - Receita sem contribui\u00e7\u00e3o previdenci\u00e1ria</p> <p>Edb1001 (Por Empresa): - <code>edb1001empresa</code> - Empresa - <code>edb1001rb</code> - Receita bruta da empresa</p> <p>Edb10011 (Por Atividade): - <code>edb10011ativ</code> - Atividade econ\u00f4mica - <code>edb10011rb</code> - Receita bruta - <code>edb10011exc</code> - Exclus\u00f5es - <code>edb10011aliq</code> - Al\u00edquota - <code>edb10011cprb</code> - Contribui\u00e7\u00e3o previdenci\u00e1ria - <code>edb10011cta</code> - Conta cont\u00e1bil</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>multiorm</code> - Criteria e fields - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.model</code> - Entidades do sistema</p> <p>Entidades: - <code>FormulaBase</code> - Classe base para f\u00f3rmulas - <code>TableMap</code> - Estrutura de dados para resultados - <code>Parametro</code> - Par\u00e2metros de consulta</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza JSON fields para campos din\u00e2micos (<code>eaa0103json</code>)</li> <li>Processa matriz e filiais consolidamente</li> <li>Suporte a m\u00faltiplas atividades econ\u00f4micas por empresa</li> <li>C\u00e1lculos com precis\u00e3o decimal (2 casas)</li> <li>Consultas SQL otimizadas com agrega\u00e7\u00f5es</li> <li>Tratamento espec\u00edfico para devolu\u00e7\u00f5es</li> <li>Al\u00edquotas vari\u00e1veis por atividade econ\u00f4mica</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 05/09 \u00e0s 16:00 Autor: Bruno Tipo: F\u00f3rmula de Apura\u00e7\u00e3o Vers\u00e3o: 1.0</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/","title":"SGT - Leiaute 15/2021 Contribui\u00e7\u00f5es (EFD Contribui\u00e7\u00f5es)","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para gera\u00e7\u00e3o do arquivo EFD Contribui\u00e7\u00f5es (PIS/COFINS) no formato Leiaute 15/2021, contemplando todos os blocos obrigat\u00f3rios para escritura\u00e7\u00e3o fiscal digital.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar arquivo digital da EFD Contribui\u00e7\u00f5es conforme legisla\u00e7\u00e3o vigente, consolidando informa\u00e7\u00f5es de documentos fiscais, apura\u00e7\u00f5es, cr\u00e9ditos e demais opera\u00e7\u00f5es sujeitas \u00e0 tributa\u00e7\u00e3o PIS/COFINS.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Escritura\u00e7\u00e3o Fiscal Digital</li> <li>Auditoria Fiscal</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens de documentos fiscais - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Aah01</code> - Tipos de documento - <code>Abe01</code> - Entidades - <code>Abm01</code> - Itens (produtos/servi\u00e7os) - <code>Edb10</code> - Per\u00edodo de apura\u00e7\u00e3o - <code>Edb11</code> - Opera\u00e7\u00f5es de cr\u00e9dito - <code>Edb12</code> - Reten\u00e7\u00f5es na fonte - <code>Edb13</code> - Dedu\u00e7\u00f5es diversas - <code>Edb14</code> - Cr\u00e9ditos por incorpora\u00e7\u00e3o/fus\u00e3o/cis\u00e3o - <code>Ecb01</code> - Bens do ativo imobilizado</p> <p>Blocos Gerados: - Bloco 0 - Abertura, identifica\u00e7\u00e3o e refer\u00eancias - Bloco A - Documentos fiscais - servi\u00e7os - Bloco C - Documentos fiscais I - mercadorias (ICMS/IPI) - Bloco D - Documentos fiscais II - servi\u00e7os (ICMS) - Bloco F - Demais documentos e opera\u00e7\u00f5es - Bloco M - Apura\u00e7\u00e3o do PIS/COFINS - Bloco 1 - Opera\u00e7\u00f5es extempor\u00e2neas - Bloco 9 - Controle e encerramento</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o dtInicial LocalDate Sim Data inicial do per\u00edodo dtFinal LocalDate Sim Data final do per\u00edodo situacao Integer Sim Situa\u00e7\u00e3o da escritura\u00e7\u00e3o (0-normal, 9-retificadora) numRecibo String N\u00e3o N\u00famero do recibo (para retifica\u00e7\u00e3o) aliqPisF150 BigDecimal N\u00e3o Al\u00edquota PIS para registro F150 aliqCofinsF150 BigDecimal N\u00e3o Al\u00edquota COFINS para registro F150"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Valida\u00e7\u00e3o de par\u00e2metros e per\u00edodo</li> <li>Busca da empresa matriz e filiais</li> <li>Verifica\u00e7\u00e3o da apura\u00e7\u00e3o de receita do per\u00edodo</li> <li>Sele\u00e7\u00e3o do alinhamento EFD (0051)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#2-geracao-dos-blocos","title":"2. Gera\u00e7\u00e3o dos Blocos","text":"<ul> <li>Bloco 0: Dados da empresa, contabilista, regimes de apura\u00e7\u00e3o</li> <li>Bloco A: Notas fiscais de servi\u00e7o</li> <li>Bloco C: Notas fiscais de mercadorias</li> <li>Bloco D: Documentos de transporte e comunica\u00e7\u00e3o</li> <li>Bloco F: Opera\u00e7\u00f5es geradoras de cr\u00e9ditos, bens do ativo, ajustes</li> <li>Bloco M: Apura\u00e7\u00e3o consolidada</li> <li>Bloco 1: Processos judiciais e administrativos</li> <li>Bloco 9: Encerramento e totais</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#3-processamento-por-empresa","title":"3. Processamento por Empresa","text":"<ul> <li>Consolida\u00e7\u00e3o por grupo centralizador (GC)</li> <li>Valida\u00e7\u00e3o de documentos fiscais</li> <li>C\u00e1lculo de bases e valores do PIS/COFINS</li> <li>Agrupamento por CST e atividade econ\u00f4mica</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#4-formatacao-e-saida","title":"4. Formata\u00e7\u00e3o e Sa\u00edda","text":"<ul> <li>Gera\u00e7\u00e3o do arquivo texto no formato delimitado por \"|\"</li> <li>Formata\u00e7\u00e3o de valores, datas e c\u00f3digos</li> <li>Controle de quantidade de linhas por registro</li> <li>Valida\u00e7\u00e3o final do arquivo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#validacoes-de-documentos","title":"Valida\u00e7\u00f5es de Documentos","text":"<ul> <li>Apenas documentos com indicador EFD Contribuinte = 1</li> <li>Documentos n\u00e3o cancelados</li> <li>Per\u00edodo conforme datas informadas</li> <li>Situa\u00e7\u00e3o do documento obrigat\u00f3ria</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#classificacao-de-receitas","title":"Classifica\u00e7\u00e3o de Receitas","text":"<ul> <li>Tributada: CST 01-03, 05</li> <li>N\u00e3o-Tributada: CST 04, 06-09, 49</li> <li>Exporta\u00e7\u00e3o: CST espec\u00edficos</li> <li>Cumulativa: Regime cumulativo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>Base de C\u00e1lculo: Conforme CST e movimento</li> <li>Al\u00edquotas: Espec\u00edficas por atividade/documento</li> <li>Cr\u00e9ditos: Baseados em deprecia\u00e7\u00e3o ou aquisi\u00e7\u00e3o</li> <li>Ajustes: Conforme legisla\u00e7\u00e3o espec\u00edfica</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#formatacao-de-dados","title":"Formata\u00e7\u00e3o de Dados","text":"<ul> <li>Datas: Formato \"ddMMyyyy\"</li> <li>Valores: 2 casas decimais</li> <li>CNPJ/CPF: Apenas n\u00fameros (14/11 d\u00edgitos)</li> <li>C\u00f3digos: Preenchimento com zeros \u00e0 esquerda</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra toda a gera\u00e7\u00e3o da EFD.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#geracao-por-bloco","title":"Gera\u00e7\u00e3o por Bloco","text":"<ul> <li><code>gerarAberturaBloco0()</code> - Dados iniciais da empresa</li> <li><code>gerarBlocoA()</code> - Documentos de servi\u00e7os</li> <li><code>gerarBlocoC()</code> - Documentos de mercadorias</li> <li><code>gerarBlocoD()</code> - Documentos de transporte/comunica\u00e7\u00e3o</li> <li><code>gerarBlocoF()</code> - Opera\u00e7\u00f5es diversas e cr\u00e9ditos</li> <li><code>gerarBlocoM()</code> - Apura\u00e7\u00e3o do PIS/COFINS</li> <li><code>gerarBloco1()</code> - Processos extempor\u00e2neos</li> <li><code>gerarBloco9()</code> - Encerramento</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#metodos-auxiliares","title":"M\u00e9todos Auxiliares","text":"<ul> <li><code>buscarDocumentosXXX()</code> - Consultas espec\u00edficas por bloco</li> <li><code>comporRegistroXXX()</code> - Montagem de registros</li> <li><code>formatarValor()</code> - Formata\u00e7\u00e3o de valores monet\u00e1rios</li> <li><code>selecionarCSTPis/Cofins()</code> - Defini\u00e7\u00e3o de CST</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>Arquivo Texto: - Formato delimitado por pipe (\"|\") - Codifica\u00e7\u00e3o UTF-8 - Registros conforme layout oficial - Blocos separados com totais</p> <p>Principais Registros: - 0000/0001: Abertura do arquivo e bloco - 0100: Dados do contabilista - 0140: Estabelecimentos - 0150: Participantes - 0200: Produtos/servi\u00e7os - A100/C100/D100: Documentos fiscais - F100/F120/F130: Opera\u00e7\u00f5es de cr\u00e9dito - F550: Consolida\u00e7\u00e3o para lucro presumido - 9999: Encerramento do arquivo</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios, datas e formata\u00e7\u00e3o - <code>multiorm</code> - Criteria e consultas ao banco - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.model</code> - Entidades do sistema - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>Configura\u00e7\u00f5es: - Alinhamento EFD (0051) - Vers\u00e3o do leiaute (6) - Modelos de documentos fiscais por bloco</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#otimizacoes","title":"Otimiza\u00e7\u00f5es","text":"<ul> <li>Consultas paginadas para grandes volumes</li> <li>Cache de entidades frequentemente acessadas</li> <li>Agrupamento por chaves para evitar duplicidades</li> <li>Processamento por lotes de documentos</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#tratamento-de-erros","title":"Tratamento de Erros","text":"<ul> <li>Valida\u00e7\u00e3o de dados obrigat\u00f3rios</li> <li>Tratamento de valores nulos</li> <li>Log de documentos com inconsist\u00eancias</li> <li>Interrup\u00e7\u00e3o por cancelamento do processo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#performance","title":"Performance","text":"<ul> <li>Uso de TableMap para agrupamentos</li> <li>Consultas espec\u00edficas por bloco</li> <li>Processamento em mem\u00f3ria com limites</li> <li>Controle de quantidade de registros</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 22/10/2025 \u00e0s 17:15 Autor: Bruno Tipo: F\u00f3rmula EFD Contribui\u00e7\u00f5es Vers\u00e3o: 1.0 Leiaute: 15/2021</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas, incluindo faturamento, cobran\u00e7a, cancelamentos e cartas de corre\u00e7\u00e3o.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes, representantes e transportadoras com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) de acordo com o tipo de opera\u00e7\u00e3o.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Representantes Comerciais</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios","text":"<ul> <li>E-mail Principal: Cliente (faturamento)</li> <li>E-mail Cobran\u00e7a: Endere\u00e7o espec\u00edfico para cobran\u00e7a</li> <li>Representantes: At\u00e9 5 representantes vinculados ao documento</li> <li>Transportadora: Empresa de despacho (se informada)</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Faturamento: XML + DANFE</li> <li>Cobran\u00e7a: Boleto (separado ou junto com faturamento)</li> <li>Cancelamento/CC-e: Apenas XML</li> <li>Representantes: Apenas DANFE</li> <li>Transportadora: Apenas XML</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-e-mail","title":"Tipos de E-mail","text":"<ul> <li>Faturamento: Remetente 2 (Faturamento), com XML e DANFE</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a), apenas boleto</li> <li>Cancelamento/CC-e: Remetente 2, apenas XML</li> <li>Representantes: Remetente 2, apenas DANFE</li> <li>Transportadora: Remetente 2, apenas XML</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#representantes","title":"Representantes","text":"<ul> <li>Considera at\u00e9 5 representantes vinculados (rep0 a rep4)</li> <li>Apenas e-mails principais das entidades representantes</li> <li>N\u00e3o envia XML, apenas DANFE para acompanhamento</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#transportadora","title":"Transportadora","text":"<ul> <li>Apenas se houver empresa de despacho informada</li> <li>Envia apenas XML para fins de log\u00edstica</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o: - Cancelamento: Inclui motivo - Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o - Faturamento: Mensagem padr\u00e3o</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#obteremailsrepresentanteseaa01-eaa01","title":"<code>obterEmailsRepresentantes(Eaa01 eaa01)</code>","text":"<p>Obt\u00e9m e-mails dos representantes vinculados ao documento.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#obteremailtransportadoradespachoeaa0102-eaa0102","title":"<code>obterEmailTransportadoraDespacho(Eaa0102 eaa0102)</code>","text":"<p>Busca e-mail da transportadora respons\u00e1vel pelo despacho.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail - <code>corpo</code> - Corpo em HTML da mensagem - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (0: Principal, 1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema</p> <p>Entidades: - <code>EmailNFeDto</code> - Estrutura de dados para e-mails - <code>FormulaBase</code> - Classe base para f\u00f3rmulas</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#formatacao-html","title":"Formata\u00e7\u00e3o HTML","text":"<ul> <li>Corpo dos e-mails em HTML com tags b\u00e1sicas</li> <li>Links para portal da NF-e</li> <li>Dados do cliente e chave de acesso formatados</li> <li>Assinatura autom\u00e1tica do sistema</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#controle-de-remetentes","title":"Controle de Remetentes","text":"<ul> <li>0 - Principal: E-mail principal da empresa</li> <li>1 - Cobran\u00e7a: E-mail espec\u00edfico para cobran\u00e7a</li> <li>2 - Faturamento: E-mail espec\u00edfico para faturamento</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Verifica exist\u00eancia de e-mail principal antes do processamento</li> <li>Tratamento de valores nulos em representantes</li> <li>Controle de duplicidade de destinat\u00e1rios</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#performance","title":"Performance","text":"<ul> <li>Consultas otimizadas com campos espec\u00edficos</li> <li>Uso de criteria para buscas relacionadas</li> <li>Limite de resultados para evitar sobrecarga</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:40 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e Vers\u00e3o: 1.0</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/","title":"SAP Resumo Deprecia\u00e7\u00e3o por Departamento","text":""},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio que apresenta o resumo da deprecia\u00e7\u00e3o patrimonial agrupado por departamentos/classifica\u00e7\u00f5es patrimoniais da empresa El Tech.</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Controlar e analisar a deprecia\u00e7\u00e3o de ativos imobilizados por centro de custo/departamento, permitindo acompanhar: - Saldo anterior de deprecia\u00e7\u00e3o - Deprecia\u00e7\u00e3o do per\u00edodo atual - Baixas de ativos - Transfer\u00eancias entre departamentos - Saldo atual acumulado</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Contabilidade</li> <li>Gestores Patrimoniais</li> <li>Controladoria</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABB11</code> - Departamentos/Centro de Custos - <code>ECB01</code> - Imobilizados - <code>ECB0101</code> - Reclassifica\u00e7\u00f5es de Imobilizados - <code>ECB0102</code> - Deprecia\u00e7\u00e3o Mensal - <code>ABB20</code> - Bens Patrimoniais - <code>ABA01</code> - Par\u00e2metros do Sistema</p> <p>Entidades Envolvidas: - <code>Abb11</code> - Departamento - <code>Ecb01</code> - Imobilizado - <code>Ecb0101</code> - Reclassifica\u00e7\u00e3o - <code>Ecb0102</code> - Deprecia\u00e7\u00e3o - <code>Aba01</code> - Par\u00e2metro</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis dtReferencia String Sim M\u00eas/Ano de refer\u00eancia Formato MM/yyyy imprimir Integer Sim Tipo de sa\u00edda 0=PDF, 1=XLSX"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo F\u00f3rmula C\u00f3digo C\u00f3digo do departamento String - Nome Nome do departamento String - Saldo Anterior Saldo depreciado acumulado anterior BigDecimal <code>buscaSaldo(dataRef-1)</code> Deprecia\u00e7\u00e3o Deprecia\u00e7\u00e3o do m\u00eas atual BigDecimal <code>buscaDepreciacao(dataRef)</code> Baixas Baixas de ativos no per\u00edodo BigDecimal <code>buscaBaixas(dataRef)</code> Saldo Atual Saldo depreciado acumulado atual BigDecimal <code>buscaSaldo(dataRef)</code> Transfer\u00eancias Varia\u00e7\u00e3o por transfer\u00eancias BigDecimal <code>saldoAtual - saldoAnterior - deprec + baixas</code>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Estrutura</li> <li>Busca par\u00e2metro <code>ABB11-ESTRCODDEPTO</code> para estrutura de c\u00f3digos</li> <li> <p>Valida exist\u00eancia de pelo menos 2 grupos na estrutura</p> </li> <li> <p>Processamento de Reclassifica\u00e7\u00f5es</p> </li> <li>Identifica \u00faltima reclassifica\u00e7\u00e3o por imobilizado at\u00e9 a data de refer\u00eancia</li> <li> <p>Mapeia imobilizados por departamento considerando reclassifica\u00e7\u00f5es</p> </li> <li> <p>C\u00e1lculo de Valores</p> </li> <li>Busca departamentos ativos</li> <li>Calcula saldos anteriores e atuais</li> <li>Calcula deprecia\u00e7\u00e3o do per\u00edodo</li> <li>Identifica baixas de ativos</li> <li> <p>Calcula transfer\u00eancias entre departamentos</p> </li> <li> <p>Consolida\u00e7\u00e3o Hier\u00e1rquica</p> </li> <li>Soma valores dos n\u00edveis inferiores para superiores baseado na estrutura de c\u00f3digos</li> <li>Filtra registros com valores zerados</li> </ol>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Estrutura de c\u00f3digos deve ter pelo menos 2 grupos</li> <li>Data de refer\u00eancia obrigat\u00f3ria</li> <li>Considera apenas imobilizados ativos (n\u00e3o baixados)</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#calculos","title":"C\u00e1lculos","text":"<ul> <li>Saldo Anterior: Soma deprecia\u00e7\u00e3o acumulada at\u00e9 m\u00eas anterior</li> <li>Deprecia\u00e7\u00e3o: Valor depreciado no m\u00eas atual</li> <li>Baixas: Deprecia\u00e7\u00e3o de ativos baixados no per\u00edodo</li> <li>Transfer\u00eancias: Diferen\u00e7a entre varia\u00e7\u00e3o do saldo e movimenta\u00e7\u00f5es conhecidas</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#filtros","title":"Filtros","text":"<ul> <li>Aplica <code>getSamWhere()</code> para filtros padr\u00e3o do sistema</li> <li>Considera apenas departamentos com movimenta\u00e7\u00e3o no per\u00edodo</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado para visualiza\u00e7\u00e3o <code>gerarPDF()</code> XLSX Planilha para an\u00e1lise e exporta\u00e7\u00e3o <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e queries - <code>multitec.utils</code> - Utilit\u00e1rios (DateUtils, StringUtils, Utils) - <code>sam.core</code> - Core do sistema SAM - <code>sam.model</code> - Entidades do sistema</p> <p>Par\u00e2metros do Sistema: - <code>ABB11-ESTRCODDEPTO</code> - Estrutura de codifica\u00e7\u00e3o de departamentos</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza recursividade para processar estrutura hier\u00e1rquica</li> <li>Considera reclassifica\u00e7\u00f5es hist\u00f3ricas de imobilizados</li> <li>Otimizado com consultas SQL nativas para performance</li> <li>Filtra automaticamente registros com todos valores zerados</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/","title":"SCF Extrato Cont\u00e1bil","text":"<p>]# SCF - Extrato Cont\u00e1bil</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de extrato cont\u00e1bil para documentos a receber e a pagar, com op\u00e7\u00f5es de visualiza\u00e7\u00e3o por diferentes crit\u00e9rios, exporta\u00e7\u00e3o para m\u00faltiplos formatos e filtro por PLF (Parametro e Lan\u00e7amento Fiscal).</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer uma vis\u00e3o consolidada da situa\u00e7\u00e3o financeira da empresa, permitindo an\u00e1lise de contas a receber/pagar por diversos filtros e per\u00edodos, com c\u00e1lculo autom\u00e1tico de juros, multas e encargos.</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Gestores Financeiros</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA01</code> - Documentos a receber/pagar - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades (clientes/fornecedores) - <code>ABC10</code> - Plano de contas cont\u00e1bil - <code>ABF15</code> - Portadores - <code>AAH01</code> - Tipos de documento - <code>AAC10</code> - Empresas - <code>DAB10</code> - Hist\u00f3ricos de documentos - <code>DAA0103</code> - Itens de documentos financeiros - <code>ABF20</code> - PLF (Parametro e Lan\u00e7amento Fiscal).</p> <p>Entidades Envolvidas: - <code>Daa01</code> - Documentos financeiros - <code>Abe01</code> - Clientes/Fornecedores - <code>Aac10</code> - Empresa - <code>Abf15</code> - Portador - <code>Abc10</code> - Conta cont\u00e1bil - <code>Abf20</code> - PLF</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis classe Integer Sim Tipo de documento 0=A receber, 1=A pagar ordem Integer Sim Ordena\u00e7\u00e3o 0=C\u00f3digo entidade, 1=Nome entidade exportar Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX tp Integer Sim Tipo de registro 0=Todos, 1=Reais numeroInicial Integer N\u00e3o N\u00famero documento inicial 000000000 numeroFinal Integer N\u00e3o N\u00famero documento final 999999999 port List N\u00e3o Portadores espec\u00edficos IDs portadores documento List N\u00e3o Tipos documento IDs tipos documento entInicial String N\u00e3o C\u00f3digo entidade inicial C\u00f3digo inicial entFinal String N\u00e3o C\u00f3digo entidade final C\u00f3digo final emps List N\u00e3o Empresas espec\u00edficas IDs empresas dataPer LocalDate[] Sim Per\u00edodo de an\u00e1lise Data inicial e final op Integer Sim Layout do relat\u00f3rio 0=Padr\u00e3o, 1=Alternativo opEnt Integer Sim Nome entidade 0=Nome reduzido, 1=Nome completo plf List N\u00e3o PLFs a desconsiderar IDs PLFs"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo ent_cod C\u00f3digo da entidade String ent_nome Nome da entidade String contabil Conta cont\u00e1bil String dt_emis Data emiss\u00e3o Date tp Tipo documento String doc_num N\u00famero documento Integer dt_vcto Data vencimento Date dt_baixa Data baixa Date portador Nome portador String aRealizar Valor a realizar BigDecimal realizado Valor realizado BigDecimal jme Juros/Multas/Encargos BigDecimal"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Define classe (receber/pagar)</li> <li>Configura ordena\u00e7\u00e3o e formata\u00e7\u00e3o</li> <li> <p>Processa filtros de empresas e entidades</p> </li> <li> <p>Constru\u00e7\u00e3o da Consulta</p> </li> <li>Monta SQL din\u00e2mico com filtros aplicados</li> <li>Define joins espec\u00edficos por classe</li> <li> <p>Aplica filtro de PLF quando informado</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta documentos no per\u00edodo</li> <li>Considera apenas \u00faltimo item por documento</li> <li> <p>Calcula campos financeiros (JME)</p> </li> <li> <p>Ajuste de Per\u00edodo</p> </li> <li>Separa valores realizados e a realizar</li> <li>Filtra documentos fora do per\u00edodo</li> <li> <p>Calcula totais de juros, multas e encargos</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Seleciona template conforme layout</li> <li>Exporta para PDF ou XLSX</li> <li>Formata dados para visualiza\u00e7\u00e3o</li> </ol>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#filtros-de-periodo","title":"Filtros de Per\u00edodo","text":"<ul> <li>Considera documentos com data de liquida\u00e7\u00e3o dentro do per\u00edodo</li> <li>Inclui documentos em aberto com vencimento no per\u00edodo</li> <li>Exclui documentos emitidos ap\u00f3s o per\u00edodo final</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>JME: Soma de juros, multas e encargos</li> <li>A Realizar: Valores em aberto no per\u00edodo</li> <li>Realizado: Valores liquidados no per\u00edodo</li> <li>Descontos zerados para valores realizados</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#classificacao","title":"Classifica\u00e7\u00e3o","text":"<ul> <li>Classe 0 (Receber): Join com <code>Abe02</code> e <code>Abe0201</code></li> <li>Classe 1 (Pagar): Join com <code>Abe03</code> e <code>Abe0301</code></li> <li>Conta cont\u00e1bil da primeira sequ\u00eancia</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#filtro-plf","title":"Filtro PLF","text":"<ul> <li>Exclui documentos vinculados aos PLFs informados</li> <li>Considera apenas o \u00faltimo item por documento</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o Template M\u00e9todo PDF Layout padr\u00e3o <code>SCF_ExtratoContabil</code> <code>gerarPDF()</code> PDF Layout alternativo <code>SCF_ExtratoContabil_R1</code> <code>gerarPDF()</code> XLSX Planilha padr\u00e3o <code>SCF_ExtratoContabil</code> <code>gerarXLSX()</code> XLSX Planilha alternativo <code>SCF_ExtratoContabil_R1</code> <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios (PDF)</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para diferentes layouts - Par\u00e2metros JSON para campos financeiros</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>SQL din\u00e2mico com m\u00faltiplos filtros opcionais</li> <li>Join espec\u00edfico por classe (receber/pagar)</li> <li>Processamento de campos JSON para valores financeiros</li> <li>Ajuste autom\u00e1tico de datas e per\u00edodos</li> <li>Suporte a m\u00faltiplas empresas no cabe\u00e7alho</li> <li>Filtro por PLF com subconsulta para \u00faltimo item</li> <li>Ordena\u00e7\u00e3o flex\u00edvel por c\u00f3digo ou nome de entidade</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/","title":"SGC_LivroRazao.md","text":""},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro Raz\u00e3o cont\u00e1bil para a Linhasita, respons\u00e1vel pela impress\u00e3o do registro cronol\u00f3gico de todos os lan\u00e7amentos cont\u00e1beis por conta.</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer um relat\u00f3rio completo do Livro Raz\u00e3o para acompanhamento dos lan\u00e7amentos cont\u00e1beis, saldos e movimenta\u00e7\u00f5es por conta no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Controladoria</li> <li>Auditores internos e externos</li> <li>Diretoria Financeira</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGC_LivroRazao_R2</code> - Layout retrato - Template Jasper <code>SGC_LivroRazao_R3</code> - Layout paisagem - Template Jasper <code>SGC_LivroRazao_R1</code> - Termos de abertura/encerramento</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgc/</code></p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABC10</code> - Plano de contas - <code>EBB05</code> - Lan\u00e7amentos cont\u00e1beis - <code>EBB02</code> - Saldos cont\u00e1beis - <code>EBA40</code> - Livros cont\u00e1beis - <code>AAC10</code> - Empresas/Filiais</p> <p>Entidades Envolvidas: - <code>Abc10</code> - Contas cont\u00e1beis - <code>Ebb05</code> - Lan\u00e7amentos - <code>Ebb02</code> - Saldos mensais - <code>Eba40</code> - Controle de livros - <code>Aac10</code> - Empresas</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro Raz\u00e3o, 1-Termo Abertura, 2-Termo Encerramento dataInicial LocalDate Sim Data inicial do per\u00edodo dd/MM/yyyy dataFinal LocalDate Sim Data final do per\u00edodo dd/MM/yyyy contaContabilInicial String N\u00e3o Conta cont\u00e1bil inicial C\u00f3digo da conta contaContabilFinal String N\u00e3o Conta cont\u00e1bil final C\u00f3digo da conta rascunho Boolean Sim Modo rascunho true/false ctaComMovimento Boolean Sim Apenas contas com movimento true/false"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#tipos-de-impressao","title":"\ud83d\udccb Tipos de Impress\u00e3o","text":""},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#livro-razao-0","title":"Livro Raz\u00e3o (0)","text":"<ul> <li>Lan\u00e7amentos detalhados por conta</li> <li>Saldos anteriores e atuais</li> <li>Movimenta\u00e7\u00f5es a d\u00e9bito e cr\u00e9dito</li> <li>Hist\u00f3rico dos lan\u00e7amentos</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#termo-de-abertura-1","title":"Termo de Abertura (1)","text":"<ul> <li>Documento formal de abertura do livro</li> <li>Identifica\u00e7\u00e3o da empresa</li> <li>Per\u00edodo cont\u00e1bil</li> <li>Assinaturas respons\u00e1veis</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#termo-de-encerramento-2","title":"Termo de Encerramento (2)","text":"<ul> <li>Documento formal de encerramento</li> <li>Confirma\u00e7\u00e3o do per\u00edodo</li> <li>Encerramento para novo livro</li> <li>Assinaturas respons\u00e1veis</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo informado</li> <li>Valida contas cont\u00e1beis selecionadas</li> <li> <p>Confirma configura\u00e7\u00f5es do plano de contas</p> </li> <li> <p>Busca de Dados Cont\u00e1beis</p> </li> <li>Obt\u00e9m saldos anteriores do per\u00edodo</li> <li>Busca lan\u00e7amentos a d\u00e9bito</li> <li>Busca lan\u00e7amentos a cr\u00e9dito</li> <li> <p>Calcula saldos atualizados</p> </li> <li> <p>Processamento do Raz\u00e3o</p> </li> <li>Agrupa lan\u00e7amentos por conta</li> <li>Calcula saldos em tempo real</li> <li> <p>Ordena por c\u00f3digo de conta e data</p> </li> <li> <p>Controle de Livros</p> </li> <li>Verifica exist\u00eancia de livro em aberto</li> <li>Calcula numera\u00e7\u00e3o de p\u00e1ginas</li> <li> <p>Gerencia termos de abertura/encerramento</p> </li> <li> <p>Gera\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Aplica formata\u00e7\u00e3o espec\u00edfica</li> <li>Insere quebras de p\u00e1gina por conta</li> <li>Gera PDF final</li> </ol>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Estrutura do plano de contas deve estar configurada</li> <li>Grau da empresa deve ser definido</li> <li>C\u00f3digos das empresas devem estar atualizados</li> <li>N\u00e3o permite livro em aberto com n\u00famero diferente</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#calculos-contabeis","title":"C\u00e1lculos Cont\u00e1beis","text":"<ul> <li>Saldo Anterior: Saldo do m\u00eas anterior + lan\u00e7amentos do in\u00edcio do m\u00eas</li> <li>D\u00e9bitos: Soma de todos os lan\u00e7amentos a d\u00e9bito</li> <li>Cr\u00e9ditos: Soma de todos os lan\u00e7amentos a cr\u00e9dito  </li> <li>Saldo Atual: Saldo anterior + d\u00e9bitos - cr\u00e9ditos</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#controle-de-livros","title":"Controle de Livros","text":"<ul> <li>Livro deve estar em aberto para novas impress\u00f5es</li> <li>Termo de encerramento gera novo n\u00famero de livro</li> <li>Numera\u00e7\u00e3o de p\u00e1ginas \u00e9 sequencial e controlada</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#opcoes-de-formatacao","title":"\ud83c\udfa8 Op\u00e7\u00f5es de Formata\u00e7\u00e3o","text":"Configura\u00e7\u00e3o Descri\u00e7\u00e3o Valores Orienta\u00e7\u00e3o Layout da p\u00e1gina 0-Retrato, 1-Paisagem Salto Quebra por conta 0-Linhas, 1-P\u00e1gina Rascunho Modo n\u00e3o oficial true/false"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros do Sistema: - <code>GRAUEMPRESA</code> - Grau da empresa no plano - <code>ESTRCODCONTA</code> - Estrutura do c\u00f3digo de conta - <code>EMPRATUALIZADAS</code> - C\u00f3digos das empresas atualizadas - <code>EB_ATUALIZARCTAS</code> - Indicador de atualiza\u00e7\u00e3o</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplas empresas no mesmo plano</li> <li>C\u00e1lculo preciso de saldos considerando per\u00edodos parciais</li> <li>Controle rigoroso de numera\u00e7\u00e3o de livros e p\u00e1ginas</li> <li>Op\u00e7\u00e3o de emitir apenas contas com movimento</li> <li>Formata\u00e7\u00e3o profissional para documentos cont\u00e1beis</li> <li>Integra\u00e7\u00e3o com sistema de livros fiscais</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados cont\u00e1beis</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/","title":"SGT_ApuracaoICMSP9.md","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Apura\u00e7\u00e3o do ICMS (P9) para a Linhasita, respons\u00e1vel pela apura\u00e7\u00e3o e registro dos valores de ICMS e ICMS-ST no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rio completo de apura\u00e7\u00e3o do ICMS conforme exig\u00eancias fiscais, incluindo c\u00e1lculos de d\u00e9bitos, cr\u00e9ditos e saldos a recolher ou compensar.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Auditores fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGT_ApuracaoICMSP9_R2</code> - Layout ICMS - Template Jasper <code>SGT_ApuracaoICMSP9_R3</code> - Layout ICMS-ST - Template Jasper <code>SGT_ApuracaoICMSP9_R1</code> - Termos de abertura/encerramento - M\u00faltiplos sub-relat\u00f3rios para se\u00e7\u00f5es espec\u00edficas</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgt/</code></p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>EDB01</code> - Apura\u00e7\u00f5es fiscais - <code>EDB0101</code> - Ocorr\u00eancias da apura\u00e7\u00e3o - <code>EDD10</code> - Livros fiscais - <code>AAJ15</code> - CFOPs - <code>AAG02</code> - Estados/UF</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens fiscais - <code>Edb01</code> - Apura\u00e7\u00e3o principal - <code>Edb0101</code> - Detalhes da apura\u00e7\u00e3o - <code>Edd10</code> - Controle de livros</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro, 1-Termo Abertura, 2-Termo Encerramento referencia String Sim Per\u00edodo de refer\u00eancia MM/aaaa modelo Integer Sim Tipo de apura\u00e7\u00e3o 0-ICMS, 1-ICMS-ST estados List N\u00e3o Estados para filtro IDs dos estados apuracao Long N\u00e3o Tipo de apura\u00e7\u00e3o espec\u00edfica ID do tipo rascunho Boolean Sim Modo rascunho true/false"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#tipos-de-apuracao","title":"\ud83d\udccb Tipos de Apura\u00e7\u00e3o","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#icms-0","title":"ICMS (0)","text":"<ul> <li>Apura\u00e7\u00e3o normal do ICMS</li> <li>Entradas e sa\u00eddas por CFOP</li> <li>C\u00e1lculo de d\u00e9bitos e cr\u00e9ditos</li> <li>Saldo a recolher ou compensar</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#icms-st-1","title":"ICMS-ST (1)","text":"<ul> <li>Apura\u00e7\u00e3o do ICMS Substitui\u00e7\u00e3o Tribut\u00e1ria</li> <li>Filtro por estados espec\u00edficos</li> <li>C\u00e1lculos espec\u00edficos para ST</li> <li>Diferencia\u00e7\u00e3o por UF</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo de refer\u00eancia</li> <li>Valida tipo de apura\u00e7\u00e3o selecionado</li> <li> <p>Confirma exist\u00eancia de dados fiscais</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Lan\u00e7amentos agrupados por CFOP</li> <li>C\u00e1lculos de bases e valores de ICMS</li> <li> <p>Dados de entradas e sa\u00eddas</p> </li> <li> <p>Processamento da Apura\u00e7\u00e3o</p> </li> <li>C\u00e1lculo de d\u00e9bitos e cr\u00e9ditos</li> <li>Aplica\u00e7\u00e3o de estornos e dedu\u00e7\u00f5es</li> <li> <p>C\u00e1lculo do saldo final</p> </li> <li> <p>Composi\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>M\u00faltiplos sub-relat\u00f3rios especializados</li> <li>Agrupamento por UF (ICMS-ST)</li> <li> <p>Formata\u00e7\u00e3o fiscal espec\u00edfica</p> </li> <li> <p>Controle de Livros</p> </li> <li>Numera\u00e7\u00e3o sequencial de livros</li> <li>Termos de abertura e encerramento</li> <li>Controle de p\u00e1ginas</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Per\u00edodo deve ser v\u00e1lido e consistente</li> <li>Dados fiscais devem estar integrados</li> <li>Livro n\u00e3o pode estar encerrado para novas apura\u00e7\u00f5es</li> <li>Estados devem estar cadastrados para ICMS-ST</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Base de C\u00e1lculo: Soma das bases de ICMS dos lan\u00e7amentos</li> <li>Valor do ICMS: Soma dos valores de ICMS</li> <li>D\u00e9bitos/Cr\u00e9ditos: C\u00e1lculo conforme regras fiscais</li> <li>Saldo Final: D\u00e9bitos - Cr\u00e9ditos - Dedu\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#campos-de-alinhamento","title":"Campos de Alinhamento","text":"<ul> <li>Configura\u00e7\u00e3o espec\u00edfica para campos JSON</li> <li>Mapeamento de campos fiscais padronizados</li> <li>Suporte a m\u00faltiplos tipos de apura\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#estrutura-do-relatorio","title":"\ud83c\udfa8 Estrutura do Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-1-dados-da-empresa","title":"Se\u00e7\u00e3o 1 - Dados da Empresa","text":"<ul> <li>Raz\u00e3o social e CNPJ</li> <li>Inscri\u00e7\u00e3o Estadual</li> <li>Per\u00edodo de apura\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-2-lancamentos-por-cfop","title":"Se\u00e7\u00e3o 2 - Lan\u00e7amentos por CFOP","text":"<ul> <li>Agrupamento por grupo de CFOP (1.x, 2.x, 3.x, 5.x, 6.x, 7.x)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Bases e valores de ICMS</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-3-apuracao-do-icms","title":"Se\u00e7\u00e3o 3 - Apura\u00e7\u00e3o do ICMS","text":"<ul> <li>D\u00e9bitos e cr\u00e9ditos do per\u00edodo</li> <li>Estornos e compensa\u00e7\u00f5es</li> <li>Saldo a recolher</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-4-ocorrencias","title":"Se\u00e7\u00e3o 4 - Ocorr\u00eancias","text":"<ul> <li>Detalhamento por tipo de ocorr\u00eancia</li> <li>Valores espec\u00edficos por subitem</li> <li>Observa\u00e7\u00f5es fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros de Alinhamento: - <code>0040</code> - Apura\u00e7\u00e3o LF ICMS - <code>0082</code> - Resumo de Apura\u00e7\u00e3o ICMS P9</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos sub-relat\u00f3rios especializados</li> <li>C\u00e1lculos fiscais precisos baseados em JSON fields</li> <li>Controle rigoroso de livros fiscais</li> <li>Formata\u00e7\u00e3o espec\u00edfica para cada tipo de apura\u00e7\u00e3o</li> <li>Integra\u00e7\u00e3o com sistema de alinhamento de campos</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados fiscais</li> <li>Suporte a filtros por UF para ICMS-ST</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/","title":"SGT_ApuracaoIPIP8.md","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Apura\u00e7\u00e3o do IPI (P8) para a Linhasita, respons\u00e1vel pela apura\u00e7\u00e3o e registro dos valores de IPI no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rio completo de apura\u00e7\u00e3o do IPI conforme exig\u00eancias fiscais, incluindo c\u00e1lculos de d\u00e9bitos, cr\u00e9ditos e saldos a recolher ou compensar.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Auditores fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGT_ApuracaoIPIP8_R2</code> - Layout principal do IPI - Template Jasper <code>SGT_ApuracaoIPIP8_R1</code> - Termos de abertura/encerramento - M\u00faltiplos sub-relat\u00f3rios para se\u00e7\u00f5es espec\u00edficas</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgt/</code></p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>EDB01</code> - Apura\u00e7\u00f5es fiscais - <code>EDB0101</code> - Ocorr\u00eancias da apura\u00e7\u00e3o - <code>EDD10</code> - Livros fiscais - <code>AAJ15</code> - CFOPs</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens fiscais - <code>Edb01</code> - Apura\u00e7\u00e3o principal - <code>Edb0101</code> - Detalhes da apura\u00e7\u00e3o - <code>Edd10</code> - Controle de livros</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro, 1-Termo Abertura, 2-Termo Encerramento referencia String Sim Per\u00edodo de refer\u00eancia MM/aaaa apuracao Long N\u00e3o Tipo de apura\u00e7\u00e3o espec\u00edfica ID do tipo rascunho Boolean Sim Modo rascunho true/false"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#estrutura-do-relatorio","title":"\ud83d\udccb Estrutura do Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-1-dados-da-empresa","title":"Se\u00e7\u00e3o 1 - Dados da Empresa","text":"<ul> <li>Raz\u00e3o social e CNPJ</li> <li>Inscri\u00e7\u00e3o Estadual</li> <li>Per\u00edodo de apura\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-2-lancamentos-por-cfop-entradas","title":"Se\u00e7\u00e3o 2 - Lan\u00e7amentos por CFOP (Entradas)","text":"<ul> <li>Agrupamento por grupo de CFOP (1.x, 2.x, 3.x)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Bases e valores de IPI</li> <li>Isen\u00e7\u00f5es e outras situa\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-3-lancamentos-por-cfop-saidas","title":"Se\u00e7\u00e3o 3 - Lan\u00e7amentos por CFOP (Sa\u00eddas)","text":"<ul> <li>Agrupamento por grupo de CFOP (5.x, 6.x, 7.x)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Bases e valores de IPI</li> <li>Isen\u00e7\u00f5es e outras situa\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-4-apuracao-do-ipi","title":"Se\u00e7\u00e3o 4 - Apura\u00e7\u00e3o do IPI","text":"<ul> <li>D\u00e9bitos e cr\u00e9ditos do per\u00edodo</li> <li>Estornos e compensa\u00e7\u00f5es</li> <li>Cr\u00e9ditos anteriores</li> <li>Dedu\u00e7\u00f5es aplic\u00e1veis</li> <li>Saldo a recolher</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-5-ocorrencias","title":"Se\u00e7\u00e3o 5 - Ocorr\u00eancias","text":"<ul> <li>Detalhamento por tipo de ocorr\u00eancia</li> <li>Valores espec\u00edficos por subitem</li> <li>Observa\u00e7\u00f5es fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo de refer\u00eancia</li> <li>Valida tipo de apura\u00e7\u00e3o selecionado</li> <li> <p>Confirma exist\u00eancia de dados fiscais</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Lan\u00e7amentos agrupados por CFOP</li> <li>C\u00e1lculos de bases e valores de IPI</li> <li> <p>Dados de entradas e sa\u00eddas</p> </li> <li> <p>Processamento da Apura\u00e7\u00e3o</p> </li> <li>C\u00e1lculo de d\u00e9bitos e cr\u00e9ditos</li> <li>Aplica\u00e7\u00e3o de estornos e dedu\u00e7\u00f5es</li> <li> <p>C\u00e1lculo do saldo final</p> </li> <li> <p>Composi\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>M\u00faltiplos sub-relat\u00f3rios especializados</li> <li> <p>Formata\u00e7\u00e3o fiscal espec\u00edfica para IPI</p> </li> <li> <p>Controle de Livros</p> </li> <li>Numera\u00e7\u00e3o sequencial de livros</li> <li>Termos de abertura e encerramento</li> <li>Controle de p\u00e1ginas</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Per\u00edodo deve ser v\u00e1lido e consistente</li> <li>Dados fiscais devem estar integrados</li> <li>Livro n\u00e3o pode estar encerrado para novas apura\u00e7\u00f5es</li> <li>Documentos cancelados s\u00e3o exclu\u00eddos</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Base de C\u00e1lculo: Soma das bases de IPI dos lan\u00e7amentos</li> <li>Valor do IPI: Soma dos valores de IPI</li> <li>D\u00e9bitos/Cr\u00e9ditos: C\u00e1lculo conforme regras fiscais</li> <li>Saldo Final: D\u00e9bitos - Cr\u00e9ditos - Dedu\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#campos-de-alinhamento","title":"Campos de Alinhamento","text":"<ul> <li>0040 - Apura\u00e7\u00e3o LF ICMS/IPI (campos gerais)</li> <li>0083 - Resumo de Apura\u00e7\u00e3o IPI P8 (campos espec\u00edficos)</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#sub-relatorios-especializados","title":"\ud83c\udfa8 Sub-relat\u00f3rios Especializados","text":"Sub-relat\u00f3rio Descri\u00e7\u00e3o R2S1 Lan\u00e7amentos de entrada por CFOP R2S2 Lan\u00e7amentos de sa\u00edda por CFOP R2S3 Apura\u00e7\u00e3o principal do IPI R2S3S1-R2S3S5 Ocorr\u00eancias detalhadas por tipo R2S4 Resumo final da apura\u00e7\u00e3o"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros de Alinhamento: - <code>0040</code> - Apura\u00e7\u00e3o LF ICMS/IPI - <code>0083</code> - Resumo de Apura\u00e7\u00e3o IPI P8</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos sub-relat\u00f3rios especializados</li> <li>C\u00e1lculos fiscais precisos baseados em JSON fields</li> <li>Controle rigoroso de livros fiscais (P8)</li> <li>Formata\u00e7\u00e3o espec\u00edfica para apura\u00e7\u00e3o de IPI</li> <li>Integra\u00e7\u00e3o com sistema de alinhamento de campos</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados fiscais</li> <li>Suporte a termos de abertura e encerramento</li> <li>Modo rascunho para testes e verifica\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/","title":"SGT_LivroSaidasP2P2A.md","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Sa\u00eddas (P2/P2A) para a Linhasita, respons\u00e1vel pelo registro fiscal de todas as opera\u00e7\u00f5es de sa\u00edda no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rio completo de sa\u00eddas fiscais conforme exig\u00eancias legais, incluindo dados de ICMS, IPI e demais tributos incidentes nas opera\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Auditores fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGT_LivroSaidasP2P2A_R2</code> - Layout P2 (sem IPI) - Template Jasper <code>SGT_LivroSaidasP2P2A_R3</code> - Layout P2A (com IPI) - Template Jasper <code>SGT_LivroSaidasP2P2A_R1</code> - Termos de abertura/encerramento - M\u00faltiplos sub-relat\u00f3rios para demonstra\u00e7\u00f5es e resumos</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgt/</code></p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>AAJ15</code> - CFOPs - <code>EAA0102</code> - Dados gerais do documento - <code>EAA0101</code> - Endere\u00e7os - <code>AAG02</code> - Estados/UF - <code>EDD10</code> - Livros fiscais</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens fiscais - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Eaa0102</code> - Dados do destinat\u00e1rio - <code>Edd10</code> - Controle de livros</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro, 1-Termo Abertura, 2-Termo Encerramento dataInicial LocalDate Sim Data inicial do per\u00edodo dd/MM/yyyy dataFinal LocalDate Sim Data final do per\u00edodo dd/MM/yyyy modelo Integer Sim Modelo do livro 0-P2, 1-P2A consEntNosDocDeSaida Boolean Sim Considerar entradas em docs de sa\u00edda true/false rascunho Boolean Sim Modo rascunho true/false resumo Boolean Sim Exibir resumo por CFOP e al\u00edquota true/false"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#modelos-do-livro","title":"\ud83d\udccb Modelos do Livro","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#p2-0","title":"P2 (0)","text":"<ul> <li>Livro de Sa\u00eddas sem IPI</li> <li>Foco nas opera\u00e7\u00f5es de ICMS</li> <li>Demonstra\u00e7\u00f5es por estado e CFOP</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#p2a-1","title":"P2A (1)","text":"<ul> <li>Livro de Sa\u00eddas com IPI</li> <li>Inclui dados de IPI al\u00e9m do ICMS</li> <li>Formata\u00e7\u00e3o espec\u00edfica para ind\u00fastria</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo informado</li> <li>Valida modelo selecionado</li> <li> <p>Confirma configura\u00e7\u00f5es fiscais</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Documentos de sa\u00edda no per\u00edodo</li> <li>Itens fiscais com tributos</li> <li> <p>Dados de destinat\u00e1rios e CFOPs</p> </li> <li> <p>Processamento dos Dados</p> </li> <li>Agrupamento por diversos crit\u00e9rios</li> <li>C\u00e1lculos de bases e valores tribut\u00e1rios</li> <li> <p>Formata\u00e7\u00e3o espec\u00edfica por modelo</p> </li> <li> <p>Composi\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Dados principais dos documentos</li> <li>Demonstra\u00e7\u00f5es por estado (contribuintes/n\u00e3o contribuintes)</li> <li>Resumos por CFOP e al\u00edquotas</li> <li> <p>Sub-relat\u00f3rios especializados</p> </li> <li> <p>Controle de Livros</p> </li> <li>Numera\u00e7\u00e3o sequencial</li> <li>Termos de abertura e encerramento</li> <li>Controle de p\u00e1ginas</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Per\u00edodo deve ser v\u00e1lido e consistente</li> <li>Documentos cancelados t\u00eam valores zerados</li> <li>Apenas documentos fiscais integrados</li> <li>Livro n\u00e3o pode estar encerrado</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Valor Cont\u00e1bil: Soma dos totais dos itens</li> <li>Base ICMS: Soma das bases de c\u00e1lculo</li> <li>Valor ICMS: Soma dos valores do imposto</li> <li>Base IPI: Soma das bases de IPI (P2A)</li> <li>Valor IPI: Soma dos valores de IPI (P2A)</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#campos-de-alinhamento","title":"Campos de Alinhamento","text":"<ul> <li>Configura\u00e7\u00e3o espec\u00edfica para campos JSON</li> <li>Mapeamento de campos fiscais padronizados (0080)</li> <li>Suporte a m\u00faltiplos tipos de dados tribut\u00e1rios</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#estrutura-do-relatorio","title":"\ud83c\udfa8 Estrutura do Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#secao-principal-documentos-de-saida","title":"Se\u00e7\u00e3o Principal - Documentos de Sa\u00edda","text":"<ul> <li>Data e n\u00famero do documento</li> <li>CFOP e descri\u00e7\u00e3o</li> <li>Destinat\u00e1rio (c\u00f3digo, nome, IE)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Tributos incidentes</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#sub-relatorios-especializados","title":"Sub-relat\u00f3rios Especializados","text":"<p>R2S1: Demonstrativo por estado - Opera\u00e7\u00f5es com contribuinte R2S4: Demonstrativo por estado - Opera\u00e7\u00f5es com n\u00e3o contribuinte R2S2: Resumo por CFOP R2S3: Resumo por CFOP e al\u00edquota de ICMS</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros de Alinhamento: - <code>0080</code> - Livro de Sa\u00eddas P2/P2A</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos sub-relat\u00f3rios especializados</li> <li>Zeramento autom\u00e1tico de valores para documentos cancelados</li> <li>Controle rigoroso de livros fiscais (P2/P2A)</li> <li>Formata\u00e7\u00e3o espec\u00edfica para cada modelo</li> <li>Integra\u00e7\u00e3o com sistema de alinhamento de campos</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados fiscais</li> <li>Suporte a entradas em documentos de sa\u00edda (opcional)</li> <li>Resumos agrupados por diversos crit\u00e9rios</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/","title":"SGT Livro Entradas P1 P1A","text":""},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Registro de Entradas modelos P1 e P1A para fins fiscais, incluindo termos de abertura e encerramento conforme legisla\u00e7\u00e3o.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Atender \u00e0s obriga\u00e7\u00f5es fiscais de registro de entradas de mercadorias, gerando livros fiscais P1/P1A com demonstrativos por estado, resumo por CFOP e controle de numera\u00e7\u00e3o sequencial.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Auditoria Fiscal</li> <li>Gest\u00e3o Tribut\u00e1ria</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Templates Jasper: - <code>SGT_LivroEntradasP1P1A_R1</code> - Termos de abertura/encerramento - <code>SGT_LivroEntradasP1P1A_R2</code> - Livro P1 - <code>SGT_LivroEntradasP1P1A_R3</code> - Livro P1A - <code>SGT_LivroEntradasP1P1A_R2S1</code> - Demonstrativo por estado - <code>SGT_LivroEntradasP1P1A_R2S2</code> - Resumo por CFOP - <code>SGT_LivroEntradasP1P1A_R2S3</code> - Resumo por CFOP e al\u00edquota</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>AAJ15</code> - CFOP - <code>EDD10</code> - Controle de livros fiscais - <code>AAC10</code> - Dados da empresa - <code>AAC1002</code> - Inscri\u00e7\u00f5es estaduais</p> <p>Entidades Envolvidas: - <code>Edd10</code> - Controle de livros - <code>Eaa01</code> - Documentos fiscais - <code>Aac10</code> - Empresa - <code>Aag0201</code> - Munic\u00edpios</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0=Livro, 1=Termo Abertura, 2=Termo Encerramento dataInicial LocalDate Sim Data inicial do per\u00edodo Formato dd/MM/yyyy dataFinal LocalDate Sim Data final do per\u00edodo Formato dd/MM/yyyy modelo Integer Sim Modelo do livro 0=P1, 1=P1A entidade Boolean Sim Exibir dados da entidade true/false rascunho Boolean Sim Modo rascunho true/false resumo Boolean Sim Exibir resumo CFOP true/false livro Integer Sim N\u00famero do livro Sequencial pagina Integer Sim P\u00e1gina inicial N\u00famero da p\u00e1gina"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#campos-do-livro","title":"\ud83d\udccb Campos do Livro","text":"Campo Descri\u00e7\u00e3o Tipo eaa01esData Data de entrada Date abb01num N\u00famero do documento Integer aaj15codigo CFOP String eaa0102nome Nome do fornecedor String eaa0102ni CNPJ/CPF String aag02uf UF do fornecedor String vlr_contabil Valor cont\u00e1bil BigDecimal bc_icms Base c\u00e1lculo ICMS BigDecimal icms Valor ICMS BigDecimal bc_ipi Base c\u00e1lculo IPI BigDecimal ipi Valor IPI BigDecimal"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define campos JSON para impostos (ICMS, IPI)</li> <li>Configura alinhamento de impress\u00e3o</li> <li> <p>Obt\u00e9m dados da empresa e respons\u00e1veis</p> </li> <li> <p>Valida\u00e7\u00e3o de Par\u00e2metros</p> </li> <li>Verifica per\u00edodo fiscal</li> <li>Valida n\u00famero do livro e p\u00e1gina</li> <li> <p>Configura termos de abertura/encerramento</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Consulta documentos de entrada no per\u00edodo</li> <li>Agrupa por UF, CFOP e al\u00edquotas</li> <li> <p>Calcula totais e impostos</p> </li> <li> <p>Gera\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Seleciona template conforme modelo (P1/P1A)</li> <li>Processa sub-relat\u00f3rios (demonstrativos)</li> <li> <p>Gera PDF com numera\u00e7\u00e3o de p\u00e1ginas</p> </li> <li> <p>Controle de Numera\u00e7\u00e3o</p> </li> <li>Grava/atualiza controle do livro</li> <li>Valida sequ\u00eancia num\u00e9rica</li> <li>Controla termos de encerramento</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#validacoes-fiscais","title":"Valida\u00e7\u00f5es Fiscais","text":"<ul> <li>Apenas documentos de entrada (<code>ESMOV_ENTRADA</code>)</li> <li>Apenas documentos SRF (<code>CLASDOC_SRF</code>)</li> <li>Documentos com indica\u00e7\u00e3o para livro fiscal (<code>iLivroFisc = SIM</code>)</li> <li>CFOPs 1xxx, 2xxx e 3xxx</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#controle-de-livros","title":"Controle de Livros","text":"<ul> <li>Numera\u00e7\u00e3o sequencial autom\u00e1tica</li> <li>Impedimento de livro em aberto</li> <li>Bloqueio de livro j\u00e1 encerrado</li> <li>Controle de p\u00e1ginas por livro</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#campos-de-impostos","title":"Campos de Impostos","text":"<ul> <li>Configura\u00e7\u00e3o via par\u00e2metros JSON</li> <li>Campos: al\u00edquota, base c\u00e1lculo, valor, isentas, outras</li> <li>Suporte a ICMS, IPI e ICMS ST</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Livro fiscal completo <code>JasperExportManager.exportReportToPdf()</code> PDF Termos de abertura/encerramento Template espec\u00edfico"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Persist\u00eancia e queries - <code>multitec.utils</code> - Utilit\u00e1rios e datas</p> <p>Configura\u00e7\u00f5es: - Par\u00e2metros JSON para campos de impostos - Templates Jasper para diferentes modelos - Controle sequencial de livros (<code>EDD10</code>)</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza sub-relat\u00f3rios para demonstrativos consolidados</li> <li>Processa campos fiscais via fun\u00e7\u00f5es JSON (<code>jGet</code>)</li> <li>Controle rigoroso de numera\u00e7\u00e3o de livros e p\u00e1ginas</li> <li>Suporte a modo rascunho sem grava\u00e7\u00e3o</li> <li>Valida\u00e7\u00e3o de estado do livro (aberto/encerrado)</li> <li>Configura\u00e7\u00e3o din\u00e2mica de alinhamento de impress\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/","title":"SRF - Resumo Por Item","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio resumido de documentos fiscais consolidados por item, com flexibilidade para sele\u00e7\u00e3o de campos personalizados e tratamento de devolu\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer vis\u00e3o consolidada das opera\u00e7\u00f5es fiscais por item, permitindo an\u00e1lise personalizada com campos flex\u00edveis e ajustes autom\u00e1ticos para devolu\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Controladoria</li> <li>Gest\u00e3o de Estoque</li> <li>Comercial</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA0103</code> - Itens de documentos fiscais - <code>EAA01</code> - Documentos fiscais - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABM01</code> - Itens/Cadastro de produtos - <code>AAC10</code> - Empresas - <code>AAM06</code> - Unidades de medida - <code>ABE01</code> - Entidades - <code>ABM0102</code> - Crit\u00e9rios de itens</p> <p>Entidades Envolvidas: - <code>Eaa0103</code> - Itens de documentos - <code>Abm01</code> - Itens/produtos - <code>Eaa01</code> - Documentos fiscais - <code>Aac10</code> - Empresa</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis resumoOperacao Integer Sim Tipo de opera\u00e7\u00e3o 0=Entrada, 1=Sa\u00edda impressao Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX numeroInicial Integer Sim N\u00famero documento inicial 000000001 numeroFinal Integer Sim N\u00famero documento final 999999999 entidade List N\u00e3o Entidades espec\u00edficas IDs entidades tipo List N\u00e3o Tipos documento IDs tipos documento itens List N\u00e3o Itens espec\u00edficos IDs itens empresas List N\u00e3o Empresas espec\u00edficas IDs empresas dataEmissao LocalDate[] N\u00e3o Per\u00edodo emiss\u00e3o Data inicial e final dataEntSai LocalDate[] N\u00e3o Per\u00edodo entrada/sa\u00edda Data inicial e final criterios List N\u00e3o Crit\u00e9rios de item IDs crit\u00e9rios cfop List N\u00e3o CFOPs espec\u00edficos IDs CFOPs pcd List N\u00e3o Crit\u00e9rios PCD IDs crit\u00e9rios PCD"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Campos Personaliz\u00e1veis: - 6 campos configur\u00e1veis (fixos ou livres) - Campos fixos: Qtde Uso, Qtde Comercial, Pre\u00e7o Unit\u00e1rio, Total Item, Total Documento, Total Financeiro - Campos livres: Qualquer campo do JSON do item - Valida\u00e7\u00e3o contra duplica\u00e7\u00e3o de campos</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo abm01codigo C\u00f3digo do item String abm01descr Descri\u00e7\u00e3o do item String aam06codigo Unidade de medida String eaa0103qtComl Quantidade comercial BigDecimal eaa0103unit Pre\u00e7o unit\u00e1rio BigDecimal eaa0103total Total item BigDecimal nomeCampo[1-6] Nome campo personalizado String valor[1-6] Valor campo personalizado BigDecimal"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Valida campos personalizados (sem duplicatas)</li> <li>Define opera\u00e7\u00e3o (entrada/sa\u00edda)</li> <li> <p>Processa agrupamentos de entidades e itens</p> </li> <li> <p>Busca de Agrupamentos</p> </li> <li>Identifica c\u00f3digos com 2 caracteres como agrupadores</li> <li>Expande para incluir entidades e itens filhas</li> <li> <p>Prepara listas completas de IDs</p> </li> <li> <p>Consulta de Dados Principais</p> </li> <li>Busca itens consolidados com filtros aplicados</li> <li>Agrupa por item com totais</li> <li> <p>Aplica crit\u00e9rios de opera\u00e7\u00e3o</p> </li> <li> <p>Processamento de Campos Personalizados</p> </li> <li>Busca campos JSON para cada item</li> <li>Calcula totais dos campos livres</li> <li> <p>Aplica ajustes de devolu\u00e7\u00f5es</p> </li> <li> <p>Tratamento de Devolu\u00e7\u00f5es</p> </li> <li>Identifica itens com devolu\u00e7\u00f5es</li> <li>Subtrai valores devolvidos dos totais</li> <li> <p>Ajusta campos personalizados</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Formata dados com campos personalizados</li> <li>Exporta para PDF ou XLSX</li> <li>Configura totais por campo</li> </ol>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#agrupamento","title":"Agrupamento","text":"<ul> <li>C\u00f3digos com 2 caracteres considerados como agrupadores</li> <li>Expans\u00e3o autom\u00e1tica para entidades e itens filhas</li> <li>Agrupamento por tipo e c\u00f3digo de item</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#campos-personalizados","title":"Campos Personalizados","text":"<ul> <li>M\u00e1ximo 6 campos por relat\u00f3rio</li> <li>Combina\u00e7\u00e3o de campos fixos e livres</li> <li>Valida\u00e7\u00e3o contra duplica\u00e7\u00e3o</li> <li>Campos livres somados do JSON dos itens</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#devolucoes","title":"Devolu\u00e7\u00f5es","text":"<ul> <li>Subtrai quantidades e valores devolvidos</li> <li>Ajusta campos personalizados quando aplic\u00e1vel</li> <li>Considera apenas devolu\u00e7\u00f5es com quantidades &gt; 0</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#filtros","title":"Filtros","text":"<ul> <li>Apenas documentos fiscais (<code>CLASDOC_SRF</code>)</li> <li>Exclui documentos cancelados</li> <li>Filtros por per\u00edodo de emiss\u00e3o ou entrada/sa\u00edda</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado <code>gerarPDF()</code> XLSX Planilha para an\u00e1lise <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para formata\u00e7\u00e3o - Par\u00e2metros JSON para campos personalizados - Tabela <code>AAH02</code> para descri\u00e7\u00e3o de campos</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Flexibilidade total na sele\u00e7\u00e3o de campos</li> <li>Processamento complexo de agrupamentos</li> <li>Duas consultas SQL: dados principais + campos personalizados</li> <li>Algoritmo de valida\u00e7\u00e3o de campos contra duplica\u00e7\u00e3o</li> <li>Suporte a m\u00faltiplos crit\u00e9rios de filtragem</li> <li>Tratamento autom\u00e1tico de devolu\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/","title":"SRF - Resumo Por Estado","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio resumido de documentos fiscais consolidados por estado/UF, com tratamento de devolu\u00e7\u00f5es e agrupamento autom\u00e1tico para an\u00e1lise geogr\u00e1fica.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer vis\u00e3o consolidada das opera\u00e7\u00f5es fiscais por estado, permitindo an\u00e1lise r\u00e1pida de faturamento ou recebimento com totais agrupados por UF e ajustes para devolu\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Controladoria</li> <li>Gest\u00e3o Comercial</li> <li>Diretoria</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades - <code>AAG02</code> - Estados/UF - <code>AAG0201</code> - Munic\u00edpios - <code>AAH01</code> - Tipos de documento - <code>AAC10</code> - Empresas</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Abe01</code> - Clientes/Fornecedores - <code>Aag02</code> - Estado - <code>Aac10</code> - Empresa</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis resumoOperacao Integer Sim Tipo de opera\u00e7\u00e3o 0=Recebimento, 1=Faturamento impressao Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX numeroInicial Integer Sim N\u00famero documento inicial 000000001 numeroFinal Integer Sim N\u00famero documento final 999999999 entidade List N\u00e3o Entidades espec\u00edficas IDs entidades tipo List N\u00e3o Tipos documento IDs tipos documento empresas List N\u00e3o Empresas espec\u00edficas IDs empresas dataEmissao LocalDate[] N\u00e3o Per\u00edodo emiss\u00e3o Data inicial e final dataEntSai LocalDate[] N\u00e3o Per\u00edodo entrada/sa\u00edda Data inicial e final estados List N\u00e3o Estados espec\u00edficos IDs estados pcd List N\u00e3o Crit\u00e9rios PCD IDs crit\u00e9rios"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo aag02uf Estado/UF String aag02nome Nome do estado String eaa0103qtComl Soma quantidade comercial BigDecimal eaa0103unit Soma pre\u00e7o unit\u00e1rio BigDecimal eaa0103total Soma total item BigDecimal eaa0103totDoc Soma total documento BigDecimal"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Define opera\u00e7\u00e3o (faturamento/recebimento)</li> <li>Configura per\u00edodo no cabe\u00e7alho</li> <li> <p>Processa agrupamentos de entidades</p> </li> <li> <p>Busca de Agrupamentos</p> </li> <li>Identifica c\u00f3digos de entidade com 2 caracteres</li> <li>Expande para incluir entidades filhas</li> <li> <p>Prepara lista completa de IDs</p> </li> <li> <p>Consulta de Dados Detalhados</p> </li> <li>Busca documentos com filtros aplicados</li> <li>Processa devolu\u00e7\u00f5es para cada item</li> <li> <p>Ajusta valores com base nas devolu\u00e7\u00f5es</p> </li> <li> <p>Consolida\u00e7\u00e3o por Estado</p> </li> <li>Agrupa dados por UF</li> <li>Soma valores para cada estado</li> <li> <p>Cria estrutura resumida final</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Formata dados consolidados</li> <li>Exporta para PDF ou XLSX</li> <li>Configura cabe\u00e7alho com per\u00edodo</li> </ol>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#agrupamento-de-entidades","title":"Agrupamento de Entidades","text":"<ul> <li>C\u00f3digos com 2 caracteres considerados como agrupadores</li> <li>Inclui automaticamente entidades com c\u00f3digo iniciando pelo agrupador</li> <li>Expande lista de IDs para entidades filhas</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#filtros-de-operacao","title":"Filtros de Opera\u00e7\u00e3o","text":"<ul> <li>Recebimento: <code>eaa01esMov = Eaa01.ESMOV_ENTRADA</code></li> <li>Faturamento: <code>eaa01esMov = Eaa01.ESMOV_SAIDA</code></li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#tratamento-de-devolucoes","title":"Tratamento de Devolu\u00e7\u00f5es","text":"<ul> <li>Busca itens com relacionamento <code>EAA01033</code></li> <li>Subtrai quantidades e valores devolvidos</li> <li>Mant\u00e9m apenas valores l\u00edquidos no relat\u00f3rio</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#consolidacao","title":"Consolida\u00e7\u00e3o","text":"<ul> <li>Agrupamento autom\u00e1tico por estado</li> <li>Soma de todos os valores por UF</li> <li>Manuten\u00e7\u00e3o da ordena\u00e7\u00e3o por estado</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado <code>gerarPDF()</code> XLSX Planilha para an\u00e1lise <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para formata\u00e7\u00e3o - Par\u00e2metros JSON para campos adicionais</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento em duas etapas: detalhado \u2192 consolidado</li> <li>Expans\u00e3o autom\u00e1tica de agrupamentos de entidades</li> <li>Tratamento complexo de devolu\u00e7\u00f5es antes da consolida\u00e7\u00e3o</li> <li>Algoritmo de agrupamento manual por estado na mem\u00f3ria</li> <li>Manuten\u00e7\u00e3o da ordena\u00e7\u00e3o original durante a consolida\u00e7\u00e3o</li> <li>SQL com m\u00faltiplos joins para dados geogr\u00e1ficos</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/","title":"CGS - Parcelamento (Equilibrio)","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para c\u00e1lculo e gera\u00e7\u00e3o de parcelas de condi\u00e7\u00f5es de pagamento, considerando datas de vencimento, ajustes por dias da semana, feriados, valores m\u00ednimos por parcela e configura\u00e7\u00f5es espec\u00edficas do m\u00f3dulo Equilibrio.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular automaticamente as parcelas de uma condi\u00e7\u00e3o de pagamento, aplicando regras de vencimento, descontos, juros, multas e valida\u00e7\u00f5es de valores m\u00ednimos por parcela.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Faturamento</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Abe30</code> - Condi\u00e7\u00f5es de pagamento - <code>Abe3001</code> - Parcelas da condi\u00e7\u00e3o de pagamento - <code>Abe3002</code> - Dias complementares (ajustes de vencimento) - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens do documento fiscal</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o dtBase LocalDate Sim Data base para c\u00e1lculo das parcelas abe30id Long Sim ID da condi\u00e7\u00e3o de pagamento valor BigDecimal Sim Valor total a ser parcelado abe01id Long N\u00e3o ID da entidade (cliente) eaa01 Eaa01 N\u00e3o Documento fiscal relacionado"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Valida\u00e7\u00e3o dos par\u00e2metros obrigat\u00f3rios</li> <li>Carregamento da condi\u00e7\u00e3o de pagamento (Abe30)</li> <li>Defini\u00e7\u00e3o da data de emiss\u00e3o (do documento ou atual)</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#2-calculo-dos-ajustes-de-data","title":"2. C\u00e1lculo dos Ajustes de Data","text":"<ul> <li>Aplica\u00e7\u00e3o de dias adicionais conforme dia da semana da data base</li> <li>C\u00e1lculo de vencimentos nominais para cada parcela</li> <li>Ajustes por vencimentos fixos e dias espec\u00edficos</li> <li>Tratamento de meses com menos dias (ex: fevereiro)</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#3-calculo-dos-valores-das-parcelas","title":"3. C\u00e1lculo dos Valores das Parcelas","text":"<ul> <li>Distribui\u00e7\u00e3o percentual do valor total</li> <li>C\u00e1lculo do saldo para \u00faltima parcela</li> <li>Aplica\u00e7\u00e3o de juros, multas e encargos</li> <li>C\u00e1lculo de descontos por antecipa\u00e7\u00e3o</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#4-validacoes-e-regras-especiais","title":"4. Valida\u00e7\u00f5es e Regras Especiais","text":"<ul> <li>Verifica\u00e7\u00e3o de valor m\u00ednimo por parcela</li> <li>Op\u00e7\u00e3o de agrupamento em parcela \u00fanica</li> <li>C\u00e1lculo de comiss\u00f5es na \u00faltima parcela</li> <li>Valida\u00e7\u00e3o de documentos financeiros</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#configuracao-de-vencimentos","title":"Configura\u00e7\u00e3o de Vencimentos","text":"<ul> <li>Dias base: Ajustes por dia da semana na data base</li> <li>Vencimentos fixos: Datas espec\u00edficas por parcela</li> <li>Dias do m\u00eas: Vencimento em dia espec\u00edfico do m\u00eas</li> <li>Ajustes complementares: Regras por faixa de dias</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#calculo-financeiro","title":"C\u00e1lculo Financeiro","text":"<ul> <li>Juros: Percentual aplicado sobre o valor da parcela</li> <li>Multa: Percentual ou valor fixo</li> <li>Desconto: Percentual com limite temporal</li> <li>Encargos: Valores adicionais fixos</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#validacoes-de-parcelas","title":"Valida\u00e7\u00f5es de Parcelas","text":"<ul> <li>Valor m\u00ednimo: Configur\u00e1vel por condi\u00e7\u00e3o de pagamento</li> <li>Op\u00e7\u00f5es: 0 - Agrupar em uma parcela, 1 - Validar valor m\u00ednimo</li> <li>Comiss\u00f5es: Calculadas apenas na \u00faltima parcela</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#documentos-financeiros","title":"Documentos Financeiros","text":"<ul> <li>Tipo 1: Gera documento na data de vencimento</li> <li>Tipo 2: Gera documento na data de emiss\u00e3o</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de parcelamento.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#obterdiasadicionaisadatalocaldate-data-abe30-abe30-int-qualdata","title":"<code>obterDiasAdicionaisAData(LocalDate data, Abe30 abe30, int qualData)</code>","text":"<p>Calcula dias adicionais baseado no dia da semana: - 0: Dias para data base - 1: Dias para vencimento nominal</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#buscarcondicaopagamentoporidlong-abe30id","title":"<code>buscarCondicaoPagamentoPorId(Long abe30id)</code>","text":"<p>Busca a condi\u00e7\u00e3o de pagamento pelo ID.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#buscarparcelaspeloidcondicaopagamentolong-abe30id","title":"<code>buscarParcelasPeloIdCondicaoPagamento(Long abe30id)</code>","text":"<p>Busca as parcelas configuradas para a condi\u00e7\u00e3o de pagamento.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#buscardiacomplementarpeloidcondicaopagamentolong-abe30id","title":"<code>buscarDiaComplementarPeloIdCondicaoPagamento(Long abe30id)</code>","text":"<p>Busca ajustes complementares de dias.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#montarparceladtolocaldate-data-bigdecimal-valor-integer-docfinanc-abe3001-abe3001-tablemap-cposlivres","title":"<code>montarParcelaDto(LocalDate data, BigDecimal valor, Integer docFinanc, Abe3001 abe3001, TableMap cposLivres)</code>","text":"<p>Monta o DTO da parcela com todos os dados calculados.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>ParcelaDto: - <code>vctoN</code> - Data de vencimento nominal - <code>valor</code> - Valor da parcela - <code>criaDoc</code> - Tipo de documento financeiro (1 ou 2) - <code>abf15id</code> - ID do portador - <code>abf16id</code> - ID da opera\u00e7\u00e3o - <code>abf40id</code> - ID da forma de pagamento - <code>cposLivres</code> - Campos livres (juros, multa, desconto, etc.)</p> <p>Lista de Parcelas: - Retornada no par\u00e2metro <code>listaParcelas</code></p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e consultas ao banco - <code>multitec.utils</code> - Utilit\u00e1rios de data - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.cgs</code> - DTOs do m\u00f3dulo CGS - <code>sam.model</code> - Entidades do sistema - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>M\u00f3dulo: Equilibrio</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#tratamento-de-datas","title":"Tratamento de Datas","text":"<ul> <li>Ajustes autom\u00e1ticos para finais de semana</li> <li>Tratamento especial para fevereiro (meses com menos dias)</li> <li>Suporte a vencimentos fixos e vari\u00e1veis</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#campos-livres-json","title":"Campos Livres (JSON)","text":"<ul> <li><code>juros</code> - Valor calculado de juros</li> <li><code>multa</code> - Valor calculado de multa</li> <li><code>encargos</code> - Encargos adicionais</li> <li><code>desconto</code> - Valor de desconto por antecipa\u00e7\u00e3o</li> <li><code>dtLimiteDesc</code> - Data limite para desconto</li> <li><code>nomevcto</code> - Nome personalizado do vencimento</li> <li><code>comissao_parcela</code> - Comiss\u00e3o na \u00faltima parcela</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#validacoes-de-negocio","title":"Valida\u00e7\u00f5es de Neg\u00f3cio","text":"<ul> <li>Interrup\u00e7\u00e3o se valor m\u00ednimo n\u00e3o for atingido</li> <li>C\u00e1lculo preciso de saldos para evitar diferen\u00e7as</li> <li>Suporte a condi\u00e7\u00f5es complexas de pagamento</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:00 Autor: Bruno Tipo: F\u00f3rmula de Condi\u00e7\u00e3o de Pagamento Vers\u00e3o: 1.0</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Equilibrio)","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Equilibrio, com tratamento de caracteres especiais e c\u00f3pia obrigat\u00f3ria para e-mail interno.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) incluindo c\u00f3pia para contato@equilibrioind.com.br e tratamento de normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Administra\u00e7\u00e3o</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> <li>Normaliza\u00e7\u00e3o de caracteres para remover acentos</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE + c\u00f3pia interna</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> <li>C\u00f3pia Interna: contato@equilibrioind.com.br (apenas faturamento)</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE (boleto opcional)</li> <li>Cobran\u00e7a: Apenas boleto</li> <li>C\u00f3pia Interna: XML + DANFE</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Faturamento/C\u00f3pia Interna: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a)</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-especificas","title":"Funcionalidades Espec\u00edficas","text":"<ul> <li>Normaliza\u00e7\u00e3o de Caracteres: Remove acentos do nome do cliente</li> <li>C\u00f3pia Obrigat\u00f3ria: contato@equilibrioind.com.br para todos os faturamentos</li> <li>Transportadora: C\u00f3digo comentado - n\u00e3o envia e-mails para transportadora</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Envia boleto junto com faturamento se mesmo e-mail</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML e normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem (caracteres normalizados) - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema - <code>java.text.Normalizer</code> - Normaliza\u00e7\u00e3o de caracteres</p> <p>M\u00f3dulo: Equilibrio</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer.normalize(corpo, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\")</code></li> <li>Remove acentos e caracteres especiais do nome do cliente</li> <li>Aplica tanto no corpo da mensagem quanto no nome do cliente</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#copia-interna-obrigatoria","title":"C\u00f3pia Interna Obrigat\u00f3ria","text":"<ul> <li>E-mail: contato@equilibrioind.com.br</li> <li>Apenas para opera\u00e7\u00f5es de faturamento (n\u00e3o cancelamento/CC-e)</li> <li>Recebe XML e DANFE para controle interno</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-comentadas","title":"Funcionalidades Comentadas","text":"<ul> <li>M\u00e9todo <code>obterEmailTransportadoraDespacho()</code> dispon\u00edvel mas n\u00e3o utilizado</li> <li>Bloco de c\u00f3digo para transportadora comentado</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:48 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Equilibrio) Vers\u00e3o: 1.0</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/","title":"SCV - Separa\u00e7\u00e3o de Pedido (Equilibrio)","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Classe Groovy especializada na gera\u00e7\u00e3o de relat\u00f3rios de separa\u00e7\u00e3o de pedidos e envio automatizado de e-mails para o sistema SCV da Equilibrio.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar relat\u00f3rios de separa\u00e7\u00e3o de pedidos em formato PDF/XLSX e enviar por e-mail para clientes, com controle de filtros avan\u00e7ados e composi\u00e7\u00e3o completa de dados do pedido.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento de Vendas</li> <li>Log\u00edstica e Separa\u00e7\u00e3o</li> <li>Faturamento</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos de pedidos - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0103</code> - Itens do pedido - <code>Aac10</code> - Empresas - <code>Abe0104</code> - E-mails das entidades - <code>Aab1008</code> - Configura\u00e7\u00f5es de usu\u00e1rio</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#parametros-da-classe","title":"\u2699\ufe0f Par\u00e2metros da Classe","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o tipos List N\u00e3o Tipos de documento entidades List N\u00e3o Entidades (clientes) numeroInicial Integer Sim N\u00famero inicial do pedido numeroFinal Integer Sim N\u00famero final do pedido impressao Integer Sim 0=PDF, 1=XLSX atendimento Boolean Sim Filtro de atendimento eaa01id Long N\u00e3o Filtro por separador espec\u00edfico enviaEmail Boolean N\u00e3o Habilitar envio por e-mail"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de filtro</li> <li>Defini\u00e7\u00e3o do caminho do logo para relat\u00f3rios</li> <li>Carregamento de IDs de documentos com base nos crit\u00e9rios</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#2-composicao-de-dados-do-pedido","title":"2. Composi\u00e7\u00e3o de Dados do Pedido","text":"<ul> <li>Dados do Documento: N\u00famero, data, valores, observa\u00e7\u00f5es</li> <li>Dados da Empresa: Raz\u00e3o social, CNPJ, endere\u00e7o, contato</li> <li>Dados do Cliente: Nome, CNPJ/CPF, endere\u00e7o, e-mail</li> <li>Dados Financeiros: Condi\u00e7\u00e3o de pagamento, forma de pagamento</li> <li>Dados de Entrega: Endere\u00e7o, transportadora, tipo de frete</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#3-processamento-de-itens","title":"3. Processamento de Itens","text":"<ul> <li>Busca de itens do pedido com sequ\u00eancia</li> <li>C\u00e1lculo de volumes e pesos l\u00edquidos</li> <li>Agrupamento de n\u00fameros de pedido de compra</li> <li>Formata\u00e7\u00e3o de descontos e valores</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#4-geracao-de-saida","title":"4. Gera\u00e7\u00e3o de Sa\u00edda","text":"<ul> <li>PDF: Relat\u00f3rio formatado para impress\u00e3o</li> <li>XLSX: Planilha para an\u00e1lise de dados</li> <li>E-mail: Envio autom\u00e1tico com anexo PDF</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#filtros-de-documentos","title":"Filtros de Documentos","text":"<ul> <li>Apenas documentos n\u00e3o cancelados (<code>eaa01cancData is null</code>)</li> <li>Apenas documentos classificados como venda (<code>eaa01clasdoc = 0</code>)</li> <li>Apenas documentos com aceite confirmado (<code>eaa01aceite = 1</code>)</li> <li>Filtro por per\u00edodo de emiss\u00e3o e entrega</li> <li>Filtro por status de atendimento (0, 1, 2)</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#composicao-de-valores","title":"Composi\u00e7\u00e3o de Valores","text":"<ul> <li>Frete: Soma de valores do emitente e destinat\u00e1rio</li> <li>Desconto: Extra\u00eddo do JSON do documento</li> <li>Impostos: IPI, ICMS-ST, despesas acess\u00f3rias</li> <li>Valores: Unit\u00e1rio, total e total do documento</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#envio-de-e-mail","title":"Envio de E-mail","text":"<ul> <li>Requer e-mail cadastrado para o usu\u00e1rio logado</li> <li>Busca e-mails de destino na entidade (c\u00f3digo 9001)</li> <li>Inclui assinatura digital se configurada</li> <li>Anexa PDF do pedido com nome personalizado</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de gera\u00e7\u00e3o do relat\u00f3rio.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#enviaremailinteger-numeroinicial-listtablemap-dadospedido","title":"<code>enviarEmail(Integer numeroInicial, List&lt;TableMap&gt; dadosPedido)</code>","text":"<p>Envia relat\u00f3rio por e-mail com PDF anexo para os destinat\u00e1rios configurados.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#buscardocidslistlong-tipos-listlong-entidades","title":"<code>buscarDocIds(List&lt;Long&gt; tipos, List&lt;Long&gt; entidades, ...)</code>","text":"<p>Busca IDs de documentos com base nos crit\u00e9rios de filtro aplicados.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#metodos-de-composicao","title":"M\u00e9todos de Composi\u00e7\u00e3o","text":"<ul> <li><code>comporDocumento()</code>: Dados b\u00e1sicos do documento</li> <li><code>comporDadosEmpresa()</code>: Informa\u00e7\u00f5es da empresa</li> <li><code>comporDadosEntidade()</code>: Dados do cliente</li> <li><code>comporDadosEntidadeEndereco()</code>: Endere\u00e7o completo</li> <li><code>comporDadosFinanceiro()</code>: Condi\u00e7\u00f5es financeiras</li> <li><code>comporDadosEntrega()</code>: Dados de entrega e frete</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>TableMap Principal: - Dados do documento (n\u00famero, data, valores totais) - Dados da empresa (raz\u00e3o social, endere\u00e7o, contato) - Dados do cliente (nome, endere\u00e7o, e-mail) - Dados financeiros (condi\u00e7\u00e3o pagamento) - Dados de entrega (endere\u00e7o, transportadora, frete)</p> <p>Lista de Itens: - Sequ\u00eancia, c\u00f3digo, descri\u00e7\u00e3o do produto - Quantidade, valor unit\u00e1rio, valor total - Volume, peso l\u00edquido, pedido de compra - Controle de qualidade (abm15nome)</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>JasperReports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>Java Mail</code> - Envio de e-mails - <code>MultiORM</code> - Persist\u00eancia e consultas - <code>Utils Multitec</code> - Utilit\u00e1rios corporativos - <code>Java Time</code> - Manipula\u00e7\u00e3o de datas</p> <p>M\u00f3dulo: SCV - Sistema de Controle de Vendas</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer</code> para remover acentos do nome da empresa no e-mail</li> <li>Garante compatibilidade com sistemas de e-mail</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#tratamento-de-json","title":"Tratamento de JSON","text":"<ul> <li>Extra\u00e7\u00e3o de valores customizados do campo JSON dos documentos</li> <li>Flexibilidade para campos din\u00e2micos sem altera\u00e7\u00e3o de estrutura</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#configuracao-de-logotipo","title":"Configura\u00e7\u00e3o de Logotipo","text":"<ul> <li>Caminho din\u00e2mico baseado no package da classe</li> <li>Suporte a diferentes ambientes de deployment</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#controle-de-acesso","title":"Controle de Acesso","text":"<ul> <li>Verifica\u00e7\u00e3o de permiss\u00f5es atrav\u00e9s do m\u00e9todo <code>obterWherePadrao()</code></li> <li>Filtragem por empresa ativa do usu\u00e1rio logado</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 23/10/2025 \u00e0s 17:25 Autor: Bruno Tipo: Relat\u00f3rio de Separa\u00e7\u00e3o de Pedidos Vers\u00e3o: 1.0</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Foco)","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Foco, com tratamento de caracteres especiais e configura\u00e7\u00e3o simplificada de envio.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) com foco em simplicidade e tratamento de normaliza\u00e7\u00e3o de caracteres, adaptado para as necessidades do m\u00f3dulo Foco.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> <li>Normaliza\u00e7\u00e3o de caracteres para remover acentos</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE + boleto</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto (se diferente)</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE + boleto</li> <li>Cobran\u00e7a: Apenas boleto</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Todos os e-mails: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Tamb\u00e9m usa remetente 2</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-especificas","title":"Funcionalidades Espec\u00edficas","text":"<ul> <li>Normaliza\u00e7\u00e3o de Caracteres: Remove acentos do nome do cliente</li> <li>Boleto no Faturamento: Sempre enviado junto com XML e DANFE</li> <li>Configura\u00e7\u00e3o Simplificada: Sem c\u00f3pias internas ou representantes</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Sempre envia boleto no e-mail de faturamento</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML e normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem (caracteres normalizados) - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (2: Faturamento para todos)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema - <code>java.text.Normalizer</code> - Normaliza\u00e7\u00e3o de caracteres</p> <p>M\u00f3dulo: Foco</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer.normalize(corpo, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\")</code></li> <li>Remove acentos e caracteres especiais do nome do cliente</li> <li>Aplica tanto no corpo da mensagem quanto no nome do cliente</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#configuracao-simplificada","title":"Configura\u00e7\u00e3o Simplificada","text":"<ul> <li>Sem c\u00f3pias internas para administra\u00e7\u00e3o</li> <li>Sem e-mails para representantes</li> <li>Sem e-mails para transportadora</li> <li>Foco apenas no cliente final</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-cobranca","title":"Configura\u00e7\u00e3o de Cobran\u00e7a","text":"<ul> <li>Remetente 2 para todos os e-mails (inclusive cobran\u00e7a)</li> <li>Boleto sempre enviado no faturamento</li> <li>E-mail de cobran\u00e7a separado apenas se diferente do faturamento</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:47 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Foco) Vers\u00e3o: 1.0</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (LCB)","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo LCB, com tratamento de caracteres especiais, c\u00f3pia obrigat\u00f3ria para e-mail da empresa e configura\u00e7\u00e3o espec\u00edfica de cobran\u00e7a.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) incluindo c\u00f3pia para e-mail configurado na empresa e tratamento de normaliza\u00e7\u00e3o de caracteres, adaptado para as necessidades do m\u00f3dulo LCB.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Administra\u00e7\u00e3o</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades - <code>Aac10</code> - Empresa (para e-mail de c\u00f3pia)</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> <li>Normaliza\u00e7\u00e3o de caracteres para remover acentos</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE + boleto + c\u00f3pia interna</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> <li>C\u00f3pia Interna: E-mail configurado na empresa (Aac10.json)</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE + boleto</li> <li>Cobran\u00e7a: Apenas boleto</li> <li>C\u00f3pia Interna: XML + DANFE</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Todos os e-mails: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Tamb\u00e9m usa remetente 2 (diferente de outros m\u00f3dulos)</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-especificas","title":"Funcionalidades Espec\u00edficas","text":"<ul> <li>Normaliza\u00e7\u00e3o de Caracteres: Remove acentos do nome do cliente</li> <li>C\u00f3pia Obrigat\u00f3ria: E-mail configurado em <code>obterEmpresaAtiva().aac10json.getString(\"email\")</code></li> <li>Boleto no Faturamento: Sempre enviado junto com XML e DANFE</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Sempre envia boleto no e-mail de faturamento</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML e normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem (caracteres normalizados) - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (2: Faturamento para todos)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema - <code>java.text.Normalizer</code> - Normaliza\u00e7\u00e3o de caracteres</p> <p>M\u00f3dulo: LCB</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer.normalize(corpo, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\")</code></li> <li>Remove acentos e caracteres especiais do nome do cliente</li> <li>Aplica tanto no corpo da mensagem quanto no nome do cliente</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#copia-interna-dinamica","title":"C\u00f3pia Interna Din\u00e2mica","text":"<ul> <li>E-mail obtido de <code>obterEmpresaAtiva().aac10json.getString(\"email\")</code></li> <li>Configur\u00e1vel por empresa via campo JSON</li> <li>Apenas para opera\u00e7\u00f5es de faturamento (n\u00e3o cancelamento/CC-e)</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-cobranca","title":"Configura\u00e7\u00e3o de Cobran\u00e7a","text":"<ul> <li>Remetente 2 para todos os e-mails (inclusive cobran\u00e7a)</li> <li>Boleto sempre enviado no faturamento</li> <li>E-mail de cobran\u00e7a separado apenas se diferente do faturamento</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:37 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (LCB) Vers\u00e3o: 1.0</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/","title":"SCC Documentos de Comiss\u00f5es","text":""},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de comiss\u00f5es para representantes com vers\u00f5es anal\u00edtica e sint\u00e9tica, permitindo acompanhamento detalhado ou consolidado dos valores a pagar.</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Controlar e analisar as comiss\u00f5es de representantes, oferecendo vis\u00e3o detalhada por documento ou vis\u00e3o consolidada por representante, com flexibilidade de filtros por datas e status de c\u00e1lculo.</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Controladoria</li> <li>Gest\u00e3o de Representantes</li> <li>Departamento Financeiro</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DCB01</code> - Base de c\u00e1lculo de comiss\u00f5es - <code>ABB01</code> - Documentos de comiss\u00f5es - <code>ABE01</code> - Representantes e entidades - <code>AAH01</code> - Tipos de documento - <code>DAA01</code> - Documentos a receber - <code>DCD01</code> - C\u00e1lculos de comiss\u00f5es</p> <p>Entidades Envolvidas: - <code>Dcb01</code> - C\u00e1lculo de comiss\u00f5es - <code>Abe01</code> - Representantes e clientes - <code>Abb01</code> - Documentos - <code>Aac10</code> - Empresa</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis layout Integer Sim Tipo de relat\u00f3rio 0=Anal\u00edtico, 1=Sint\u00e9tico dataCalculo Integer Sim Status do c\u00e1lculo 0=N\u00e3o calculado, 1=Calculado, 2=Todos numeroInicial Integer N\u00e3o N\u00famero documento inicial \u2265 0 numeroFinal Integer N\u00e3o N\u00famero documento final \u2265 0 representantes List N\u00e3o Representantes espec\u00edficos IDs representantes emissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o Data inicial e final dataCredito LocalDate[] N\u00e3o Per\u00edodo de cr\u00e9dito Data inicial e final imprimir Integer Sim Formato de sa\u00edda 0=PDF, 1=XLSX"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":""},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#layout-analitico","title":"Layout Anal\u00edtico","text":"Campo Descri\u00e7\u00e3o Tipo repCod C\u00f3digo representante String repNome Nome representante String abb01num N\u00famero documento Integer abb01parcela Parcela documento String entCod C\u00f3digo cliente String entNa Nome reduzido cliente String abb01data Data emiss\u00e3o Date dcb01dtCredito Data cr\u00e9dito Date abb01valor Valor documento BigDecimal dcb01bc Base c\u00e1lculo comiss\u00e3o BigDecimal dcb01taxa Taxa comiss\u00e3o BigDecimal dcb01valor Valor comiss\u00e3o BigDecimal"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#layout-sintetico","title":"Layout Sint\u00e9tico","text":"Campo Descri\u00e7\u00e3o Tipo repCod C\u00f3digo representante String repNome Nome representante String abb01valor Soma valores documentos BigDecimal dcb01bc Soma base c\u00e1lculo BigDecimal dcb01valor Soma valores comiss\u00e3o BigDecimal"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Define layout (anal\u00edtico/sint\u00e9tico)</li> <li>Processa filtros de datas (emiss\u00e3o/cr\u00e9dito)</li> <li> <p>Valida status de c\u00e1lculo</p> </li> <li> <p>Sele\u00e7\u00e3o de Consulta</p> </li> <li>Anal\u00edtico: Detalhamento por documento</li> <li>Sint\u00e9tico: Consolida\u00e7\u00e3o por representante</li> <li> <p>Aplica filtros comuns a ambos</p> </li> <li> <p>Constru\u00e7\u00e3o da Consulta</p> </li> <li>Monta SQL com joins espec\u00edficos</li> <li>Aplica filtros din\u00e2micos</li> <li> <p>Define ordena\u00e7\u00e3o conforme layout</p> </li> <li> <p>Processamento de Dados</p> </li> <li>Busca dados do banco</li> <li>Calcula totais (sint\u00e9tico)</li> <li> <p>Formata informa\u00e7\u00f5es</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Seleciona template conforme layout</li> <li>Exporta para PDF ou XLSX</li> <li>Formata cabe\u00e7alho com per\u00edodo</li> </ol>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#filtros-de-data","title":"Filtros de Data","text":"<ul> <li>Emiss\u00e3o: Data do documento original</li> <li>Cr\u00e9dito: Data de cr\u00e9dito da comiss\u00e3o</li> <li>Per\u00edodo exibido no cabe\u00e7alho conforme filtro aplicado</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#status-de-calculo","title":"Status de C\u00e1lculo","text":"<ul> <li>N\u00e3o calculado: <code>centralCalc.abb01data is null</code></li> <li>Calculado: <code>centralCalc.abb01data is not null</code></li> <li>Todos: Sem filtro de c\u00e1lculo</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Apenas endere\u00e7os principais (<code>abe0101principal = 1</code>)</li> <li>Relacionamento com documentos a receber (<code>abb0101tabela = 'Daa01'</code>)</li> <li>Aplica filtros padr\u00e3o do sistema (<code>obterWherePadrao</code>)</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Layout Formato Template M\u00e9todo Anal\u00edtico PDF <code>SCC_DocumentosComissoes_Analitico</code> <code>gerarPDF()</code> Anal\u00edtico XLSX <code>SCC_DocumentosComissoes_Analitico</code> <code>gerarXLSX()</code> Sint\u00e9tico PDF <code>SCC_DocumentosComissoes_Sintetico</code> <code>gerarPDF()</code> Sint\u00e9tico XLSX <code>SCC_DocumentosComissoes_Sintetico</code> <code>gerarXLSX()</code>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para layouts anal\u00edtico e sint\u00e9tico - Filtros padr\u00e3o do sistema para entidade <code>DCB01</code></p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>SQL din\u00e2mico com m\u00faltiplos joins para relacionamentos</li> <li>Dois templates distintos para anal\u00edtico/sint\u00e9tico</li> <li>Flexibilidade de filtros por datas diferentes</li> <li>Ordena\u00e7\u00e3o espec\u00edfica por layout</li> <li>Suporte a m\u00faltiplos representantes</li> <li>Controle de status de c\u00e1lculo das comiss\u00f5es</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/","title":"SCF Boleto Banco do Brasil","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o e envio de boletos banc\u00e1rios do Banco do Brasil para a Linhasita, com c\u00e1lculo autom\u00e1tico de c\u00f3digo de barras e linha digit\u00e1vel.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar a emiss\u00e3o de boletos banc\u00e1rios com envio por e-mail, garantindo a correta formata\u00e7\u00e3o dos campos according \u00e0s especifica\u00e7\u00f5es do Banco do Brasil e registro de status de impress\u00e3o.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Cobran\u00e7a</li> <li>Clientes/Fornecedores</li> <li>Faturamento</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Arquivo <code>LogoBancoBrasil.png</code> - Logo do banco - Template Jasper <code>SCF_BoletoBancoBrasil</code> - Layout do boleto</p> <p>Localiza\u00e7\u00e3o: <code>samdev/resources/linhasita/relatorios/scf/</code></p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA01</code> - Documentos a receber - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades/Clientes - <code>ABF01</code> - Dados banc\u00e1rios - <code>ABE0101</code> - Endere\u00e7os de cobran\u00e7a - <code>AAC10</code> - Dados da empresa</p> <p>Entidades Envolvidas: - <code>Daa01</code> - Documentos a receber - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Abe01</code> - Clientes - <code>Aab1008</code> - Configura\u00e7\u00e3o de e-mail do usu\u00e1rio</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis dataProc LocalDate Sim Data de processamento Data atual numeroInicial Integer N\u00e3o N\u00famero inicial do documento 000000000 numeroFinal Integer N\u00e3o N\u00famero final do documento 999999999 carteira String N\u00e3o Carteira banc\u00e1ria Especifica\u00e7\u00e3o BB aceite String N\u00e3o Aceite do t\u00edtulo S/N movimento Integer N\u00e3o Movimento espec\u00edfico ID movimento entidade List N\u00e3o Clientes espec\u00edficos IDs entidades dataVenc LocalDate[] N\u00e3o Per\u00edodo de vencimento Data inicial/final enviaBoletoPorEmail Boolean Sim Envio autom\u00e1tico true/false"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#campos-do-boleto","title":"\ud83d\udccb Campos do Boleto","text":"Campo Descri\u00e7\u00e3o Tipo daa01nossoNum Nosso n\u00famero String (10) daa01dtVctoN Data de vencimento Date daa01valor Valor do t\u00edtulo BigDecimal abe01nome Nome do cliente String abe01ni CNPJ/CPF String codigoBarras C\u00f3digo de barras String (44) codigoLinhaDigitavel Linha digit\u00e1vel String abf01agencia Ag\u00eancia String abf01conta Conta corrente String"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Processa filtros por n\u00famero, vencimento, entidades</li> <li> <p>Valida dados banc\u00e1rios obrigat\u00f3rios</p> </li> <li> <p>Busca de T\u00edtulos</p> </li> <li>Consulta documentos em aberto do Banco do Brasil (c\u00f3digo 001)</li> <li>Aplica filtros de cobran\u00e7a e vencimento</li> <li> <p>Busca por IDs espec\u00edficos ou por crit\u00e9rios</p> </li> <li> <p>C\u00e1lculo de Campos Banc\u00e1rios</p> </li> <li>Gera fator de vencimento (base 07/10/1997)</li> <li>Calcula c\u00f3digo de barras (m\u00f3dulo 11)</li> <li>Monta linha digit\u00e1vel (m\u00f3dulo 10)</li> <li> <p>Define campo livre conforme especifica\u00e7\u00e3o BB</p> </li> <li> <p>Processamento de Sa\u00edda</p> </li> <li>Gera PDF dos boletos</li> <li>Se solicitado, envia e-mails para clientes</li> <li> <p>Registra status de impress\u00e3o</p> </li> <li> <p>Envio por E-mail (opcional)</p> </li> <li>Agrupa boletos por documento origem</li> <li>Valida e-mails de cobran\u00e7a dos clientes</li> <li>Envia em lote com assinatura</li> </ol>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Considera apenas banco 001 (Banco do Brasil)</li> <li>Apenas documentos n\u00e3o pagos (<code>daa01dtPgto is null</code>)</li> <li>Endere\u00e7o de cobran\u00e7a obrigat\u00f3rio (<code>abe0101cobranca = 1</code>)</li> <li>Usu\u00e1rio deve ter e-mail configurado para envio</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#calculos-bancarios","title":"C\u00e1lculos Banc\u00e1rios","text":"<ul> <li>Fator Vencimento: Dias desde 07/10/1997</li> <li>C\u00f3digo Barras: M\u00f3dulo 11 com pesos 2-9</li> <li>Linha Digit\u00e1vel: M\u00f3dulo 10 com formata\u00e7\u00e3o espec\u00edfica</li> <li>Campo Livre: 6 zeros + 17 nosso n\u00famero + 2 carteira</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#formatacao","title":"Formata\u00e7\u00e3o","text":"<ul> <li>Nosso n\u00famero com 10 d\u00edgitos</li> <li>Valores em centavos (multiplicados por 100)</li> <li>Campos num\u00e9ricos com zeros \u00e0 esquerda</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Boleto formatado <code>gerarPDF()</code> E-mail Envio autom\u00e1tico para clientes <code>enviarBoletosPorEmail()</code>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>javax.mail</code> - Envio de e-mails - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos</p> <p>Servi\u00e7os: - <code>SCFService</code> - Servi\u00e7os do m\u00f3dulo financeiro</p> <p>Configura\u00e7\u00f5es: - E-mail do usu\u00e1rio logado (<code>Aab1008</code>) - E-mails de cobran\u00e7a (classifica\u00e7\u00e3o 01 e 03)</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Implementa c\u00e1lculo completo de c\u00f3digo de barras segundo especifica\u00e7\u00e3o BB</li> <li>Suporte a m\u00faltiplos formatos de entrada (IDs espec\u00edficos ou filtros)</li> <li>Envio ass\u00edncrono de e-mails em lote com Thread separada</li> <li>Valida\u00e7\u00e3o de e-mails de cobran\u00e7a com fallback para e-mails de endere\u00e7o</li> <li>Registro autom\u00e1tico de status de impress\u00e3o dos documentos</li> <li>Formata\u00e7\u00e3o espec\u00edfica para Banco do Brasil (carteira, convenio, aceite)</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/","title":"SCF Documentos","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio abrangente de documentos financeiros (receber/pagar) com m\u00faltiplas op\u00e7\u00f5es de ordena\u00e7\u00e3o, filtros e formata\u00e7\u00f5es para an\u00e1lise financeira detalhada.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer vis\u00e3o completa da situa\u00e7\u00e3o de documentos financeiros, permitindo an\u00e1lise por diferentes crit\u00e9rios como vencimento, entidade, portador e representante, com c\u00e1lculos autom\u00e1ticos de juros, multas e descontos.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Controladoria</li> <li>Cobran\u00e7a</li> <li>Gest\u00e3o de Contas a Pagar/Receber</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA01</code> - Documentos financeiros - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades (clientes/fornecedores) - <code>ABF15</code> - Portadores - <code>ABF16</code> - Opera\u00e7\u00f5es - <code>AAH01</code> - Tipos de documento - <code>ABF20</code> - PLF (Plano de Livro Fiscal)</p> <p>Entidades Envolvidas: - <code>Daa01</code> - Documentos financeiros - <code>Abe01</code> - Clientes/Fornecedores/Representantes - <code>Abf15</code> - Portador - <code>Abf16</code> - Opera\u00e7\u00e3o - <code>Aac10</code> - Empresa</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis classe Integer Sim Classe de documentos 0=A Receber, 1=Recebidos, 2=A Pagar, 3=Pagos, 4=A Receber/Recebidos, 5=A Pagar/Pagos ordem Integer Sim Ordena\u00e7\u00e3o 0=N\u00famero, 1=Vencimento, 2=Entidade, 3=Pagamento, 4=Portador, 5=Representante numeroInicial Integer Sim N\u00famero inicial 000000000 numeroFinal Integer Sim N\u00famero final 999999999 tipoData Integer Sim Tipo data pagamento 0=Pagamento, 1=Recebimento tipo Integer Sim Tipo documento 0=Real, 1=Previs\u00e3o, 2=Todos impressao Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX vencimento Integer Sim Tipo vencimento 0=Real, 1=Nominal"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo abb01num N\u00famero documento Integer abb01parcela Parcela String ent.abe01nome Nome entidade String aah01codigo Tipo documento String vencimento Data vencimento Date daa01dtPgto Data pagamento Date valor Valor documento BigDecimal dias Dias em atraso Long jm Juros/Multas BigDecimal desconto Valor desconto BigDecimal abf15nome Portador String repNome Representante String"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define t\u00edtulo conforme classe e ordena\u00e7\u00e3o</li> <li>Configura per\u00edodo no cabe\u00e7alho</li> <li> <p>Processa par\u00e2metros complexos</p> </li> <li> <p>Busca de Documentos</p> </li> <li>Aplica m\u00faltiplos filtros din\u00e2micos</li> <li>Define ordena\u00e7\u00e3o flex\u00edvel</li> <li> <p>Processa joins com diversas entidades</p> </li> <li> <p>C\u00e1lculos Financeiros</p> </li> <li>Calcula dias em atraso</li> <li>Processa juros, multas e descontos via JSON</li> <li> <p>Define tipo de documento (Real/Previs\u00e3o)</p> </li> <li> <p>Processamento de Dados</p> </li> <li>Remove duplicatas por ID</li> <li>Formata campos espec\u00edficos</li> <li> <p>Prepara dados para relat\u00f3rio</p> </li> <li> <p>Sele\u00e7\u00e3o de Template</p> </li> <li>Escolhe template conforme ordena\u00e7\u00e3o</li> <li>Define sint\u00e9tico ou anal\u00edtico</li> <li>Gera PDF ou XLSX</li> </ol>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#classificacao-de-documentos","title":"Classifica\u00e7\u00e3o de Documentos","text":"<ul> <li>Classe 0/2: Apenas documentos em aberto</li> <li>Classe 1/3: Apenas documentos quitados</li> <li>Classe 4/5: Todos os documentos</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>Dias: Diferen\u00e7a entre data atual/pagamento e vencimento</li> <li>JM: Soma de juros e multas (calculados ou quitados)</li> <li>Desconto: Valor absoluto (sempre positivo)</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#filtros-de-data","title":"Filtros de Data","text":"<ul> <li>Vencimento: Data nominal ou real conforme par\u00e2metro</li> <li>Emiss\u00e3o: Data do documento</li> <li>Pagamento/Recebimento: Conforme tipoData</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Template Descri\u00e7\u00e3o Ordem Formato SCF_Documentos Layout padr\u00e3o 0,1,3 PDF/XLSX SCF_DocumentosEntidade Por entidade 2 PDF/XLSX SCF_DocumentosPortador Por portador 4 PDF/XLSX SCF_DocumentosRepresentante Por representante 5 PDF/XLSX SCF_DocumentosSintetico2 Sint\u00e9tico 0 PDF/XLSX"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - M\u00faltiplos templates Jasper para diferentes ordena\u00e7\u00f5es - Par\u00e2metros JSON para campos financeiros</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>SQL extremamente din\u00e2mico com m\u00faltiplos filtros opcionais</li> <li>Processamento complexo de campos JSON para c\u00e1lculos</li> <li>Remo\u00e7\u00e3o de duplicatas baseada em ID do documento</li> <li>Flexibilidade total de ordena\u00e7\u00e3o e agrupamento</li> <li>Suporte a diferentes tipos de vencimento (real/nominal)</li> <li>C\u00e1lculo autom\u00e1tico de dias em atraso e encargos</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/","title":"SCV_FaturamentoDiarioDetalhado.md","text":""},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o de relat\u00f3rio de faturamento di\u00e1rio detalhado para a Linhasita, com consolida\u00e7\u00e3o de dados por filial e tipo de opera\u00e7\u00e3o.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer uma vis\u00e3o detalhada do faturamento di\u00e1rio da empresa, permitindo o acompanhamento do processo de faturamento por filiais e tipos de opera\u00e7\u00e3o comercial.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Faturamento</li> <li>Controladoria</li> <li>Gest\u00e3o Comercial</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SCV_FaturamentoDiarioDetalhado</code> - Layout do relat\u00f3rio</p> <p>Localiza\u00e7\u00e3o: <code>linhasita/relatorios/scv/</code></p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>AAC10</code> - Empresas/Filiais - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABB10</code> - Opera\u00e7\u00f5es comerciais - <code>ABA20</code> - Reposit\u00f3rio de dados (dias n\u00e3o \u00fateis)</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Aac10</code> - Empresas do grupo - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Abb10</code> - Opera\u00e7\u00f5es comerciais</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis periodo String Sim Per\u00edodo de an\u00e1lise (MM/aaaa) M\u00eas/ano atual"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo dtMes Data do m\u00eas LocalDate flagDiaUtil Indicador de dia \u00fatil Integer vlr_Exp Valor exporta\u00e7\u00e3o BigDecimal kg_Exp Peso exporta\u00e7\u00e3o BigDecimal vlr_Ref Valor refugo/sucata BigDecimal kg_Ref Peso refugo/sucata BigDecimal vlr_Ind Valor industrializa\u00e7\u00e3o BigDecimal kg_Ind Peso industrializa\u00e7\u00e3o BigDecimal vlr_Fat Valor faturamento normal BigDecimal kg_Fat Peso faturamento normal BigDecimal vlr_Birigui Valor Birigui BigDecimal kg_Birigui Peso Birigui BigDecimal vlr_Franca Valor Franca BigDecimal kg_Franca Peso Franca BigDecimal vlr_Hamburgo Valor Hamburgo BigDecimal kg_Hamburgo Peso Hamburgo BigDecimal vlr_Serrana Valor Serrana BigDecimal kg_Serrana Peso Serrana BigDecimal vlr_Total Valor total matriz BigDecimal kg_Total Peso total matriz BigDecimal"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Processa per\u00edodo informado (MM/aaaa)</li> <li> <p>Define primeiro e \u00faltimo dia do m\u00eas</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta documentos fiscais do per\u00edodo</li> <li>Obt\u00e9m devolu\u00e7\u00f5es do m\u00eas</li> <li> <p>Busca dias n\u00e3o \u00fateis do reposit\u00f3rio</p> </li> <li> <p>Processamento de Dias</p> </li> <li>Cria lista com todos os dias do m\u00eas</li> <li>Classifica dias (\u00fatil, s\u00e1bado, domingo, n\u00e3o \u00fatil)</li> <li> <p>Consolida valores por tipo de opera\u00e7\u00e3o e filial</p> </li> <li> <p>C\u00e1lculo de Totais</p> </li> <li>Soma valores e pesos por categoria</li> <li>Calcula totais gerais por filial</li> <li> <p>Registra devolu\u00e7\u00f5es do per\u00edodo</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Gera PDF com dados consolidados</li> <li>Apresenta totais por filial e matriz</li> </ol>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Considera apenas documentos fiscais ativos (<code>eaa01cancData IS NULL</code>)</li> <li>Apenas documentos com status NFe = 3 (autorizada)</li> <li>Filtra por tipos de documento espec\u00edficos (NF-e pr\u00f3pria)</li> <li>Considera apenas opera\u00e7\u00f5es com <code>resumo_venda = 1</code></li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#classificacao-de-operacoes","title":"Classifica\u00e7\u00e3o de Opera\u00e7\u00f5es","text":"<ul> <li>EXPORTACAO: Ids 331927255, 285603711</li> <li>SUCATA: Ids 331931980, 331931983</li> <li>INDUSTRIALIZACAO: Ids 285367776</li> <li>NORMAL: Demais opera\u00e7\u00f5es</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#classificacao-de-dias","title":"Classifica\u00e7\u00e3o de Dias","text":"<ul> <li>Flag 1: Dias n\u00e3o \u00fateis (reposit\u00f3rio)</li> <li>Flag 2: S\u00e1bados</li> <li>Flag 3: Domingos</li> <li>Flag null: Dias \u00fateis normais</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#filiais-incluidas","title":"Filiais Inclu\u00eddas","text":"<ul> <li>LINHASITA MATRIZ</li> <li>LINHASITA BIRIGUI</li> <li>LINHASITA FRANCA</li> <li>LINHASITA HAMBURGO</li> <li>LINHASITA SERRANA</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado <code>gerarPDF()</code>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>Servi\u00e7os: - Acesso ao banco de dados</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Implementa consulta otimizada para grandes volumes de dados</li> <li>Suporte a m\u00faltiplas filiais do grupo Linhasita</li> <li>Classifica\u00e7\u00e3o autom\u00e1tica de dias \u00fateis e n\u00e3o \u00fateis</li> <li>Consolida\u00e7\u00e3o por tipo de opera\u00e7\u00e3o comercial</li> <li>C\u00e1lculo de totais parciais e gerais</li> <li>Integra\u00e7\u00e3o com reposit\u00f3rio de dias n\u00e3o \u00fateis</li> <li>Formata\u00e7\u00e3o espec\u00edfica para relat\u00f3rio financeiro</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/","title":"SCV Pedido de Compra","text":""},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de pedidos de compra da Linhasita com funcionalidade de emiss\u00e3o e envio autom\u00e1tico por e-mail para fornecedores.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar e distribuir pedidos de compra para fornecedores, automatizando o processo de solicita\u00e7\u00e3o de compras com envio de documenta\u00e7\u00e3o por e-mail.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento de Compras</li> <li>Fornecedores</li> <li>Gestores de Suprimentos</li> <li>Controle Patrimonial</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Arquivo <code>Logo2.png</code> - Logo secund\u00e1ria - Arquivo <code>Logo3.png</code> - Logo terci\u00e1ria - Arquivo <code>NaoAutorizado.png</code> - Imagem para status n\u00e3o autorizado</p> <p>Localiza\u00e7\u00e3o: <code>samdev/resources/linhasita/relatorios/scv/</code></p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos de compra - <code>ABB01</code> - Cabe\u00e7alho pedidos - <code>ABE01</code> - Entidades/Fornecedores - <code>EAA0101</code> - Endere\u00e7os de entrega - <code>EAA0102</code> - Dados de contato - <code>EAA0103</code> - Itens do pedido - <code>ABE0104</code> - E-mails de fornecedores</p> <p>Entidades Envolvidas: - <code>Abe0104</code> - E-mails de entidades - <code>Aab1008</code> - Configura\u00e7\u00e3o de e-mail do usu\u00e1rio - <code>Aab10</code> - Usu\u00e1rio logado - <code>Aac10</code> - Empresa ativa</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis numeroInicial Integer N\u00e3o N\u00famero inicial do pedido \u2265 0 numeroFinal Integer N\u00e3o N\u00famero final do pedido \u2265 0 emissao LocalDate[] Sim Per\u00edodo de emiss\u00e3o Data inicial e final entidades List N\u00e3o Fornecedores espec\u00edficos IDs das entidades aprovado Boolean Sim Filtro por status true=aprovados, false=todos enviaEmail Boolean Sim Envio autom\u00e1tico true=enviar, false=apenas gerar"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo abb01num N\u00famero do pedido Integer abb01data Data de emiss\u00e3o Date abb01aprovado Status de aprova\u00e7\u00e3o Boolean eaa0102codigo C\u00f3digo do fornecedor String eaa0102nome Nome do fornecedor String eaa0102ni CNPJ/CPF String eaa0101endereco Endere\u00e7o de entrega String abm01codigo C\u00f3digo do item String eaa0103descr Descri\u00e7\u00e3o do item String eaa0103qtComl Quantidade BigDecimal eaa0103unit Valor unit\u00e1rio BigDecimal eaa0103total Valor total BigDecimal ipi_aliq Al\u00edquota IPI BigDecimal icm_aliq Al\u00edquota ICMS BigDecimal"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica n\u00fameros de pedido (inicial/final)</li> <li>Valida per\u00edodo de emiss\u00e3o</li> <li> <p>Processa lista de fornecedores</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta pedidos com filtros aplicados</li> <li>Busca informa\u00e7\u00f5es completas (itens, endere\u00e7os, contatos)</li> <li> <p>Aplica filtro de aprova\u00e7\u00e3o quando solicitado</p> </li> <li> <p>Processamento de Sa\u00edda</p> </li> <li>Carrega recursos visuais (logos)</li> <li>Gera PDF do pedido de compra</li> <li> <p>Se solicitado, envia e-mail para fornecedores</p> </li> <li> <p>Envio por E-mail (opcional)</p> </li> <li>Busca e-mails cadastrados do fornecedor</li> <li>Valida configura\u00e7\u00e3o de e-mail do usu\u00e1rio</li> <li>Anexa PDF e envia com corpo padronizado</li> </ol>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Usu\u00e1rio deve ter e-mail configurado para envio</li> <li>Fornecedor deve ter e-mail cadastrado (classifica\u00e7\u00e3o 9002)</li> <li>Per\u00edodo de emiss\u00e3o obrigat\u00f3rio</li> <li>Filtro de aprova\u00e7\u00e3o aplicado por padr\u00e3o</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#processamento","title":"Processamento","text":"<ul> <li>Considera apenas documentos de classe 0 (compras)</li> <li>Endere\u00e7o principal de entrega</li> <li>Itens ordenados por sequ\u00eancia</li> <li>Calcula totais e impostos via campos JSON</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#e-mail","title":"E-mail","text":"<ul> <li>Assunto padronizado com n\u00famero do pedido</li> <li>Corpo em HTML com formata\u00e7\u00e3o</li> <li>Anexo PDF com nome identificador</li> <li>Inclui assinatura digital se configurada</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Pedido de compra formatado <code>gerarPDF()</code> E-mail Envio autom\u00e1tico para fornecedores <code>enviarEmail()</code>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>javax.mail</code> - Envio de e-mails - <code>multitec.utils</code> - Utilit\u00e1rios e e-mail</p> <p>Servi\u00e7os: - <code>CAS1010Service</code> - Processamento de assinaturas de e-mail</p> <p>Configura\u00e7\u00f5es: - E-mail do usu\u00e1rio logado (<code>Aab1008</code>) - E-mails de fornecedores (classifica\u00e7\u00e3o 9002)</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza consulta SQL nativa para performance com m\u00faltiplos joins</li> <li>Processa campos de impostos diretamente do JSON da tabela</li> <li>Suporte a m\u00faltiplos anexos de e-mail</li> <li>Valida\u00e7\u00e3o de recursos de imagem em tempo de execu\u00e7\u00e3o</li> <li>Normaliza\u00e7\u00e3o de texto para remover acentos no corpo do e-mail</li> </ul>"},{"location":"LINHASITA/script/SRF%20-%201002/","title":"SRF   1002","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#funcionalidades-implementadas","title":"\u2699\ufe0f Funcionalidades Implementadas","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#1-gestao-de-campos-personalizados","title":"1. Gest\u00e3o de Campos Personalizados","text":"Funcionalidade Descri\u00e7\u00e3o M\u00e9todo Ocultar Zerados Esconde campos num\u00e9ricos com valor zero <code>ocultarZerados()</code> Mostrar Todos Exibe todos os campos ocultos <code>mostrarTodos()</code>"},{"location":"LINHASITA/script/SRF%20-%201002/#2-operacoes-fiscais","title":"2. Opera\u00e7\u00f5es Fiscais","text":"Funcionalidade Descri\u00e7\u00e3o M\u00e9todo C\u00e1lculo Fiscal Agrupa dados fiscais por CFOP <code>calcularAbaFiscal()</code> Spread Fiscal Exibe resumo fiscal consolidado <code>criarSpreadETab()</code>"},{"location":"LINHASITA/script/SRF%20-%201002/#3-danfe-documento-auxiliar","title":"3. DANFE - Documento Auxiliar","text":"Funcionalidade Descri\u00e7\u00e3o M\u00e9todo Visualiza\u00e7\u00e3o Abre DANFE no navegador <code>abrirBrowser()</code> Impress\u00e3o Imprime DANFE em impressora selecionada <code>selectionBtnImprimirDanfePressed()</code>"},{"location":"LINHASITA/script/SRF%20-%201002/#estrutura-da-tela","title":"\ud83d\udccb Estrutura da Tela","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#componentes-criados","title":"Componentes Criados","text":"Componente Posi\u00e7\u00e3o Dimens\u00f5es Fun\u00e7\u00e3o btnOcultarCampos (550,635) 175x36 Oculta campos zerados btnMostrarCampos (750,635) 175x36 Mostra todos campos btnImprimirDanfe (950,635) 175x36 Imprime DANFE btnAbrirDanfe (1150,635) 175x36 Abre DANFE no browser Aba Fiscal Tab 7 - Dados fiscais consolidados"},{"location":"LINHASITA/script/SRF%20-%201002/#colunas-do-spread-fiscal","title":"Colunas do Spread Fiscal","text":"Campo Tipo Tamanho Descri\u00e7\u00e3o CFOP String 4 chars C\u00f3digo Fiscal de Opera\u00e7\u00f5es Total Doc BigDecimal 15 chars Valor total do documento BC ICMS BigDecimal 15 chars Base de c\u00e1lculo ICMS % ICMS BigDecimal 15 chars Al\u00edquota do ICMS ICMS BigDecimal 15 chars Valor do ICMS ICMS Outras BigDecimal 15 chars ICMS outras opera\u00e7\u00f5es ICMS Isento BigDecimal 15 chars ICMS isento"},{"location":"LINHASITA/script/SRF%20-%201002/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#1-inicializacao-da-tela","title":"1. Inicializa\u00e7\u00e3o da Tela","text":"<ul> <li>Ajusta dimens\u00f5es da janela</li> <li>Cria bot\u00f5es de controle</li> <li>Configura componentes fiscais</li> <li>Organiza layout</li> </ul>"},{"location":"LINHASITA/script/SRF%20-%201002/#2-processamento-fiscal","title":"2. Processamento Fiscal","text":"<ul> <li>Captura dados dos itens do pedido (EAA0103)</li> <li>Agrupa informa\u00e7\u00f5es por CFOP</li> <li>Calcula totais e impostos</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Mitra)","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Mitra, com foco em faturamento, cobran\u00e7a, cancelamentos e cartas de corre\u00e7\u00e3o.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) de acordo com o tipo de opera\u00e7\u00e3o, adaptado para as necessidades espec\u00edficas do m\u00f3dulo Mitra.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE (boleto opcional)</li> <li>Cobran\u00e7a: Apenas boleto</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Faturamento: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a)</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-desabilitadas","title":"Funcionalidades Desabilitadas","text":"<ul> <li>Representantes: C\u00f3digo comentado - n\u00e3o envia e-mails para representantes</li> <li>Transportadora: C\u00f3digo comentado - n\u00e3o envia e-mails para transportadora</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Envia boleto junto com faturamento se mesmo e-mail</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema</p> <p>M\u00f3dulo: Mitra</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#formatacao-html","title":"Formata\u00e7\u00e3o HTML","text":"<ul> <li>Corpo dos e-mails em HTML com tags b\u00e1sicas</li> <li>Links para portal da NF-e e site da Multitec</li> <li>Dados do cliente, CNPJ e chave de acesso</li> <li>Protocolo de autoriza\u00e7\u00e3o da SEFAZ</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#controle-de-anexos","title":"Controle de Anexos","text":"<ul> <li>XML sempre enviado para cliente</li> <li>DANFE apenas para faturamento</li> <li>Boleto apenas para cobran\u00e7a (separado ou junto)</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-comentadas","title":"Funcionalidades Comentadas","text":"<ul> <li>M\u00e9todos <code>obterEmailsRepresentantes()</code> e <code>obterEmailTransportadoraDespacho()</code> dispon\u00edveis mas n\u00e3o utilizados</li> <li>Blocos de c\u00f3digo para representantes e transportadora comentados</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:45 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Mitra) Vers\u00e3o: 1.0</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/","title":"SCE_ImportarItensLctosXlsx.md","text":""},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de importa\u00e7\u00e3o de itens para lan\u00e7amentos do SCE via arquivo Excel (XLSX) para a Linhasita, permitindo carga em lote de itens com suas quantidades e valores.</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de importa\u00e7\u00e3o de itens para lan\u00e7amentos cont\u00e1beis atrav\u00e9s de arquivos Excel, validando e processando os dados antes da inser\u00e7\u00e3o no sistema.</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Almoxarifado/Estoque</li> <li>Financeiro</li> <li>Controladoria</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SCE_ImportarItensLctosXlsx</code> - Processamento de importa\u00e7\u00e3o Excel</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/sce/</code></p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABM01</code> - Cadastro de itens - <code>ABE4001</code> - Pre\u00e7os de itens - <code>ABA20</code> - Reposit\u00f3rio de dados (avisos)</p> <p>Entidades Envolvidas: - <code>Abm01</code> - Itens - <code>Abe4001</code> - Pre\u00e7os - <code>ItemSCEDto</code> - DTO para transfer\u00eancia de itens</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o arquivo MultipartFile Sim Arquivo Excel com dados dos itens"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#estrutura-do-arquivo-excel","title":"\ud83d\udccb Estrutura do Arquivo Excel","text":"Coluna Descri\u00e7\u00e3o Tipo Obrigat\u00f3rio 0 Tipo do item Integer Sim 1 C\u00f3digo do item String Sim 4 Quantidade BigDecimal N\u00e3o"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Recebe arquivo Excel multipart</li> <li> <p>Abre a primeira planilha do workbook</p> </li> <li> <p>Processamento Linha a Linha</p> </li> <li>Ignora cabe\u00e7alho (linha 0)</li> <li>Processa a partir da linha 1</li> <li> <p>Valida c\u00e9lulas obrigat\u00f3rias</p> </li> <li> <p>Busca e Valida\u00e7\u00e3o de Itens</p> </li> <li>Localiza item por tipo e c\u00f3digo</li> <li>Verifica exist\u00eancia no cadastro</li> <li> <p>Confirma configura\u00e7\u00e3o de estoque</p> </li> <li> <p>Obten\u00e7\u00e3o de Valores</p> </li> <li>Recupera quantidade da planilha</li> <li>Busca pre\u00e7o unit\u00e1rio do item</li> <li> <p>Prepara DTO para transfer\u00eancia</p> </li> <li> <p>Tratamento de Erros</p> </li> <li>Coleta mensagens de erro</li> <li>Registra itens n\u00e3o encontrados</li> <li>Mant\u00e9m processamento mesmo com falhas</li> </ol>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Item deve existir no cadastro (ABM01)</li> <li>Item deve ter configura\u00e7\u00e3o de estoque</li> <li>C\u00e9lulas de tipo e c\u00f3digo s\u00e3o obrigat\u00f3rias</li> <li>Quantidade opcional (default 0)</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#processamento","title":"Processamento","text":"<ul> <li>Apenas primeira planilha \u00e9 processada</li> <li>Linha vazia na coluna 0 encerra processamento</li> <li>Continua processamento mesmo com erros parciais</li> <li>Coleta todas as mensagens de erro</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#dados-obtidos","title":"Dados Obtidos","text":"<ul> <li>Quantidade: Da planilha Excel</li> <li>Valor Unit\u00e1rio: Do cadastro de pre\u00e7os (ABE4001)</li> <li>Lote/S\u00e9rie: Sempre nulos para importa\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo itensLctos Lista de itens processados List"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>Apache POI</code> - Manipula\u00e7\u00e3o de arquivos Excel - <code>multiorm</code> - Persist\u00eancia e consultas - <code>spring-web</code> - Upload de arquivos multipart</p> <p>Estruturas de Dados: - <code>ItemSCEDto</code> - Transporte de dados dos itens - <code>TableMap</code> - Armazenamento de dados JSON</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a arquivos XLSX (Excel moderno)</li> <li>Processamento ass\u00edncrono e tolerante a falhas</li> <li>Valida\u00e7\u00e3o em tempo real durante importa\u00e7\u00e3o</li> <li>Mensagens de erro detalhadas por item</li> <li>Integra\u00e7\u00e3o com DTO padr\u00e3o do SCE</li> <li>Busca otimizada de itens com joins</li> <li>Tratamento de transa\u00e7\u00f5es para persist\u00eancia</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/","title":"SCV_Pre_Gravacao.md","text":""},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de valida\u00e7\u00e3o pr\u00e9-grava\u00e7\u00e3o para documentos do SCV (Sistema de Controle de Vendas) da Linhasita, realizando verifica\u00e7\u00f5es de cr\u00e9dito e consist\u00eancia antes da persist\u00eancia dos dados.</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Garantir a integridade e conformidade dos documentos de venda atrav\u00e9s de valida\u00e7\u00f5es financeiras e comerciais antes da grava\u00e7\u00e3o definitiva no sistema.</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> <li>Faturamento</li> <li>Controladoria</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SCV_Pre_Gravacao</code> - Valida\u00e7\u00e3o pr\u00e9-grava\u00e7\u00e3o</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/scv/</code></p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>ABE30</code> - Condi\u00e7\u00f5es de pagamento - <code>ABE01</code> - Entidades/Clientes - <code>DAA01</code> - T\u00edtulos a receber - <code>EAA0107</code> - Mensagens de inconsist\u00eancia</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Abe30</code> - Condi\u00e7\u00f5es de pagamento - <code>Abe01</code> - Entidades - <code>Daa01</code> - T\u00edtulos - <code>Eaa0107</code> - Inconsist\u00eancias</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01 Eaa01 Sim Documento a ser validado"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo gravar Indicador de grava\u00e7\u00e3o (0-N\u00e3o, 1-Sim) Integer eaa01 Documento com inconsist\u00eancias registradas Eaa01"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Obt\u00e9m documento fiscal (EAA01)</li> <li>Verifica exist\u00eancia de condi\u00e7\u00e3o de pagamento</li> <li> <p>Inicializa flags de controle</p> </li> <li> <p>Processamento por Tipo de Opera\u00e7\u00e3o</p> </li> <li>Aplica valida\u00e7\u00f5es apenas para opera\u00e7\u00e3o \"201\" (Venda)</li> <li> <p>Executa verifica\u00e7\u00f5es financeiras espec\u00edficas</p> </li> <li> <p>Valida\u00e7\u00f5es de Inconsist\u00eancia</p> </li> <li>T\u00edtulos a receber vencidos</li> <li>Limite de cr\u00e9dito excedido</li> <li> <p>Restri\u00e7\u00f5es financeiras da entidade</p> </li> <li> <p>Defini\u00e7\u00e3o de Bloqueio</p> </li> <li>Define se documento ser\u00e1 bloqueado</li> <li>Registra mensagens de inconsist\u00eancia</li> <li>Remove pol\u00edtica de uso do documento</li> </ol>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#validacoes-obrigatorias","title":"Valida\u00e7\u00f5es Obrigat\u00f3rias","text":"<ul> <li>Condi\u00e7\u00e3o de pagamento \u00e9 obrigat\u00f3ria</li> <li>Apenas opera\u00e7\u00e3o \"201\" (Venda) sofre valida\u00e7\u00f5es financeiras</li> <li>Documento deve ter classifica\u00e7\u00e3o de documento ativa</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#verificacoes-financeiras","title":"Verifica\u00e7\u00f5es Financeiras","text":"<p>T\u00edtulos Vencidos: - Soma valores de t\u00edtulos com vencimento anterior \u00e0 data atual - Bloqueia documento se existirem t\u00edtulos vencidos</p> <p>Limite de Cr\u00e9dito: - Calcula total financeiro em aberto - Soma t\u00edtulos a receber n\u00e3o quitados - Considera valor do documento atual (se novo) - Bloqueia se exceder limite cadastrado</p> <p>Restri\u00e7\u00f5es: - Verifica flag de restri\u00e7\u00e3o financeira no cadastro da entidade - Bloqueia documento se entidade possui restri\u00e7\u00e3o</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#comportamento-do-sistema","title":"Comportamento do Sistema","text":"<ul> <li>Documento \u00e9 bloqueado (<code>eaa01bloqueado = 1</code>) se houver inconsist\u00eancias</li> <li>Mensagens detalhadas s\u00e3o registradas em <code>EAA0107</code></li> <li>Pol\u00edtica de uso \u00e9 removida do documento</li> <li>Processamento continua mesmo com inconsist\u00eancias</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#inconsistencias-registradas","title":"\ud83c\udfa8 Inconsist\u00eancias Registradas","text":"Tipo Mensagem Identificador T\u00edtulos Vencidos \"T\u00edtulo a receber vencido: [valor]\" BLOQUEIO Limite Excedido \"Limite de cr\u00e9dito excedido...\" BLOQUEIO Sem Limite \"A entidade n\u00e3o possui limite de cr\u00e9dito\" BLOQUEIO Restri\u00e7\u00e3o \"A entidade possui restri\u00e7\u00e3o financeira\" BLOQUEIO"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>multitec.utils</code> - Utilit\u00e1rios e cole\u00e7\u00f5es</p> <p>Consultas: - Soma de t\u00edtulos vencidos por entidade - Total financeiro de documentos em aberto - Total de t\u00edtulos a receber n\u00e3o quitados</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Valida\u00e7\u00f5es aplicadas apenas para novos documentos/vendas</li> <li>Sistema tolerante a falhas (continua processamento)</li> <li>Mensagens de erro detalhadas e espec\u00edficas</li> <li>Integra\u00e7\u00e3o com sistema de bloqueio de documentos</li> <li>Remo\u00e7\u00e3o autom\u00e1tica de pol\u00edtica de uso</li> <li>Consultas otimizadas com joins</li> <li>Suporte a campos JSON para configura\u00e7\u00f5es flex\u00edveis</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/","title":"SRF_CalculoItemEntradaImportacaoDrawback.md","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de c\u00e1lculo de itens de entrada por importa\u00e7\u00e3o e drawback para a Linhasita, respons\u00e1vel pelo processamento de valores fiscais e tribut\u00e1rios em documentos de importa\u00e7\u00e3o.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Realizar o c\u00e1lculo completo de valores fiscais, tribut\u00e1rios e comerciais para itens de entrada via importa\u00e7\u00e3o e drawback, garantindo a correta apura\u00e7\u00e3o de impostos e custos.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Compras/Importa\u00e7\u00e3o</li> <li>Contabilidade</li> <li>Controladoria</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_CalculoItemEntradaImportacaoDrawback</code> - C\u00e1lculo de itens de importa\u00e7\u00e3o</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades/Clientes - <code>ABM01</code> - Itens/Cadastro de produtos - <code>ABM0101</code> - Configura\u00e7\u00f5es de itens por empresa - <code>AAC10</code> - Empresas/Filiais</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens de documentos - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Abe01</code> - Entidades - <code>Abm01</code> - Itens - <code>Aac10</code> - Empresas</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa0103 Eaa0103 Sim Item do documento a ser calculado"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#campos-calculados","title":"\ud83d\udccb Campos Calculados","text":"Campo Descri\u00e7\u00e3o Tipo vlrfcientrada Valor fiscal da entrada BigDecimal ii_aliq Al\u00edquota do Imposto de Importa\u00e7\u00e3o BigDecimal vlr_vlme Valor do volume BigDecimal vlr_pl Peso l\u00edquido BigDecimal vlr_pb Peso bruto BigDecimal vlr_desc Valor do desconto BigDecimal ipi_aliq Al\u00edquota do IPI BigDecimal ipi_ipi Valor do IPI BigDecimal ipi_bc Base de c\u00e1lculo do IPI BigDecimal vlr_outras Valor de outras despesas BigDecimal icm_isento Valor ICMS isento BigDecimal custo_aquisicao Custo de aquisi\u00e7\u00e3o BigDecimal cif_imp Valor CIF da importa\u00e7\u00e3o BigDecimal"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Obt\u00e9m item do documento (EAA0103)</li> <li> <p>Valida exist\u00eancia do documento e entidade</p> </li> <li> <p>Carregamento de Dados</p> </li> <li>Documento fiscal (EAA01)</li> <li>Central de documento (ABB01)</li> <li>Entidade/cliente (ABE01)</li> <li>Empresa (AAC10)</li> <li> <p>Configura\u00e7\u00f5es do item (ABM0101)</p> </li> <li> <p>C\u00e1lculos Fiscais</p> </li> <li>Valor total do item</li> <li>Imposto de Importa\u00e7\u00e3o (II)</li> <li>IPI (Imposto sobre Produtos Industrializados)</li> <li>ICMS (Imposto sobre Circula\u00e7\u00e3o de Mercadorias)</li> <li> <p>PIS/COFINS</p> </li> <li> <p>C\u00e1lculos Comerciais</p> </li> <li>Convers\u00e3o de quantidades</li> <li>C\u00e1lculo de pesos (bruto e l\u00edquido)</li> <li>Aplica\u00e7\u00e3o de descontos</li> <li> <p>Custo de aquisi\u00e7\u00e3o</p> </li> <li> <p>Consolida\u00e7\u00e3o de Valores</p> </li> <li>Total do documento</li> <li>Valor financeiro</li> <li>Custo final da importa\u00e7\u00e3o</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Item deve ter quantidade comercial maior que zero</li> <li>Configura\u00e7\u00e3o fiscal do item \u00e9 obrigat\u00f3ria</li> <li>Endere\u00e7o principal da entidade deve existir no documento</li> <li>Empresa deve estar ativa e com munic\u00edpio cadastrado</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#calculos-especificos","title":"C\u00e1lculos Espec\u00edficos","text":"<ul> <li>Imposto de Importa\u00e7\u00e3o: Aplicado sobre al\u00edquota espec\u00edfica do item</li> <li>IPI: Calculado sobre base de c\u00e1lculo com al\u00edquota do NCM</li> <li>ICMS: C\u00e1lculo considerando regime de tributa\u00e7\u00e3o</li> <li>PIS/COFINS: Tratamento diferenciado para opera\u00e7\u00f5es com exterior</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#conversoes","title":"Convers\u00f5es","text":"<ul> <li>Quantidade comercial convertida para quantidade de uso</li> <li>Quantidade convertida para volume quando aplic\u00e1vel</li> <li>C\u00e1lculo de pesos baseado no cadastro do item</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Local Campos JSON Valores calculados no JSON do item eaa0103.eaa0103json Totais Valores totais do documento eaa0103.eaa0103totDoc Valores Fiscais Bases de c\u00e1lculo e impostos Campos espec\u00edficos"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>multitec.utils</code> - Utilit\u00e1rios e valida\u00e7\u00f5es - <code>java.math</code> - C\u00e1lculos com BigDecimal</p> <p>Servi\u00e7os: - Acesso ao banco de dados - Gest\u00e3o de sess\u00f5es</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Implementa c\u00e1lculos complexos de tributa\u00e7\u00e3o de importa\u00e7\u00e3o</li> <li>Suporte a m\u00faltiplas unidades de medida e convers\u00f5es</li> <li>Integra\u00e7\u00e3o com cadastro fiscal de itens</li> <li>Tratamento de JSON para campos customizados</li> <li>C\u00e1lculos precisos com arredondamento decimal</li> <li>Valida\u00e7\u00f5es robustas para evitar erros de c\u00e1lculo</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/","title":"SGC_BalancoPatrimonialDRE.md","text":""},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o de relat\u00f3rios cont\u00e1beis para a Linhasita, incluindo Balan\u00e7o Patrimonial, Demonstra\u00e7\u00e3o do Resultado do Exerc\u00edcio (DRE) e Notas Explicativas.</p>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rios cont\u00e1beis completos e padronizados para atendimento \u00e0s obriga\u00e7\u00f5es legais e an\u00e1lise gerencial da situa\u00e7\u00e3o patrimonial e de resultados da empresa.</p>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Controladoria</li> <li>Diretoria Financeira</li> <li>Auditores externos</li> <li>Conselho de Administra\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGC_BalancoPatrimonialDRE</code> - Layout dos relat\u00f3rios - Par\u00e2metros cont\u00e1beis configurados</p> <p>Localiza\u00e7\u00e3o: <code>linhasita/relatorios/sgc/</code></p>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABC10</code> - Plano de contas - <code>EBB02</code> - Saldos cont\u00e1beis - <code>EBA10</code> - Agrupamentos de contas - <code>EBA30</code> - Notas explicativas - <code>EBA40</code> - Livros cont\u00e1beis - <code>AAC10</code> - Empresas/Filiais</p> <p>Entidades Envolvidas: - <code>Abc10</code> - Contas cont\u00e1beis - <code>Ebb02</code> - Saldos mensais - <code>Eba10</code> - Agrupamentos - <code>Eba30</code> - Notas - <code>Aac10</code> - Empresas</p>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis emitir Integer Sim Tipo de relat\u00f3rio 0-BP, 1-DRE, 2-DRE Mensal, 3-Notas data1 String Sim Data de refer\u00eancia 1 MM/aaaa data2 String N\u00e3o Data de refer\u00eancia 2 MM/aaaa data3 String N\u00e3o Data de refer\u00eancia 3 MM/aaaa anexarBalanceteAoDiario Boolean N\u00e3o Vincular ao livro di\u00e1rio true/false"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#tipos-de-relatorio","title":"\ud83d\udccb Tipos de Relat\u00f3rio","text":""},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#balanco-patrimonial-0","title":"Balan\u00e7o Patrimonial (0)","text":"<ul> <li>Ativo e Passivo circulante/n\u00e3o circulante</li> <li>Patrim\u00f4nio l\u00edquido</li> <li>Comparativo entre per\u00edodos (at\u00e9 3 datas)</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#dre-demonstracao-do-resultado-1","title":"DRE - Demonstra\u00e7\u00e3o do Resultado (1)","text":"<ul> <li>Receitas operacionais</li> <li>Custos e despesas</li> <li>Resultado l\u00edquido do exerc\u00edcio</li> <li>Agrupamentos espec\u00edficos por conta</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#dre-mensal-2","title":"DRE Mensal (2)","text":"<ul> <li>Vers\u00e3o mensal da DRE</li> <li>Foco em resultados do m\u00eas</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#notas-explicativas-3","title":"Notas Explicativas (3)","text":"<ul> <li>Informa\u00e7\u00f5es complementares</li> <li>Esclarecimentos sobre demonstra\u00e7\u00f5es</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica datas de refer\u00eancia</li> <li>Valida consist\u00eancia entre per\u00edodos</li> <li> <p>Confirma configura\u00e7\u00f5es cont\u00e1beis</p> </li> <li> <p>Configura\u00e7\u00e3o do Ambiente</p> </li> <li>Carrega dados da empresa</li> <li>Obt\u00e9m estrutura do plano de contas</li> <li> <p>Configura assinaturas e termos</p> </li> <li> <p>Processamento de Dados</p> </li> <li>Busca saldos cont\u00e1beis por per\u00edodo</li> <li>Aplica regras de classifica\u00e7\u00e3o</li> <li> <p>Calcula totais e subtotais</p> </li> <li> <p>Formata\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Composi\u00e7\u00e3o hier\u00e1rquica das contas</li> <li>Aplica\u00e7\u00e3o de sinais (d\u00e9bito/cr\u00e9dito)</li> <li> <p>Formata\u00e7\u00e3o de valores e textos</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>PDF com relat\u00f3rio formatado</li> <li>Numera\u00e7\u00e3o de p\u00e1ginas</li> <li>Assinaturas e termos</li> </ol>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Estrutura de plano de contas com 6 graus</li> <li>Grau da empresa deve ser o 5\u00ba</li> <li>Datas de refer\u00eancia n\u00e3o podem ser iguais</li> <li>Saldos devem estar atualizados</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#classificacao-de-contas","title":"Classifica\u00e7\u00e3o de Contas","text":"<ul> <li>Ativo: Contas classe 1</li> <li>Passivo: Contas classe 2  </li> <li>Resultado: Contas classe 3</li> <li>Sinais invertidos para passivo e resultado</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#agrupamentos-especificos","title":"Agrupamentos Espec\u00edficos","text":"<ul> <li>Contas 31, 32, 33, 36 possuem agrupamentos customizados</li> <li>Mapeamento para c\u00f3digos espec\u00edficos (990101xx)</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#termos-e-assinaturas","title":"Termos e Assinaturas","text":"<ul> <li>Termos em extenso para valores</li> <li>Assinaturas do respons\u00e1vel e contador</li> <li>Qualifica\u00e7\u00f5es profissionais</li> </ul>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio cont\u00e1bil completo <code>gerarPDF()</code>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>Par\u00e2metros do Sistema: - <code>GRAUEMPRESA</code> - Grau da empresa no plano - <code>ESTRCODCONTA</code> - Estrutura do c\u00f3digo de conta - <code>EB_ATUALIZARCTAS</code> - Indicador de atualiza\u00e7\u00e3o</p>"},{"location":"STREMA/relatorio/sgc/SGC_BalancoPatrimonialDRE/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos per\u00edodos comparativos</li> <li>Hierarquia autom\u00e1tica baseada em graus</li> <li>Tratamento espec\u00edfico para DRE mensal</li> <li>Integra\u00e7\u00e3o com livro di\u00e1rio</li> <li>Formata\u00e7\u00e3o profissional para relat\u00f3rios cont\u00e1beis</li> <li>Valida\u00e7\u00f5es robustas de consist\u00eancia</li> <li>Suporte a notas explicativas periodizadas</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/","title":"SRF_Danfe.md","text":""},{"location":"STREMA/relatorio/srf/SRF_Danfe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Documento Auxiliar da Nota Fiscal Eletr\u00f4nica (DANFE) para a Linhasita, respons\u00e1vel pela impress\u00e3o do representa\u00e7\u00e3o gr\u00e1fica da NF-e.</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar o DANFE de documentos fiscais eletr\u00f4nicos para acompanhamento, confer\u00eancia e documenta\u00e7\u00e3o de opera\u00e7\u00f5es comerciais.</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Transportadoras</li> <li>Clientes</li> <li>Almoxarifado</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SRF_Danfe</code> - Layout principal do DANFE - Template Jasper <code>SRF_Danfe_S1</code> - Layout dos itens - Arquivos de imagem (Logo, Cancelada, SemValorFiscal)</p> <p>Localiza\u00e7\u00e3o: <code>strema/relatorios/srf/</code></p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>AAC10</code> - Empresas/Filiais - <code>ABE01</code> - Entidades/Clientes - <code>EAA0101</code> - Endere\u00e7os do documento - <code>EAA0102</code> - Dados gerais do documento - <code>EAA0103</code> - Itens do documento</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Aac10</code> - Empresa emissora - <code>Abe01</code> - Cliente/destinat\u00e1rio - <code>Eaa0103</code> - Itens da nota</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o numeroInicial Integer N\u00e3o N\u00famero inicial do documento numeroFinal Integer N\u00e3o N\u00famero final do documento entInicial String N\u00e3o C\u00f3digo inicial da entidade entFinal String N\u00e3o C\u00f3digo final da entidade emissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o entraSai LocalDate[] N\u00e3o Per\u00edodo de entrada/sa\u00edda serie String N\u00e3o S\u00e9rie do documento"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#estrutura-do-danfe","title":"\ud83d\udccb Estrutura do DANFE","text":""},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-1-dados-do-emitente","title":"Se\u00e7\u00e3o 1 - Dados do Emitente","text":"<ul> <li>Raz\u00e3o social e CNPJ</li> <li>Endere\u00e7o completo</li> <li>Inscri\u00e7\u00e3o Estadual</li> <li>Contato (telefone/email)</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-2-dados-do-destinatario","title":"Se\u00e7\u00e3o 2 - Dados do Destinat\u00e1rio","text":"<ul> <li>Raz\u00e3o social e CNPJ/CPF</li> <li>Endere\u00e7o de entrega</li> <li>Inscri\u00e7\u00e3o Estadual</li> <li>Indicador de IE do destinat\u00e1rio</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-3-dados-do-documento","title":"Se\u00e7\u00e3o 3 - Dados do Documento","text":"<ul> <li>N\u00famero e s\u00e9rie da NF-e</li> <li>Data de emiss\u00e3o e sa\u00edda</li> <li>Chave de acesso</li> <li>Protocolo de autoriza\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-4-dados-de-transporte","title":"Se\u00e7\u00e3o 4 - Dados de Transporte","text":"<ul> <li>Modalidade do frete</li> <li>Dados do ve\u00edculo (placa, RNTRC)</li> <li>Dados do transportador</li> <li>Volumes e pesos</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-5-itens-da-nota","title":"Se\u00e7\u00e3o 5 - Itens da Nota","text":"<ul> <li>C\u00f3digo e descri\u00e7\u00e3o do produto</li> <li>NCM e CFOP</li> <li>Quantidade e valor unit\u00e1rio</li> <li>Valor total do item</li> <li>Tributos incidentes</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-6-calculo-de-impostos","title":"Se\u00e7\u00e3o 6 - C\u00e1lculo de Impostos","text":"<ul> <li>Base de c\u00e1lculo do ICMS</li> <li>Valor do ICMS</li> <li>Valor do IPI</li> <li>Valor do PIS/COFINS</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#secao-7-duplicatas","title":"Se\u00e7\u00e3o 7 - Duplicatas","text":"<ul> <li>N\u00famero das parcelas</li> <li>Datas de vencimento</li> <li>Valores das duplicatas</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Busca de Documentos</li> <li>Filtra por n\u00famero, s\u00e9rie, per\u00edodo e entidade</li> <li>Apenas documentos modelo 55 (NF-e)</li> <li> <p>Apenas documentos de emiss\u00e3o pr\u00f3pria</p> </li> <li> <p>Composi\u00e7\u00e3o dos Dados</p> </li> <li>Dados da empresa emitente</li> <li>Dados do destinat\u00e1rio</li> <li>Dados do documento fiscal</li> <li> <p>Itens e valores tribut\u00e1rios</p> </li> <li> <p>Processamento de Itens</p> </li> <li>Busca todos os itens do documento</li> <li>Calcula totais e impostos</li> <li> <p>Processa lotes e s\u00e9ries</p> </li> <li> <p>Gera\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Cria datasource principal</li> <li>Adiciona sub-relat\u00f3rio de itens</li> <li>Gera PDF final</li> </ol>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/relatorio/srf/SRF_Danfe/#validacoes-obrigatorias","title":"Valida\u00e7\u00f5es Obrigat\u00f3rias","text":"<ul> <li>Munic\u00edpio da empresa deve estar cadastrado</li> <li>Endere\u00e7o principal do documento deve existir</li> <li>Munic\u00edpio do destinat\u00e1rio deve estar informado</li> <li>UF deve estar definida no endere\u00e7o</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#classificacoes","title":"Classifica\u00e7\u00f5es","text":"<ul> <li>Modalidade de Frete: 0-Remetente, 1-Destinat\u00e1rio, 2-Terceiros, 3-Pr\u00f3prio remetente, 4-Pr\u00f3prio destinat\u00e1rio</li> <li>Tipo de Documento: Apenas NF-e pr\u00f3pria (modelo 55)</li> <li>Status: Apenas documentos n\u00e3o cancelados</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#calculos-tributarios","title":"C\u00e1lculos Tribut\u00e1rios","text":"<ul> <li>ICMS: base de c\u00e1lculo e valor</li> <li>IPI: valor do imposto</li> <li>PIS/COFINS: valores federais</li> <li>Percentuais sobre o total do documento</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF DANFE completo <code>gerarPDF()</code>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Recursos Gr\u00e1ficos: - <code>Logo.png</code> - Logo da empresa - <code>canceladas.png</code> - Marca d'\u00e1gua para documentos cancelados - <code>SemValorFiscal.png</code> - Marca para documentos sem valor fiscal</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos documentos em lote</li> <li>Layout fiel ao padr\u00e3o oficial da DANFE</li> <li>Tratamento de documentos cancelados</li> <li>C\u00e1lculo autom\u00e1tico de percentuais tribut\u00e1rios</li> <li>Integra\u00e7\u00e3o com dados de transporte e frete</li> <li>Suporte a endere\u00e7o de entrega diferenciado</li> <li>Processamento de lotes e s\u00e9ries dos itens</li> <li>Formata\u00e7\u00e3o espec\u00edfica para dados fiscais</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Vetro)","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Vetro, incluindo faturamento, cobran\u00e7a, cancelamentos e cartas de corre\u00e7\u00e3o.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes e transportadoras com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) de acordo com o tipo de opera\u00e7\u00e3o, adaptado para as necessidades espec\u00edficas do m\u00f3dulo Vetro.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Log\u00edstica/Transporte</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> <li>Transportadora: E-mail da empresa de despacho com XML + DANFE</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE (boleto opcional)</li> <li>Cobran\u00e7a: Apenas boleto</li> <li>Transportadora: XML + DANFE</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Faturamento/Transportadora: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a)</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Transportadora apenas se houver empresa de despacho informada</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#obteremailtransportadoradespachoeaa0102-eaa0102","title":"<code>obterEmailTransportadoraDespacho(Eaa0102 eaa0102)</code>","text":"<p>Busca e-mail da transportadora respons\u00e1vel pelo despacho.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema</p> <p>M\u00f3dulo: Vetro</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#formatacao-html","title":"Formata\u00e7\u00e3o HTML","text":"<ul> <li>Corpo dos e-mails em HTML com tags b\u00e1sicas</li> <li>Links para portal da NF-e e site da Multitec</li> <li>Dados do cliente, CNPJ e chave de acesso</li> <li>Protocolo de autoriza\u00e7\u00e3o da SEFAZ</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#controle-de-anexos","title":"Controle de Anexos","text":"<ul> <li>XML sempre enviado para cliente e transportadora</li> <li>DANFE para faturamento e transportadora</li> <li>Boleto apenas para cobran\u00e7a (separado ou junto)</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#performance","title":"Performance","text":"<ul> <li>Consultas otimizadas com campos espec\u00edficos</li> <li>Uso de criteria para buscas relacionadas</li> <li>Carregamento lazy de entidades</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:42 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Vetro) Vers\u00e3o: 1.0</p>"}]}
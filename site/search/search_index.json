{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/","title":"SCE InventarioFiscal","text":""},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#proposito-geral","title":"\ud83d\udccb\u00a0Prop\u00f3sito Geral","text":"<p>Calcula valores unit\u00e1rios e totais de itens para fins de invent\u00e1rio fiscal, considerando diferentes regras fiscais.</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#tabelas-utilizadas","title":"\ud83c\udfe2\u00a0Tabelas Utilizadas","text":"<ul> <li>Bcb11: Item do invent\u00e1rio</li> <li>Aac10: Empresa</li> <li>Abm01: Item cadastral</li> <li>Abm0101: Configura\u00e7\u00f5es do item por empresa</li> <li>Abm12: Configura\u00e7\u00e3o fiscal do item</li> <li>Abm40: Grupo de invent\u00e1rio</li> <li>Bcc01: Saldo de estoque</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#validacoes-e-configuracoes","title":"Valida\u00e7\u00f5es e Configura\u00e7\u00f5es","text":"<ul> <li>Obt\u00e9m dados do item de invent\u00e1rio (Bcb11)</li> <li>Define per\u00edodo de 12 meses para c\u00e1lculo (data atual - 11 meses)</li> <li>Verifica exist\u00eancia da empresa ativa</li> <li>Obt\u00e9m configura\u00e7\u00f5es do item (Abm0101)</li> <li>Verifica exist\u00eancia da configura\u00e7\u00e3o fiscal do item (Abm12)</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#calculos","title":"\ud83d\udcca C\u00e1lculos","text":""},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#calculo-do-preco-unitario","title":"C\u00e1lculo do Pre\u00e7o Unit\u00e1rio","text":"<ul> <li>Obt\u00e9m taxa do grupo de invent\u00e1rio</li> <li>Busca pre\u00e7o unit\u00e1rio conforme m\u00e9todo definido no grupo</li> <li>Se pre\u00e7o zero, busca valor em invent\u00e1rio anterior</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#precomediounit","title":"\ud83d\udccc\u00a0<code>precoMedioUnit</code>","text":"<p>Calcula o\u00a0pre\u00e7o m\u00e9dio unit\u00e1rio\u00a0do item baseado no \u00faltimo saldo de estoque (Bcc01) antes da data do invent\u00e1rio.  Busca no Bcc01 (saldos de estoque):    - Filtra por data &lt;= data do invent\u00e1rio    - Filtra pelo item espec\u00edfico    - Aplica crit\u00e9rios padr\u00e3o do sistema    - Ordena por ID decrescente (mais recente primeiro)    - Retorna o campo bcc01pmu (pre\u00e7o m\u00e9dio unit\u00e1rio)</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#ultimnounitatiosaida","title":"\ud83d\udccc  <code>ultimnoUnitatioSaida</code>","text":"<p>Obt\u00e9m o\u00a0\u00faltimo pre\u00e7o unit\u00e1rio de sa\u00edda\u00a0do item dentro do per\u00edodo de 12 meses.</p> <p>Consulta documentos de sa\u00edda (Eaa01) no per\u00edodo  Filtra por:    - Item espec\u00edfico    - Documentos de sa\u00edda (eaa01esMov = 1)    - Documentos da classe 1 (eaa01clasdoc = 1)    - Per\u00edodo de 12 meses    - Ordena pelo documento mais recente</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#maiorprecounitario","title":"\ud83d\udccc\u00a0<code>maiorPrecoUnitario</code>","text":"<p>Encontra o\u00a0maior pre\u00e7o unit\u00e1rio de sa\u00edda\u00a0do item dentro do per\u00edodo especificado. - Consulta todas as sa\u00eddas do per\u00edodo - Aplica filtros espec\u00edficos:        - Item espec\u00edfico        - Documentos n\u00e3o cancelados        - Opera\u00e7\u00f5es de c\u00f3digo tipo 1 (abb10tipoCod = 1)        - Apenas movimenta\u00e7\u00f5es de sa\u00edda v\u00e1lidas - Calcula o valor m\u00e1ximo dos pre\u00e7os unit\u00e1rios  </p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#calculo-do-valor-total","title":"C\u00e1lculo do Valor Total","text":"<p><code>bcb11.bcb11unit</code> = pre\u00e7o unit\u00e1rio calculado <code>bcb11.bcb11total</code> = quantidade \u00d7 pre\u00e7o unit\u00e1rio (arredondado para 2 casas) Atualiza JSON com saldo da conta cont\u00e1bil na data do invent\u00e1rio</p>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#estrutura-de-dados-de-saida","title":"Estrutura de Dados de Sa\u00edda","text":""},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#campos-atualizados","title":"Campos Atualizados","text":"<ul> <li><code>bcb11unit</code>: Pre\u00e7o unit\u00e1rio calculado</li> <li><code>bcb11total</code>: Valor total (quantidade \u00d7 unit\u00e1rio)</li> <li><code>bcb11json</code>: Campos livres</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#importante","title":"\u26a0\ufe0f\u00a0IMPORTANTE!!! \u26a0\ufe0f","text":"<ul> <li>Configura\u00e7\u00e3o Fiscal: Item deve ter configura\u00e7\u00e3o fiscal v\u00e1lida</li> <li>Grupo de Invent\u00e1rio: Item deve pertencer a grupo de invent\u00e1rio (pr\u00f3prio ou terceiro)</li> <li>Tipos Fiscais: Itens dos tipos 7,8,9,99 n\u00e3o exigem grupo de invent\u00e1rio</li> </ul>"},{"location":"ELTECH/formulas/sce/SCE_InventarioFiscal/#configuracoes-por-item","title":"\ud83d\udd27\u00a0Configura\u00e7\u00f5es por Item","text":"<p>O c\u00e1lculo considera: - Tipo de item (pr\u00f3prio/terceiro) - Grupo de invent\u00e1rio associado - Configura\u00e7\u00f5es fiscais - Valores e percentuais definidos no grupo de invent\u00e1rio</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/","title":"SCF_Movimento.md","text":""},{"location":"ELTECH/formulas/scf/SCF_Movimento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de c\u00e1lculo de movimento financeiro para o SCF (Sistema de Controle Financeiro) da Linhasita, respons\u00e1vel pelo processamento de juros, multas, encargos e descontos em t\u00edtulos financeiros.</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular automaticamente os valores l\u00edquidos de t\u00edtulos financeiros considerando encargos, descontos e condi\u00e7\u00f5es de pagamento, garantindo a correta apura\u00e7\u00e3o financeira.</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Tesouraria</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> <li>Contabilidade</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SCF_Movimento</code> - C\u00e1lculo de movimento financeiro</p> <p>Localiza\u00e7\u00e3o: <code>eltech/formulas/scf/</code></p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA1001</code> - Movimentos financeiros - <code>DAA01</code> - T\u00edtulos a receber/pagar</p> <p>Entidades Envolvidas: - <code>Daa1001</code> - Movimento financeiro - <code>Daa01</code> - T\u00edtulo principal - <code>SCFService</code> - Servi\u00e7o de c\u00e1lculos financeiros</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o daa1001 Daa1001 Sim Movimento financeiro a ser calculado"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#campos-calculados","title":"\ud83d\udccb Campos Calculados","text":"Campo Descri\u00e7\u00e3o Tipo daa1001liquido Valor l\u00edquido do movimento BigDecimal jurosq Juros quitados BigDecimal multaq Multa quitada BigDecimal encargosq Encargos quitados BigDecimal descontoq Desconto aplicado BigDecimal"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Obt\u00e9m movimento financeiro (DAA1001)</li> <li>Recupera t\u00edtulo principal relacionado (DAA01)</li> <li> <p>Inicializa mapa JSON para campos livres</p> </li> <li> <p>C\u00e1lculo de Dias em Atraso</p> </li> <li>Utiliza servi\u00e7o SCF para calcular dias de atraso</li> <li>Aplica juros somente se houver atraso</li> <li> <p>Aplica multa somente se houver atraso</p> </li> <li> <p>Processamento de Encargos</p> </li> <li>Encargos aplicados independente de atraso</li> <li> <p>Considera valor fixo cadastrado</p> </li> <li> <p>Aplica\u00e7\u00e3o de Descontos</p> </li> <li>Verifica data limite para desconto</li> <li>Aplica desconto somente se pagamento dentro do prazo</li> <li> <p>Desconsidera desconto se fora do prazo</p> </li> <li> <p>Ajuste para Pagamento Parcial</p> </li> <li>Calcula fator proporcional para pagamentos parciais</li> <li>Aplica propor\u00e7\u00e3o aos valores de JMED</li> <li> <p>Mant\u00e9m consist\u00eancia nos c\u00e1lculos</p> </li> <li> <p>C\u00e1lculo do Valor L\u00edquido</p> </li> <li>Soma valor principal com encargos quitados</li> <li>Subtrai descontos aplicados</li> <li>Arredondamento preciso para 2 casas decimais</li> </ol>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/scf/SCF_Movimento/#condicoes-de-aplicacao","title":"Condi\u00e7\u00f5es de Aplica\u00e7\u00e3o","text":"<ul> <li>Juros: Aplicados apenas quando h\u00e1 dias em atraso (diasAtraso &gt; 0)</li> <li>Multa: Aplicada apenas quando h\u00e1 dias em atraso</li> <li>Encargos: Aplicados independente da situa\u00e7\u00e3o</li> <li>Desconto: Aplicado apenas se pagamento at\u00e9 data limite</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#calculos-especificos","title":"C\u00e1lculos Espec\u00edficos","text":"<ul> <li>Juros: <code>juros * diasAtraso</code> (acumulativo)</li> <li>Multa: Valor fixo conforme cadastro</li> <li>Desconto: Valor fixo, condicionado \u00e0 data</li> <li>Pagamento Parcial: Proporcionalidade nos encargos</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#tratamento-de-valores","title":"Tratamento de Valores","text":"<ul> <li>Desconto Quitado: Convertido para negativo (desconto \u00e9 redu\u00e7\u00e3o)</li> <li>Arredondamento: Sempre para 2 casas decimais</li> <li>Valor L\u00edquido: Soma alg\u00e9brica de todos os componentes</li> </ul>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Servi\u00e7os: - <code>SCFService</code> - Servi\u00e7o especializado em c\u00e1lculos financeiros - <code>calculaDiasDeAtraso()</code> - M\u00e9todo para c\u00e1lculo preciso de dias</p> <p>Bibliotecas: - <code>java.time</code> - Manipula\u00e7\u00e3o de datas e per\u00edodos - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos</p>"},{"location":"ELTECH/formulas/scf/SCF_Movimento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a pagamentos parciais com proporcionalidade</li> <li>C\u00e1lculo autom\u00e1tico de dias de atraso</li> <li>Valida\u00e7\u00e3o de datas para aplica\u00e7\u00e3o de descontos</li> <li>Campos livres (JSON) para flexibilidade nas configura\u00e7\u00f5es</li> <li>Arredondamento preciso em todas as etapas</li> <li>Integra\u00e7\u00e3o com servi\u00e7o especializado SCF</li> <li>Tratamento de valores nulos e casos extremos</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/","title":"SGC - Lan\u00e7amento Cont\u00e1bil","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para processamento e formata\u00e7\u00e3o autom\u00e1tica do hist\u00f3rico de lan\u00e7amentos cont\u00e1beis no Sistema de Gest\u00e3o Cont\u00e1bil (SGC), substituindo coringas por informa\u00e7\u00f5es din\u00e2micas do documento.</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar a gera\u00e7\u00e3o do hist\u00f3rico cont\u00e1bil substituindo placeholders (<code>$1</code>, <code>$2</code>, etc.) por dados reais do documento, central, entidade e eventos relacionados.</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Tesouraria</li> <li>Controladoria</li> <li>Analistas Financeiros</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Ebb05</code> - Lan\u00e7amentos cont\u00e1beis - <code>Abb01</code> - Cabe\u00e7alho de documentos (central) - <code>Aah01</code> - Tipos de documento - <code>Abe01</code> - Entidades (clientes/fornecedores) - <code>Abh21</code> - Eventos cont\u00e1beis - <code>Eca01</code> - Classifica\u00e7\u00e3o patrimonial - <code>Eba02</code> - Planilha de lan\u00e7amento programado</p> <p>Entidades Envolvidas: - <code>Ebb05</code> - Lan\u00e7amento cont\u00e1bil - <code>Abb01</code> - Documento central - <code>Aah01</code> - Tipo de documento - <code>Abe01</code> - Entidade - <code>Abh21</code> - Evento - <code>Eca01</code> - Classifica\u00e7\u00e3o patrimonial - <code>Eba02</code> - Lan\u00e7amento programado</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o ebb05 Ebb05 Sim Lan\u00e7amento cont\u00e1bil a ser processado abh21 Abh21 N\u00e3o Evento cont\u00e1bil associado"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#1-inicializacao","title":"1. Inicializa\u00e7\u00e3o","text":"<ul> <li>Obt\u00e9m o lan\u00e7amento cont\u00e1bil (Ebb05)</li> <li>Verifica exist\u00eancia de hist\u00f3rico para processamento</li> <li>Inicializa vari\u00e1veis de entidades relacionadas</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#2-busca-de-dados-da-central","title":"2. Busca de Dados da Central","text":"<ul> <li>Recupera dados do documento central (Abb01)</li> <li>Busca tipo de documento (Aah01) relacionado</li> <li>Obt\u00e9m dados da entidade (Abe01) vinculada</li> <li>Recupera classifica\u00e7\u00e3o patrimonial (Eca01) se existir</li> <li>Busca dados do lan\u00e7amento programado (Eba02)</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#3-busca-de-dados-do-evento","title":"3. Busca de Dados do Evento","text":"<ul> <li>Recupera informa\u00e7\u00f5es do evento cont\u00e1bil (Abh21)</li> <li>Prioriza evento passado como par\u00e2metro</li> <li>Fallback para evento vinculado ao lan\u00e7amento</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#4-processamento-de-coringas","title":"4. Processamento de Coringas","text":"<p>Substitui placeholders no hist\u00f3rico por valores reais:</p> Coringa Descri\u00e7\u00e3o Fonte <code>$1</code> Nome abreviado do documento Aah01.aah01na <code>$2</code> N\u00famero do documento Abb01.abb01num <code>$3</code> S\u00e9rie do documento Abb01.abb01serie <code>$4</code> Data do documento (dd/MM/yyyy) Abb01.abb01data <code>$5</code> Nome da entidade Abe01.abe01nome <code>$6</code> Parcela do documento Abb01.abb01parcela <code>$7</code> Nome da classifica\u00e7\u00e3o patrimonial Eca01.eca01nome <code>$8</code> Observa\u00e7\u00e3o do SGC Eba02.eba02json.obs_sgc <code>$9</code> Nome do evento Abh21.abh21nome"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#5-atualizacao-do-historico","title":"5. Atualiza\u00e7\u00e3o do Hist\u00f3rico","text":"<ul> <li>Aplica todas as substitui\u00e7\u00f5es</li> <li>Atualiza o campo <code>ebb05historico</code> com o resultado final</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Processa apenas se <code>ebb05historico</code> n\u00e3o for nulo</li> <li>Considera central apenas se <code>ebb05.ebb05central</code> existir</li> <li>Trata valores nulos com strings vazias para evitar erros</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#formatacao-de-dados","title":"Formata\u00e7\u00e3o de Dados","text":"<ul> <li>Datas: Formato \"dd/MM/yyyy\"</li> <li>N\u00fameros: Convers\u00e3o direta para string</li> <li>Campos JSON: Acesso ao campo <code>obs_sgc</code> espec\u00edfico</li> <li>Valores Nulos: Substitu\u00eddos por string vazia</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#prioridade-de-eventos","title":"Prioridade de Eventos","text":"<ol> <li>Evento passado como par\u00e2metro (<code>abh21</code>)</li> <li>Evento vinculado ao lan\u00e7amento (<code>ebb05.abh21id</code>)</li> </ol>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de formata\u00e7\u00e3o do hist\u00f3rico.</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#buscas-no-banco","title":"Buscas no Banco","text":"<ul> <li>Consultas otimizadas com <code>getAcessoAoBanco().buscarRegistroUnico()</code></li> <li>Filtros por ID das entidades</li> <li>Aplica\u00e7\u00e3o de <code>WHERE</code> padr\u00e3o para entidade Abe01</li> </ul>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>Ebb05 (Lan\u00e7amento Cont\u00e1bil): - <code>ebb05historico</code> - Hist\u00f3rico formatado com coringas substitu\u00eddos</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.model</code> - Entidades do sistema - <code>sam.server.samdev</code> - Base de f\u00f3rmula e utilit\u00e1rios - <code>java.time.format</code> - Formata\u00e7\u00e3o de datas</p> <p>Entidades: - <code>FormulaBase</code> - Classe base para f\u00f3rmulas - <code>Parametro</code> - Par\u00e2metros de consulta ao banco</p>"},{"location":"ELTECH/formulas/sgc/SGC_LancamentoContabil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza <code>DateTimeFormatter</code> para formata\u00e7\u00e3o consistente de datas</li> <li>Processamento seguro de valores nulos em todas as substitui\u00e7\u00f5es</li> <li>Consultas otimizadas com busca \u00fanica por entidade</li> <li>Suporte a campos JSON para observa\u00e7\u00f5es customizadas</li> <li>Integra\u00e7\u00e3o com sistema de lan\u00e7amentos programados (Eba02)</li> <li>Compat\u00edvel com classifica\u00e7\u00e3o patrimonial (Eca01)</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 23/10/2025 10:48 Autor: Bruno Tipo: F\u00f3rmula de Lan\u00e7amento Cont\u00e1bil (LCTO_SGC) Vers\u00e3o: 1.0</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/","title":"SGC_LancamentoContabil.md","text":""},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de formata\u00e7\u00e3o autom\u00e1tica de hist\u00f3rico cont\u00e1bil para o SGC (Sistema de Gest\u00e3o Cont\u00e1bil), processando coringas din\u00e2micos para compor o hist\u00f3rico dos lan\u00e7amentos cont\u00e1beis.</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar a constru\u00e7\u00e3o do hist\u00f3rico cont\u00e1bil atrav\u00e9s da substitui\u00e7\u00e3o de coringas por informa\u00e7\u00f5es din\u00e2micas do documento fiscal, entidade, classifica\u00e7\u00e3o patrimonial e eventos.</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Financeiro</li> <li>Faturamento</li> <li>Controladoria</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SGC_LancamentoContabil</code> - Formata\u00e7\u00e3o de hist\u00f3rico cont\u00e1bil</p> <p>Localiza\u00e7\u00e3o: <code>eltech/formulas/sgc/</code></p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EBB05</code> - Lan\u00e7amentos cont\u00e1beis - <code>AAH01</code> - Tipos de documento - <code>ABE01</code> - Entidades/Clientes - <code>ABB01</code> - Documentos fiscais - <code>ABH21</code> - Eventos cont\u00e1beis - <code>ECA01</code> - Classifica\u00e7\u00e3o patrimonial - <code>EBA02</code> - Planilha de lan\u00e7amento programado</p> <p>Entidades Envolvidas: - <code>Ebb05</code> - Lan\u00e7amento cont\u00e1bil - <code>Aah01</code> - Tipo de documento - <code>Abe01</code> - Entidade - <code>Abb01</code> - Documento fiscal - <code>Abh21</code> - Evento - <code>Eca01</code> - Classifica\u00e7\u00e3o patrimonial - <code>Eba02</code> - Lan\u00e7amento programado</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o ebb05 Ebb05 Sim Lan\u00e7amento cont\u00e1bil a ser processado abh21 Abh21 N\u00e3o Evento cont\u00e1bil (alternativo)"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo ebb05historico Hist\u00f3rico cont\u00e1bil formatado String"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o</li> <li>Obt\u00e9m lan\u00e7amento cont\u00e1bil (EBB05)</li> <li>Verifica exist\u00eancia de hist\u00f3rico</li> <li> <p>Inicializa entidades relacionadas</p> </li> <li> <p>Busca de Dados Relacionados</p> </li> <li>Tipo de documento (AAH01) atrav\u00e9s do documento central</li> <li>Entidade (ABE01) do documento</li> <li>Classifica\u00e7\u00e3o patrimonial (ECA01) quando aplic\u00e1vel</li> <li>Planilha de lan\u00e7amento programado (EBA02)</li> <li> <p>Evento cont\u00e1bil (ABH21)</p> </li> <li> <p>Processamento de Coringas</p> </li> <li>Substitui coringas por valores din\u00e2micos</li> <li>Aplica formata\u00e7\u00e3o espec\u00edfica para cada tipo de dado</li> <li> <p>Mant\u00e9m valores vazios para dados n\u00e3o encontrados</p> </li> <li> <p>Atualiza\u00e7\u00e3o do Hist\u00f3rico</p> </li> <li>Atribui hist\u00f3rico formatado ao lan\u00e7amento</li> <li>Preserva estrutura original do hist\u00f3rico</li> </ol>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#coringas-suportados","title":"Coringas Suportados","text":"Coringa Descri\u00e7\u00e3o Fonte $1 Nome abreviado do documento AAH01.aah01na $2 N\u00famero do documento ABB01.abb01num $3 S\u00e9rie do documento ABB01.abb01serie $4 Data do documento (dd/MM/yyyy) ABB01.abb01data $5 Nome da entidade ABE01.abe01nome $6 Parcela do documento ABB01.abb01parcela $7 Nome da classifica\u00e7\u00e3o patrimonial ECA01.eca01nome $8 Observa\u00e7\u00e3o SGC (CampoLivre) EBA02.eba02json.obs_sgc $9 Nome do evento ABH21.abh21nome"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Hist\u00f3rico \u00e9 obrigat\u00f3rio para processamento</li> <li>Dados nulos s\u00e3o substitu\u00eddos por string vazia</li> <li>Formata\u00e7\u00e3o de data padr\u00e3o brasileiro (dd/MM/yyyy)</li> <li>Consultas aplicam where padr\u00e3o do sistema para seguran\u00e7a</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#comportamento-do-sistema","title":"\ud83c\udfa8 Comportamento do Sistema","text":"<ul> <li>Processamento Condicional: Apenas executa se hist\u00f3rico existir</li> <li>Toler\u00e2ncia a Nulos: Substitui dados n\u00e3o encontrados por string vazia</li> <li>Busca Otimizada: Consultas espec\u00edficas apenas para dados necess\u00e1rios</li> <li>Formata\u00e7\u00e3o Consistente: Datas no formato brasileiro</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>sam.dicdados</code> - Defini\u00e7\u00e3o de tipos de f\u00f3rmula - <code>sam.model.entities</code> - Entidades do sistema - <code>sam.server.samdev.formula</code> - Framework de f\u00f3rmulas</p> <p>Consultas: - Busca de tipo de documento por ID - Busca de entidade com where padr\u00e3o - Busca de classifica\u00e7\u00e3o patrimonial - Busca de lan\u00e7amento programado por documento central - Busca de evento cont\u00e1bil</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Tipo de F\u00f3rmula: <code>LCTO_SGC</code> - Espec\u00edfico para lan\u00e7amentos cont\u00e1beis do SGC</li> <li>Tratamento de Nulos: Robustez contra dados incompletos</li> <li>Performance: Consultas diretas apenas quando necess\u00e1rio</li> <li>Flexibilidade: Suporte a coringas din\u00e2micos e expans\u00edvel</li> <li>Seguran\u00e7a: Aplica\u00e7\u00e3o de where padr\u00e3o em consultas de entidade</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#metodos-principais","title":"\ud83d\udd04 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de formata\u00e7\u00e3o do hist\u00f3rico.</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#obtertipoformula","title":"<code>obterTipoFormula()</code>","text":"<p>Define o tipo espec\u00edfico da f\u00f3rmula para o sistema SGC.</p>"},{"location":"ELTECH/formulas/sgt/SGC_LancamentoContabil/#estrutura-do-historico","title":"\ud83d\udca1 Estrutura do Hist\u00f3rico","text":"<p>O sistema permite templates flex\u00edveis como: - \"Fatura \\$1 n\u00ba \\$2 s\u00e9rie \\$3 - \\$5\" - \"Classifica\u00e7\u00e3o: \\$7 - Evento: \\$9\" - \"Parcela \\$6 - Obs: \\$8\"</p> <p>Sendo automaticamente expandido para: \"Fatura NF n\u00ba 12345 s\u00e9rie 1 - Cliente XYZ Ltda\"</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/","title":"SGT_Apuracao_EFD_ICMSDifAliq.md","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de apura\u00e7\u00e3o autom\u00e1tica do ICMS Diferencial de Al\u00edquota (DIFAL) e Fundo de Combate \u00e0 Pobreza (FCP) para a EFD-ICMS/IPI no SGT (Sistema de Gest\u00e3o Tribut\u00e1ria).</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Realizar a apura\u00e7\u00e3o mensal autom\u00e1tica dos valores de ICMS DIFAL e FCP por estado, gerando os registros cont\u00e1beis necess\u00e1rios para a escritura\u00e7\u00e3o fiscal digital.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Gest\u00e3o Tribut\u00e1ria</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SGT_Apuracao_EFD_ICMSDifAliq</code> - Apura\u00e7\u00e3o de ICMS DIFAL/FCP</p> <p>Localiza\u00e7\u00e3o: <code>eltech/formulas/sgt/</code></p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EDB01</code> - Apura\u00e7\u00f5es fiscais - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos fiscais - <code>EAA01035</code> - Ajustes fiscais - <code>ABB01</code> - Documentos fiscais - <code>AAG02</code> - Estados/UFs - <code>AAC10</code> - Empresas</p> <p>Entidades Envolvidas: - <code>Edb01</code> - Apura\u00e7\u00e3o fiscal - <code>Eaa01</code> - Documento fiscal - <code>Eaa0103</code> - Item de documento fiscal - <code>Eaa01035</code> - Ajuste fiscal - <code>Aac10</code> - Empresa - <code>Aag02</code> - Estado/UF</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o edb01 Edb01 Sim Per\u00edodo de apura\u00e7\u00e3o (ano/m\u00eas)"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo edb01 Apura\u00e7\u00e3o fiscal gerada Edb01 edb01json Campos de apura\u00e7\u00e3o DIFAL/FCP TableMap"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o</li> <li>Obt\u00e9m per\u00edodo de apura\u00e7\u00e3o (EDB01)</li> <li>Define datas inicial e final do m\u00eas</li> <li> <p>Seleciona alinhamento \"0031\" para estrutura de campos</p> </li> <li> <p>Processamento por Estado</p> </li> <li>Identifica estados envolvidos (UF da empresa ou todos)</li> <li>Verifica se \u00e9 primeira apura\u00e7\u00e3o para cada estado</li> <li> <p>Determina se estado \u00e9 da empresa ou destino</p> </li> <li> <p>Apura\u00e7\u00e3o do DIFAL</p> </li> <li>Calcula saldo credor anterior</li> <li>Processa sa\u00eddas com d\u00e9bito</li> <li>Aplica ajustes de d\u00e9bito e cr\u00e9dito</li> <li> <p>Calcula saldo devedor e valor a recolher</p> </li> <li> <p>Apura\u00e7\u00e3o do FCP</p> </li> <li>Repete estrutura do DIFAL para Fundo de Combate \u00e0 Pobreza</li> <li> <p>Calcula valores espec\u00edficos do FCP</p> </li> <li> <p>Persist\u00eancia dos Resultados</p> </li> <li>Armazena valores nos campos JSON da apura\u00e7\u00e3o</li> <li>Persiste apenas apura\u00e7\u00f5es com valores relevantes</li> <li>Aplica where padr\u00e3o do sistema</li> </ol>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#campos-de-apuracao-difal","title":"Campos de Apura\u00e7\u00e3o DIFAL","text":"Campo Descri\u00e7\u00e3o sdoCredAntDifal Saldo credor anterior - DIFAL debDifal Sa\u00eddas com d\u00e9bito - DIFAL ajuDebDifal Ajustes de d\u00e9bito - DIFAL credDifal Cr\u00e9ditos do ICMS - DIFAL ajuCredDifal Ajustes de cr\u00e9dito - DIFAL sdoDevDifal Saldo devedor antes das dedu\u00e7\u00f5es - DIFAL deducoesDifal Dedu\u00e7\u00f5es - DIFAL vlrRecolDifal Valor recolhido ou a recolher - DIFAL sdoCredDifal Saldo credor a transportar - DIFAL extraDifal Valores extra-apura\u00e7\u00e3o - DIFAL"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#campos-de-apuracao-fcp","title":"Campos de Apura\u00e7\u00e3o FCP","text":"Campo Descri\u00e7\u00e3o sdoCredAntFcp Saldo credor anterior - FCP debFcp Sa\u00eddas com d\u00e9bito - FCP ajuDebFcp Ajustes de d\u00e9bito - FCP credFcp Entradas com cr\u00e9dito - FCP ajuCredFcp Ajustes de cr\u00e9dito - FCP sdoDevFcp Saldo devedor antes das dedu\u00e7\u00f5es - FCP deducoesFcp Dedu\u00e7\u00f5es - FCP vlrRecolFcp Valor recolhido ou a recolher - FCP sdoCredFcp Saldo credor a transportar - FCP extraFcp Valores extra-apura\u00e7\u00e3o - FCP"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#validacoes-e-regras","title":"Valida\u00e7\u00f5es e Regras","text":"<ul> <li>Estados \"EX\" (Exterior) s\u00e3o ignorados</li> <li>Primeira apura\u00e7\u00e3o considera valores do primeiro per\u00edodo</li> <li>Campos com valor zero n\u00e3o geram apura\u00e7\u00e3o</li> <li>Aplica\u00e7\u00e3o de where padr\u00e3o em todas as consultas</li> <li>Documentos cancelados s\u00e3o exclu\u00eddos dos c\u00e1lculos</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Crit\u00e9rios e consultas - <code>multitec.utils</code> - Utilit\u00e1rios e cole\u00e7\u00f5es - <code>sam.dicdados</code> - Defini\u00e7\u00e3o de tipos de f\u00f3rmula</p> <p>Consultas: - Saldo credor anterior por estado - Total de imposto DIFAL/FCP por opera\u00e7\u00e3o - Ajustes de d\u00e9bito e cr\u00e9dito - Valores extra-apura\u00e7\u00e3o - Modelos de documentos por registro</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#modelos-de-documentos","title":"Modelos de Documentos","text":"<ul> <li>Registro C100: 01, 1B, 04, 55, 65</li> <li>Registro D100: 07, 08, 8B, 09, 10, 11, 26, 27, 57, 67, 63</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#codigos-de-ajuste","title":"C\u00f3digos de Ajuste","text":"<ul> <li>Terceiro d\u00edgito: 2 (ICMS), 3 (FCP)</li> <li>Quarto d\u00edgito: </li> <li>0,1 (D\u00e9bito)</li> <li>2,3 (Cr\u00e9dito/Dedu\u00e7\u00e3o)</li> <li>5 (Extra-apura\u00e7\u00e3o)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#tratamento-de-estados","title":"Tratamento de Estados","text":"<ul> <li>UF da Empresa: Considera campo vl_icms_uf_rem</li> <li>UF Destino: Considera campo vl_icms_uf_dest</li> <li>FCP: Sempre utiliza campo vl_fcp_uf_dest</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#metodos-principais","title":"\ud83d\udd04 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra toda a apura\u00e7\u00e3o.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#buscartotalimpostodifalfcp","title":"<code>buscarTotalImpostoDifalFcp()</code>","text":"<p>Calcula totais de imposto para DIFAL e FCP.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#buscarajustesdebitosicmsdifalfcp","title":"<code>buscarAjustesDebitosICMSDifalFcp()</code>","text":"<p>Busca ajustes de d\u00e9bito para ICMS e FCP.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#buscarajustescreditosicmsdifalfcp","title":"<code>buscarAjustesCreditosICMSDifalFcp()</code>","text":"<p>Busca ajustes de cr\u00e9dito para ICMS e FCP.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#buscarsaldocredoranterior","title":"<code>buscarSaldoCredorAnterior()</code>","text":"<p>Obt\u00e9m saldo credor do per\u00edodo anterior.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#estrutura-de-calculo","title":"\ud83d\udca1 Estrutura de C\u00e1lculo","text":"<p>Saldo Devedor = (Sa\u00eddas com D\u00e9bito + Ajustes D\u00e9bito) - (Saldo Credor Anterior + Cr\u00e9ditos + Ajustes Cr\u00e9dito)</p> <p>Valor a Recolher = Saldo Devedor - Dedu\u00e7\u00f5es</p> <p>Saldo Credor = (Saldo Credor Anterior + Cr\u00e9ditos + Ajustes Cr\u00e9dito) - (Sa\u00eddas com D\u00e9bito + Ajustes D\u00e9bito)</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_EFD_ICMSDifAliq/#validacoes-fiscais","title":"\u26a0\ufe0f Valida\u00e7\u00f5es Fiscais","text":"<ul> <li>Apenas documentos com indicador EFD ICMS = 1</li> <li>Exclus\u00e3o de documentos cancelados</li> <li>Filtro por situa\u00e7\u00e3o fiscal v\u00e1lida para EFD</li> <li>Considera\u00e7\u00e3o apenas de endere\u00e7os principais</li> <li>Valida\u00e7\u00e3o de modelos de documento permitidos</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/","title":"SGT - Apura\u00e7\u00e3o de Receita PIS/COFINS","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para apura\u00e7\u00e3o de receita e c\u00e1lculo da Contribui\u00e7\u00e3o Previdenci\u00e1ria sobre Receita Bruta (PIS/COFINS), considerando diferentes classifica\u00e7\u00f5es de receita e atividades econ\u00f4micas.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Realizar a apura\u00e7\u00e3o completa da receita bruta para fins de PIS/COFINS, classificando as receitas por tipo (tributada, n\u00e3o-tributada, exporta\u00e7\u00e3o, cumulativa) e calculando a base de c\u00e1lculo da contribui\u00e7\u00e3o previdenci\u00e1ria.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Gestores Tribut\u00e1rios</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais de entrada/sa\u00edda - <code>Eaa0103</code> - Itens de documentos fiscais - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Aah01</code> - Tipos de documento - <code>Abb10</code> - Opera\u00e7\u00f5es fiscais - <code>Aac10</code> - Empresas - <code>Abg02</code> - Atividades econ\u00f4micas - <code>Abc10</code> - Plano de contas cont\u00e1bil - <code>Edb10</code> - Per\u00edodo de apura\u00e7\u00e3o - <code>Edb1001</code> - Receita por empresa - <code>Edb10011</code> - Detalhe por atividade</p> <p>Entidades Envolvidas: - <code>Edb10</code> - Per\u00edodo de apura\u00e7\u00e3o - <code>Edb1001</code> - Receita por empresa - <code>Edb10011</code> - Detalhe por atividade econ\u00f4mica - <code>Aac10</code> - Empresa - <code>Abg02</code> - Atividade econ\u00f4mica - <code>Abc10</code> - Conta cont\u00e1bil</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o edb10 Edb10 Sim Per\u00edodo de apura\u00e7\u00e3o com m\u00eas/ano alinApur String Sim C\u00f3digo do alinhamento (0044) <p>Campos do Alinhamento: - <code>vlRecTotEst</code> - Valor total da receita do estabelecimento - <code>vlRecAtivEstab</code> - Valor da receita da atividade do estabelecimento - <code>vlExc</code> - Valor das exclus\u00f5es - <code>aliqCont</code> - Al\u00edquota da contribui\u00e7\u00e3o</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Seleciona alinhamento de apura\u00e7\u00e3o (0044)</li> <li>Busca matriz e filiais da empresa ativa</li> <li>Obt\u00e9m campos do alinhamento para c\u00e1lculo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#2-apuracao-da-receita-por-classificacao","title":"2. Apura\u00e7\u00e3o da Receita por Classifica\u00e7\u00e3o","text":"<ul> <li>Busca receitas do per\u00edodo por empresa</li> <li>Classifica em 4 categorias:</li> <li>1 - Tributada: Receitas sujeitas \u00e0 tributa\u00e7\u00e3o</li> <li>2 - N\u00e3o-Tributada: Receitas isentas ou n\u00e3o-tributadas</li> <li>3 - Exporta\u00e7\u00e3o: Receitas de exporta\u00e7\u00e3o</li> <li>4 - Cumulativa: Receitas do regime cumulativo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#3-calculo-da-contribuicao-previdenciaria-p100","title":"3. C\u00e1lculo da Contribui\u00e7\u00e3o Previdenci\u00e1ria (P100)","text":"<ul> <li>Processa receitas por atividade econ\u00f4mica</li> <li>Aplica al\u00edquotas espec\u00edficas por atividade</li> <li>Considera devolu\u00e7\u00f5es e exclus\u00f5es</li> <li>Calcula base de c\u00e1lculo e contribui\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#4-consolidacao-dos-resultados","title":"4. Consolida\u00e7\u00e3o dos Resultados","text":"<ul> <li>Totaliza receitas por categoria</li> <li>Calcula totais para o per\u00edodo</li> <li>Preenche entidades do modelo (Edb10, Edb1001, Edb10011)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#classificacao-de-receitas","title":"Classifica\u00e7\u00e3o de Receitas","text":"<ul> <li>Classe 1: Receitas tributadas</li> <li>Classe 2: Receitas n\u00e3o-tributadas  </li> <li>Classe 3: Receitas de exporta\u00e7\u00e3o</li> <li>Classe 4: Receitas do regime cumulativo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>Base de C\u00e1lculo: Receita da atividade - Exclus\u00f5es</li> <li>Contribui\u00e7\u00e3o: Base de c\u00e1lculo \u00d7 Al\u00edquota</li> <li>Receita Total: Soma de todas as receitas do estabelecimento</li> <li>Receita com CP: Receitas com contribui\u00e7\u00e3o previdenci\u00e1ria</li> <li>Receita sem CP: Receitas sem contribui\u00e7\u00e3o previdenci\u00e1ria</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#filtros-de-periodo","title":"Filtros de Per\u00edodo","text":"<ul> <li>Considera documentos do m\u00eas/ano informado</li> <li>Apenas documentos n\u00e3o cancelados</li> <li>Apenas documentos com indicador EFD Contribuinte = 1</li> <li>Opera\u00e7\u00f5es fiscais do tipo 1 (entrada/sa\u00edda)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#tratamento-de-devolucoes","title":"Tratamento de Devolu\u00e7\u00f5es","text":"<ul> <li>Considera opera\u00e7\u00f5es fiscais do tipo 4 (devolu\u00e7\u00e3o)</li> <li>Ajusta valores de exclus\u00f5es nas atividades</li> <li>Mant\u00e9m demais dados da atividade original</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de apura\u00e7\u00e3o.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#selecionargcporempresalong-aac10id-string-tabela","title":"<code>selecionarGCPorEmpresa(Long aac10id, String tabela)</code>","text":"<p>Busca o grupo de empresas para a tabela especificada.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscarmatrizefiliais","title":"<code>buscarMatrizEFiliais()</code>","text":"<p>Retorna lista da matriz e todas suas filiais.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscarreceitainteger-mes-integer-ano-long-gcea","title":"<code>buscarReceita(Integer mes, Integer ano, Long gcEA)</code>","text":"<p>Busca receitas classificadas por tipo.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscarreceitap100integer-mes-integer-ano-string-campos","title":"<code>buscarReceitaP100(Integer mes, Integer ano, String... campos)</code>","text":"<p>Busca receitas para c\u00e1lculo da contribui\u00e7\u00e3o P100.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#buscardevolucoesp100integer-mes-integer-ano-string-campos","title":"<code>buscarDevolucoesP100(Integer mes, Integer ano, String... campos)</code>","text":"<p>Busca devolu\u00e7\u00f5es para ajuste do c\u00e1lculo P100.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>Edb10 (Per\u00edodo): - <code>edb10rbTrib</code> - Receita tributada - <code>edb10rbNaoTrib</code> - Receita n\u00e3o-tributada - <code>edb10rbExp</code> - Receita de exporta\u00e7\u00e3o - <code>edb10rbCumul</code> - Receita cumulativa - <code>edb10rbTotal</code> - Receita total - <code>edb10rbAtivCP</code> - Receita com contribui\u00e7\u00e3o previdenci\u00e1ria - <code>edb10rbAtivSemCP</code> - Receita sem contribui\u00e7\u00e3o previdenci\u00e1ria</p> <p>Edb1001 (Por Empresa): - <code>edb1001empresa</code> - Empresa - <code>edb1001rb</code> - Receita bruta da empresa</p> <p>Edb10011 (Por Atividade): - <code>edb10011ativ</code> - Atividade econ\u00f4mica - <code>edb10011rb</code> - Receita bruta - <code>edb10011exc</code> - Exclus\u00f5es - <code>edb10011aliq</code> - Al\u00edquota - <code>edb10011cprb</code> - Contribui\u00e7\u00e3o previdenci\u00e1ria - <code>edb10011cta</code> - Conta cont\u00e1bil</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>multiorm</code> - Criteria e fields - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.model</code> - Entidades do sistema</p> <p>Entidades: - <code>FormulaBase</code> - Classe base para f\u00f3rmulas - <code>TableMap</code> - Estrutura de dados para resultados - <code>Parametro</code> - Par\u00e2metros de consulta</p>"},{"location":"ELTECH/formulas/sgt/SGT_Apuracao_Receita_PisCofins/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza JSON fields para campos din\u00e2micos (<code>eaa0103json</code>)</li> <li>Processa matriz e filiais consolidamente</li> <li>Suporte a m\u00faltiplas atividades econ\u00f4micas por empresa</li> <li>C\u00e1lculos com precis\u00e3o decimal (2 casas)</li> <li>Consultas SQL otimizadas com agrega\u00e7\u00f5es</li> <li>Tratamento espec\u00edfico para devolu\u00e7\u00f5es</li> <li>Al\u00edquotas vari\u00e1veis por atividade econ\u00f4mica</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 05/09 \u00e0s 16:00 Autor: Bruno Tipo: F\u00f3rmula de Apura\u00e7\u00e3o Vers\u00e3o: 1.0</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/","title":"SGT - Leiaute 15/2021 Contribui\u00e7\u00f5es (EFD Contribui\u00e7\u00f5es)","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para gera\u00e7\u00e3o do arquivo EFD Contribui\u00e7\u00f5es (PIS/COFINS) no formato Leiaute 15/2021, contemplando todos os blocos obrigat\u00f3rios para escritura\u00e7\u00e3o fiscal digital.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar arquivo digital da EFD Contribui\u00e7\u00f5es conforme legisla\u00e7\u00e3o vigente, consolidando informa\u00e7\u00f5es de documentos fiscais, apura\u00e7\u00f5es, cr\u00e9ditos e demais opera\u00e7\u00f5es sujeitas \u00e0 tributa\u00e7\u00e3o PIS/COFINS.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Escritura\u00e7\u00e3o Fiscal Digital</li> <li>Auditoria Fiscal</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens de documentos fiscais - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Aah01</code> - Tipos de documento - <code>Abe01</code> - Entidades - <code>Abm01</code> - Itens (produtos/servi\u00e7os) - <code>Edb10</code> - Per\u00edodo de apura\u00e7\u00e3o - <code>Edb11</code> - Opera\u00e7\u00f5es de cr\u00e9dito - <code>Edb12</code> - Reten\u00e7\u00f5es na fonte - <code>Edb13</code> - Dedu\u00e7\u00f5es diversas - <code>Edb14</code> - Cr\u00e9ditos por incorpora\u00e7\u00e3o/fus\u00e3o/cis\u00e3o - <code>Ecb01</code> - Bens do ativo imobilizado</p> <p>Blocos Gerados: - Bloco 0 - Abertura, identifica\u00e7\u00e3o e refer\u00eancias - Bloco A - Documentos fiscais - servi\u00e7os - Bloco C - Documentos fiscais I - mercadorias (ICMS/IPI) - Bloco D - Documentos fiscais II - servi\u00e7os (ICMS) - Bloco F - Demais documentos e opera\u00e7\u00f5es - Bloco M - Apura\u00e7\u00e3o do PIS/COFINS - Bloco 1 - Opera\u00e7\u00f5es extempor\u00e2neas - Bloco 9 - Controle e encerramento</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o dtInicial LocalDate Sim Data inicial do per\u00edodo dtFinal LocalDate Sim Data final do per\u00edodo situacao Integer Sim Situa\u00e7\u00e3o da escritura\u00e7\u00e3o (0-normal, 9-retificadora) numRecibo String N\u00e3o N\u00famero do recibo (para retifica\u00e7\u00e3o) aliqPisF150 BigDecimal N\u00e3o Al\u00edquota PIS para registro F150 aliqCofinsF150 BigDecimal N\u00e3o Al\u00edquota COFINS para registro F150"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Valida\u00e7\u00e3o de par\u00e2metros e per\u00edodo</li> <li>Busca da empresa matriz e filiais</li> <li>Verifica\u00e7\u00e3o da apura\u00e7\u00e3o de receita do per\u00edodo</li> <li>Sele\u00e7\u00e3o do alinhamento EFD (0051)</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#2-geracao-dos-blocos","title":"2. Gera\u00e7\u00e3o dos Blocos","text":"<ul> <li>Bloco 0: Dados da empresa, contabilista, regimes de apura\u00e7\u00e3o</li> <li>Bloco A: Notas fiscais de servi\u00e7o</li> <li>Bloco C: Notas fiscais de mercadorias</li> <li>Bloco D: Documentos de transporte e comunica\u00e7\u00e3o</li> <li>Bloco F: Opera\u00e7\u00f5es geradoras de cr\u00e9ditos, bens do ativo, ajustes</li> <li>Bloco M: Apura\u00e7\u00e3o consolidada</li> <li>Bloco 1: Processos judiciais e administrativos</li> <li>Bloco 9: Encerramento e totais</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#3-processamento-por-empresa","title":"3. Processamento por Empresa","text":"<ul> <li>Consolida\u00e7\u00e3o por grupo centralizador (GC)</li> <li>Valida\u00e7\u00e3o de documentos fiscais</li> <li>C\u00e1lculo de bases e valores do PIS/COFINS</li> <li>Agrupamento por CST e atividade econ\u00f4mica</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#4-formatacao-e-saida","title":"4. Formata\u00e7\u00e3o e Sa\u00edda","text":"<ul> <li>Gera\u00e7\u00e3o do arquivo texto no formato delimitado por \"|\"</li> <li>Formata\u00e7\u00e3o de valores, datas e c\u00f3digos</li> <li>Controle de quantidade de linhas por registro</li> <li>Valida\u00e7\u00e3o final do arquivo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#validacoes-de-documentos","title":"Valida\u00e7\u00f5es de Documentos","text":"<ul> <li>Apenas documentos com indicador EFD Contribuinte = 1</li> <li>Documentos n\u00e3o cancelados</li> <li>Per\u00edodo conforme datas informadas</li> <li>Situa\u00e7\u00e3o do documento obrigat\u00f3ria</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#classificacao-de-receitas","title":"Classifica\u00e7\u00e3o de Receitas","text":"<ul> <li>Tributada: CST 01-03, 05</li> <li>N\u00e3o-Tributada: CST 04, 06-09, 49</li> <li>Exporta\u00e7\u00e3o: CST espec\u00edficos</li> <li>Cumulativa: Regime cumulativo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>Base de C\u00e1lculo: Conforme CST e movimento</li> <li>Al\u00edquotas: Espec\u00edficas por atividade/documento</li> <li>Cr\u00e9ditos: Baseados em deprecia\u00e7\u00e3o ou aquisi\u00e7\u00e3o</li> <li>Ajustes: Conforme legisla\u00e7\u00e3o espec\u00edfica</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#formatacao-de-dados","title":"Formata\u00e7\u00e3o de Dados","text":"<ul> <li>Datas: Formato \"ddMMyyyy\"</li> <li>Valores: 2 casas decimais</li> <li>CNPJ/CPF: Apenas n\u00fameros (14/11 d\u00edgitos)</li> <li>C\u00f3digos: Preenchimento com zeros \u00e0 esquerda</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra toda a gera\u00e7\u00e3o da EFD.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#geracao-por-bloco","title":"Gera\u00e7\u00e3o por Bloco","text":"<ul> <li><code>gerarAberturaBloco0()</code> - Dados iniciais da empresa</li> <li><code>gerarBlocoA()</code> - Documentos de servi\u00e7os</li> <li><code>gerarBlocoC()</code> - Documentos de mercadorias</li> <li><code>gerarBlocoD()</code> - Documentos de transporte/comunica\u00e7\u00e3o</li> <li><code>gerarBlocoF()</code> - Opera\u00e7\u00f5es diversas e cr\u00e9ditos</li> <li><code>gerarBlocoM()</code> - Apura\u00e7\u00e3o do PIS/COFINS</li> <li><code>gerarBloco1()</code> - Processos extempor\u00e2neos</li> <li><code>gerarBloco9()</code> - Encerramento</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#metodos-auxiliares","title":"M\u00e9todos Auxiliares","text":"<ul> <li><code>buscarDocumentosXXX()</code> - Consultas espec\u00edficas por bloco</li> <li><code>comporRegistroXXX()</code> - Montagem de registros</li> <li><code>formatarValor()</code> - Formata\u00e7\u00e3o de valores monet\u00e1rios</li> <li><code>selecionarCSTPis/Cofins()</code> - Defini\u00e7\u00e3o de CST</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>Arquivo Texto: - Formato delimitado por pipe (\"|\") - Codifica\u00e7\u00e3o UTF-8 - Registros conforme layout oficial - Blocos separados com totais</p> <p>Principais Registros: - 0000/0001: Abertura do arquivo e bloco - 0100: Dados do contabilista - 0140: Estabelecimentos - 0150: Participantes - 0200: Produtos/servi\u00e7os - A100/C100/D100: Documentos fiscais - F100/F120/F130: Opera\u00e7\u00f5es de cr\u00e9dito - F550: Consolida\u00e7\u00e3o para lucro presumido - 9999: Encerramento do arquivo</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios, datas e formata\u00e7\u00e3o - <code>multiorm</code> - Criteria e consultas ao banco - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.model</code> - Entidades do sistema - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>Configura\u00e7\u00f5es: - Alinhamento EFD (0051) - Vers\u00e3o do leiaute (6) - Modelos de documentos fiscais por bloco</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#otimizacoes","title":"Otimiza\u00e7\u00f5es","text":"<ul> <li>Consultas paginadas para grandes volumes</li> <li>Cache de entidades frequentemente acessadas</li> <li>Agrupamento por chaves para evitar duplicidades</li> <li>Processamento por lotes de documentos</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#tratamento-de-erros","title":"Tratamento de Erros","text":"<ul> <li>Valida\u00e7\u00e3o de dados obrigat\u00f3rios</li> <li>Tratamento de valores nulos</li> <li>Log de documentos com inconsist\u00eancias</li> <li>Interrup\u00e7\u00e3o por cancelamento do processo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute15_2021_Contribuicoes/#performance","title":"Performance","text":"<ul> <li>Uso de TableMap para agrupamentos</li> <li>Consultas espec\u00edficas por bloco</li> <li>Processamento em mem\u00f3ria com limites</li> <li>Controle de quantidade de registros</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 22/10/2025 \u00e0s 17:15 Autor: Bruno Tipo: F\u00f3rmula EFD Contribui\u00e7\u00f5es Vers\u00e3o: 1.0 Leiaute: 15/2021</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/","title":"SGT_Leiaute19_2025_ICMS_IPI","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Gerador da Escritura\u00e7\u00e3o Fiscal Digital (EFD) para ICMS e IPI conforme Leiaute 19/2025. Implementa todos os blocos e registros necess\u00e1rios para atender \u00e0s obriga\u00e7\u00f5es acess\u00f3rias fiscais.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar arquivo texto no formato EFD-ICMS/IPI contendo todas as opera\u00e7\u00f5es fiscais do per\u00edodo, incluindo documentos fiscais, apura\u00e7\u00f5es, invent\u00e1rios e demais informa\u00e7\u00f5es exigidas pela legisla\u00e7\u00e3o.</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Auditoria Fiscal</li> <li>Consultores Tribut\u00e1rios</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#parametrosconfiguracoes","title":"\u2699\ufe0f Par\u00e2metros/Configura\u00e7\u00f5es","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis dtInicial LocalDate Sim Data inicial do per\u00edodo Data no formato dd/MM/yyyy dtFinal LocalDate Sim Data final do per\u00edodo Data no formato dd/MM/yyyy arqSubstituto Integer Sim Indicador de arquivo substituto 0=Original, 1=Substituto dtInventario LocalDate N\u00e3o Data do invent\u00e1rio Data no formato dd/MM/yyyy"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#estrutura-de-blocos","title":"\ud83d\udcca Estrutura de Blocos","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-0-abertura-identificacao-e-referencias","title":"Bloco 0 - Abertura, Identifica\u00e7\u00e3o e Refer\u00eancias","text":"<ul> <li>0000: Abertura do arquivo digital</li> <li>0001: Abertura do Bloco 0</li> <li>0002: Classifica\u00e7\u00e3o do Estabelecimento Industrial</li> <li>0005: Dados Complementares da Entidade</li> <li>0015: Dados do Contribuinte Substituto</li> <li>0100: Dados do Contabilista</li> <li>0150: Tabela de Cadastro do Participante</li> <li>0190: Unidades de Medida</li> <li>0200: Identifica\u00e7\u00e3o do Item</li> <li>0300: Cadastro de Bens do CIAP</li> <li>0400: Natureza da Opera\u00e7\u00e3o/Presta\u00e7\u00e3o</li> <li>0450: Informa\u00e7\u00e3o Complementar do Documento Fiscal</li> <li>0460: Observa\u00e7\u00f5es do Lan\u00e7amento Fiscal</li> <li>0500: Plano de Contas Cont\u00e1beis</li> <li>0600: Centros de Custo</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-b-escrituracao-e-apuracao-do-iss","title":"Bloco B - Escritura\u00e7\u00e3o e Apura\u00e7\u00e3o do ISS","text":"<ul> <li>B001: Abertura do Bloco B</li> <li>B990: Encerramento do Bloco B</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-c-documentos-fiscais-i-mercadorias-icmsipi","title":"Bloco C - Documentos Fiscais I - Mercadorias (ICMS/IPI)","text":"<ul> <li>C001: Abertura do Bloco C</li> <li>C100: Nota Fiscal, Nota Fiscal Avulsa, Nota Fiscal de Produtor e NF-e</li> <li>C300: Resumo Di\u00e1rio de NFC-e</li> <li>C500: NF de Energia El\u00e9trica, \u00c1gua e G\u00e1s</li> <li>C800: Cupom Fiscal Eletr\u00f4nico - SAT</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-d-documentos-fiscais-ii-servicos-icms","title":"Bloco D - Documentos Fiscais II - Servi\u00e7os (ICMS)","text":"<ul> <li>D001: Abertura do Bloco D</li> <li>D100: Nota Fiscal de Servi\u00e7o de Transporte e Conhecimentos de Transporte</li> <li>D500: Nota Fiscal de Servi\u00e7o de Comunica\u00e7\u00e3o e Telecomunica\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-e-apuracao-do-icms-e-do-ipi","title":"Bloco E - Apura\u00e7\u00e3o do ICMS e do IPI","text":"<ul> <li>E001: Abertura do Bloco E</li> <li>E100: Per\u00edodo da Apura\u00e7\u00e3o do ICMS</li> <li>E110: Apura\u00e7\u00e3o do ICMS - Opera\u00e7\u00f5es Pr\u00f3prias</li> <li>E200: Apura\u00e7\u00e3o do ICMS - Substitui\u00e7\u00e3o Tribut\u00e1ria</li> <li>E300: Apura\u00e7\u00e3o do ICMS Diferencial de Al\u00edquota</li> <li>E500: Apura\u00e7\u00e3o do IPI</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-g-ciap-controle-de-credito-de-icms-do-ativo-permanente","title":"Bloco G - CIAP (Controle de Cr\u00e9dito de ICMS do Ativo Permanente)","text":"<ul> <li>G001: Abertura do Bloco G</li> <li>G110: ICMS - Ativo Permanente - CIAP</li> <li>G125: Movimenta\u00e7\u00e3o de Bem ou Componente do Ativo Imobilizado</li> <li>G130: Identifica\u00e7\u00e3o do Documento Fiscal</li> <li>G140: Identifica\u00e7\u00e3o do Item do Documento Fiscal</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-h-inventario-fisico","title":"Bloco H - Invent\u00e1rio F\u00edsico","text":"<ul> <li>H001: Abertura do Bloco H</li> <li>H005: Totais do Invent\u00e1rio</li> <li>H010: Invent\u00e1rio</li> <li>H020: Informa\u00e7\u00e3o Complementar do Invent\u00e1rio</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-k-controle-da-producao-e-estoque","title":"Bloco K - Controle da Produ\u00e7\u00e3o e Estoque","text":"<ul> <li>K001: Abertura do Bloco K</li> <li>K100: Per\u00edodo de Apura\u00e7\u00e3o</li> <li>K200: Estoque Escriturado</li> <li>K220: Outras Movimenta\u00e7\u00f5es Internas</li> <li>K230: Itens Produzidos</li> <li>K250: Industrializa\u00e7\u00e3o por Terceiros</li> <li>K270: Corre\u00e7\u00e3o de Apontamento</li> <li>K290: Produ\u00e7\u00e3o Conjunta</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-1-outras-informacoes","title":"Bloco 1 - Outras Informa\u00e7\u00f5es","text":"<ul> <li>1001: Abertura do Bloco 1</li> <li>1010: Obrigatoriedade de Registros</li> <li>1100: Informa\u00e7\u00f5es sobre Exporta\u00e7\u00e3o</li> <li>1400: Informa\u00e7\u00e3o sobre Valores Agregados</li> <li>1601: Opera\u00e7\u00f5es com Instrumentos de Pagamento Eletr\u00f4nico</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#bloco-9-controle-e-encerramento","title":"Bloco 9 - Controle e Encerramento","text":"<ul> <li>9001: Abertura do Bloco 9</li> <li>9900: Registros do Arquivo</li> <li>9990: Encerramento do Bloco 9</li> <li>9999: Encerramento do Arquivo Digital</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica datas do per\u00edodo</li> <li>Valida dados da empresa</li> <li> <p>Configura alinhamentos fiscais</p> </li> <li> <p>Inicializa\u00e7\u00e3o</p> </li> <li>Cria arquivos texto de sa\u00edda</li> <li>Inicializa contadores de registros</li> <li> <p>Prepara estruturas de dados</p> </li> <li> <p>Gera\u00e7\u00e3o dos Blocos</p> </li> <li>Bloco 0: Dados da empresa e cadastros</li> <li>Bloco B: ISS (quando aplic\u00e1vel)</li> <li>Bloco C: Documentos fiscais de mercadorias</li> <li>Bloco D: Documentos fiscais de servi\u00e7os</li> <li>Bloco E: Apura\u00e7\u00f5es de impostos</li> <li>Bloco G: CIAP</li> <li>Bloco H: Invent\u00e1rio</li> <li>Bloco K: Controle de produ\u00e7\u00e3o</li> <li> <p>Bloco 1: Informa\u00e7\u00f5es complementares</p> </li> <li> <p>Finaliza\u00e7\u00e3o</p> </li> <li>Gera totais e encerramentos</li> <li>Consolida arquivo final</li> <li>Atualiza controles de envio</li> </ol>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#validacoes-obrigatorias","title":"Valida\u00e7\u00f5es Obrigat\u00f3rias","text":"<ul> <li>Empresa deve ter munic\u00edpio cadastrado</li> <li>Informa\u00e7\u00f5es fiscais devem estar completas</li> <li>Perfil da empresa deve ser definido</li> <li>Apura\u00e7\u00f5es do per\u00edodo devem existir</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#tratamento-de-documentos","title":"Tratamento de Documentos","text":"<ul> <li>Considera documentos com data de entrada/sa\u00edda no per\u00edodo</li> <li>Aplica filtros por modelo de documento</li> <li>Trata documentos cancelados adequadamente</li> <li>Processa apenas documentos marcados para EFD</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Campos fiscais s\u00e3o obtidos do JSON do documento</li> <li>Valores s\u00e3o formatados com precis\u00e3o espec\u00edfica por registro</li> <li>CSTs e CFOPs s\u00e3o validados e formatados</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#perfis-de-apuracao","title":"Perfis de Apura\u00e7\u00e3o","text":"<ul> <li>Perfil A: Ind\u00fastria e equiparado</li> <li>Perfil B: Com\u00e9rcio</li> <li>Perfil C: Prestador de servi\u00e7os</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#saidasretornos","title":"\ud83c\udfa8 Sa\u00eddas/Retornos","text":"Tipo Descri\u00e7\u00e3o Formato Arquivo EFD Arquivo texto com todos os blocos Texto delimitado por pipe Log de Processamento Contadores e status Console/Interface"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios gerais - <code>java.time</code> - Manipula\u00e7\u00e3o de datas - <code>jasperreports</code> - Relat\u00f3rios (n\u00e3o utilizado neste c\u00f3digo)</p> <p>Entidades do Sistema: - <code>Eaa01</code> - Documentos fiscais - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes/fornecedores) - <code>Abm01</code> - Itens (produtos/servi\u00e7os) - <code>Edb01</code> - Apura\u00e7\u00f5es fiscais - <code>Ecc01</code> - Fichas CIAP</p>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#performance","title":"Performance","text":"<ul> <li>Utiliza pagina\u00e7\u00e3o na consulta de documentos</li> <li>Implementa cache de entidades para evitar consultas repetidas</li> <li>Otimiza processamento com estruturas Map e Set</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#tratamento-de-dados","title":"Tratamento de Dados","text":"<ul> <li>Campos JSON s\u00e3o acessados dinamicamente via <code>jGet()</code></li> <li>Formata\u00e7\u00e3o espec\u00edfica para cada tipo de campo</li> <li>Normaliza\u00e7\u00e3o de textos para remover acentos</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#controles","title":"Controles","text":"<ul> <li>Contadores individuais por tipo de registro</li> <li>Verifica\u00e7\u00e3o de cancelamento do processo</li> <li>Atualiza\u00e7\u00e3o de status durante execu\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/formulas/sgt/SGT_Leiaute19_2025_ICMS_IPI/#validacoes-especificas","title":"Valida\u00e7\u00f5es Espec\u00edficas","text":"<ul> <li>Regime especial de apura\u00e7\u00e3o</li> <li>Opera\u00e7\u00f5es com diferencial de al\u00edquota</li> <li>Documentos de exporta\u00e7\u00e3o</li> <li>Industrializa\u00e7\u00e3o por terceiros</li> </ul> <p>\u00daltima Atualiza\u00e7\u00e3o: 07/11/2025 Vers\u00e3o do Leiaute: 19</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF_ImportarXMLNFeEntrada.md","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de importa\u00e7\u00e3o de XML de Nota Fiscal Eletr\u00f4nica (NF-e) para documentos de entrada, respons\u00e1vel por extrair e processar todos os dados fiscais, tribut\u00e1rios e comerciais do arquivo XML.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de importa\u00e7\u00e3o de dados fiscais de NF-e de entrada, garantindo a correta extra\u00e7\u00e3o e mapeamento de informa\u00e7\u00f5es tribut\u00e1rias, valores, produtos e dados complementares para o sistema.</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Compras</li> <li>Almoxarifado/Estoque</li> <li>Contabilidade</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_ImportarXMLNFeEntrada</code> - Processamento de XML NF-e entrada</p> <p>Localiza\u00e7\u00e3o: <code>eltech/formulas/srf/</code></p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens do documento - <code>EAA01038</code> - Controle de lotes/s\u00e9ries - <code>EAA0113</code> - Duplicatas - <code>EAA01033</code> - Itens referenciados</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documento fiscal - <code>Eaa0103</code> - Item do documento - <code>ElementXml</code> - Parser de XML</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01 Eaa01 Sim Documento fiscal a ser processado elementXmlNfe ElementXml Sim Estrutura XML da NF-e a ser importada"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Verifica estrutura do XML (nfeProc &gt; NFe &gt; infNFe)</li> <li> <p>Valida n\u00f3 principal do documento fiscal</p> </li> <li> <p>Processamento de Itens</p> </li> <li>Percorre todos os itens (det) do XML</li> <li>Busca item correspondente no documento por n\u00famero de sequ\u00eancia</li> <li> <p>Processa dados b\u00e1sicos do produto (NCM, unidade tribut\u00e1ria)</p> </li> <li> <p>Extra\u00e7\u00e3o de Dados Tribut\u00e1rios</p> </li> <li>ICMS: Todos os grupos (00, 10, 20, 30, 40, 51, 60, 70, 90, Part, ST, SN)</li> <li>IPI: Dados de impostos sobre produtos industrializados</li> <li>PIS/COFINS: Tributos federais normal e ST</li> <li>II: Imposto de importa\u00e7\u00e3o</li> <li> <p>ISSQN: Imposto sobre servi\u00e7os</p> </li> <li> <p>Controle de Lotes e S\u00e9ries</p> </li> <li>Processa informa\u00e7\u00f5es de rastreamento (rastro)</li> <li>Aplica fatores de convers\u00e3o de unidades</li> <li> <p>Define status e controles conforme configura\u00e7\u00e3o do PCD</p> </li> <li> <p>Dados Complementares</p> </li> <li>Totais da NF-e (valores, impostos consolidados)</li> <li>Informa\u00e7\u00f5es de transporte (volumes, pesos)</li> <li>Observa\u00e7\u00f5es fiscais e complementares</li> <li>Duplicatas (quando aplic\u00e1vel)</li> </ol>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#validacoes-de-estrutura","title":"Valida\u00e7\u00f5es de Estrutura","text":"<ul> <li>XML deve conter estrutura nfeProc &gt; NFe &gt; infNFe</li> <li>Itens devem corresponder sequencialmente aos itens do documento</li> <li>Campos num\u00e9ricos s\u00e3o convertidos com casas decimais espec\u00edficas</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#processamento-de-tributos","title":"Processamento de Tributos","text":"<ul> <li>ICMS: Suporte a todos os CSTs (00, 10, 20, 30, 40, 51, 60, 70, 90)</li> <li>IPI: Tratamento para c\u00e1lculos por al\u00edquota e por unidade</li> <li>PIS/COFINS: Diferencia\u00e7\u00e3o entre regime cumulativo e n\u00e3o-cumulativo</li> <li>Substitui\u00e7\u00e3o Tribut\u00e1ria: C\u00e1lculos de MVA, redu\u00e7\u00f5es e bases</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#controle-de-estoques","title":"Controle de Estoques","text":"<ul> <li>Aplica\u00e7\u00e3o autom\u00e1tica de fatores de convers\u00e3o</li> <li>Defini\u00e7\u00e3o de status conforme configura\u00e7\u00e3o do PCD</li> <li>Controles espec\u00edficos para opera\u00e7\u00f5es com estoque</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#referencias-e-relacionamentos","title":"Refer\u00eancias e Relacionamentos","text":"<ul> <li>Vincula\u00e7\u00e3o autom\u00e1tica de NF-e referenciadas</li> <li>Processamento de duplicatas para documentos financeiros</li> <li>Mapeamento de observa\u00e7\u00f5es fiscais e complementares</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo eaa01 Documento fiscal com dados importados Eaa01"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>br.com.multitec.utils.xml</code> - Processamento de XML - <code>sam.model.entities</code> - Entidades do sistema</p> <p>Estruturas de Dados: - <code>ElementXml</code> - Parser e navega\u00e7\u00e3o de XML - <code>TableMap</code> - Armazenamento de dados JSON</p>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, execu\u00e7\u00e3o completa do XML</li> <li>Performance: Processamento otimizado por lotes de itens</li> <li>Flexibilidade: Suporte a m\u00faltiplos regimes tribut\u00e1rios</li> <li>Precis\u00e3o: Arredondamentos espec\u00edficos por tipo de campo</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#mapeamento-de-campos-xml","title":"Mapeamento de Campos XML","text":"<ul> <li>Produtos: NCM, unidades, quantidades, valores</li> <li>Tributos: Bases de c\u00e1lculo, al\u00edquotas, valores</li> <li>Transporte: Volumes, pesos l\u00edquido e bruto</li> <li>Complementares: Observa\u00e7\u00f5es, protocolos, chaves de acesso</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#tratamento-de-dados","title":"Tratamento de Dados","text":"<ul> <li>Convers\u00e3o autom\u00e1tica de datas e valores</li> <li>Aplica\u00e7\u00e3o de fatores de convers\u00e3o de unidades</li> <li>Valida\u00e7\u00e3o de consist\u00eancia de dados</li> <li>Preserva\u00e7\u00e3o de dados originais do XML</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_EnviarEmailsNFe/#integracao-com-sistema","title":"Integra\u00e7\u00e3o com Sistema","text":"<ul> <li>Atualiza\u00e7\u00e3o em tempo real do documento fiscal</li> <li>Manuten\u00e7\u00e3o de relacionamentos entre entidades</li> <li>Suporte a opera\u00e7\u00f5es de entrada com estoque</li> <li>Compatibilidade com diferentes tipos de PCD</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/","title":"SRF_GerarXMLNfe - Gera\u00e7\u00e3o de XML para Nota Fiscal Eletr\u00f4nica","text":""},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Classe respons\u00e1vel pela gera\u00e7\u00e3o do arquivo XML da Nota Fiscal Eletr\u00f4nica (NFe) seguindo o layout oficial da SEFAZ, com suporte para diferentes modelos (55, 65), regimes tribut\u00e1rios e opera\u00e7\u00f5es espec\u00edficas.</p>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar XML v\u00e1lido para NFe contendo todas as informa\u00e7\u00f5es fiscais, tribut\u00e1rias e comerciais necess\u00e1rias para transmiss\u00e3o \u00e0 SEFAZ, incluindo dados do emitente, destinat\u00e1rio, produtos, impostos e informa\u00e7\u00f5es adicionais.</p>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Desenvolvedores do sistema</li> <li>Integradores de sistemas fiscais</li> <li>Administradores do SAM</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01 Eaa01 Sim Documento fiscal a ser processado formaEmis Integer Sim Forma de emiss\u00e3o (1=Normal, 2=Conting\u00eancia) contDt LocalDate N\u00e3o Data de conting\u00eancia contHr LocalTime N\u00e3o Hora de conting\u00eancia contJust String N\u00e3o Justificativa da conting\u00eancia empresa Aac10 Sim Empresa emitente"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#estrutura-de-dados-principais","title":"\ud83d\udccb Estrutura de Dados Principais","text":""},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#entidades-envolvidas","title":"Entidades Envolvidas:","text":"<ul> <li>Eaa01 - Documento fiscal</li> <li>Abb01 - Cabe\u00e7alho do documento</li> <li>Eaa0102 - Dados gerais do documento</li> <li>Eaa0103 - Itens do documento</li> <li>Eaa0101 - Endere\u00e7os do documento</li> <li>Aac10 - Empresa emitente</li> <li>Abe01 - Entidades (clientes/fornecedores)</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#campos-xml-gerados","title":"Campos XML Gerados:","text":"<ul> <li>Identifica\u00e7\u00e3o (ide)</li> <li>Emitente (emit)</li> <li>Destinat\u00e1rio (dest)</li> <li>Produtos/Servi\u00e7os (det)</li> <li>Impostos (ICMS, IPI, PIS, COFINS, ISSQN)</li> <li>Transporte (transp)</li> <li>Cobran\u00e7a (cobr)</li> <li>Informa\u00e7\u00f5es adicionais (infAdic)</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#1-inicializacao-e-validacao","title":"1. Inicializa\u00e7\u00e3o e Valida\u00e7\u00e3o","text":"<ul> <li>Carrega dados do documento e empresa</li> <li>Valida dados obrigat\u00f3rios</li> <li>Seleciona alinhamento conforme regime tribut\u00e1rio</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#2-geracao-da-chave-de-acesso","title":"2. Gera\u00e7\u00e3o da Chave de Acesso","text":"<ul> <li>Calcula c\u00f3digo num\u00e9rico (cNF)</li> <li>Gera chave de acesso \u00fanica</li> <li>Define ambiente (produ\u00e7\u00e3o/homologa\u00e7\u00e3o)</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#3-construcao-da-estrutura-xml","title":"3. Constru\u00e7\u00e3o da Estrutura XML","text":"<ul> <li>Cria elemento raiz NFe</li> <li>Monta estrutura hier\u00e1rquica do XML</li> <li>Aplica formata\u00e7\u00e3o e caracteres especiais</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#4-preenchimento-das-secoes","title":"4. Preenchimento das Se\u00e7\u00f5es","text":"<ul> <li>Identifica\u00e7\u00e3o: dados b\u00e1sicos da NF</li> <li>Emitente: dados da empresa</li> <li>Destinat\u00e1rio: dados do cliente</li> <li>Produtos: itens com impostos</li> <li>Totais: valores consolidados</li> <li>Transporte: dados de frete</li> <li>Pagamento: formas de pagamento</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#5-validacao-final-e-saida","title":"5. Valida\u00e7\u00e3o Final e Sa\u00edda","text":"<ul> <li>Valida consist\u00eancia dos dados</li> <li>Gera XML final</li> <li>Retorna chave e dados para assinatura</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#validacoes-obrigatorias","title":"Valida\u00e7\u00f5es Obrigat\u00f3rias:","text":"<ul> <li>Dados completos da empresa emitente</li> <li>Informa\u00e7\u00f5es fiscais do destinat\u00e1rio</li> <li>CFOP v\u00e1lido para cada item</li> <li>CST/CSOSN conforme regime tribut\u00e1rio</li> <li>Dados de transporte quando aplic\u00e1vel</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#regimes-tributarios","title":"Regimes Tribut\u00e1rios:","text":"<ul> <li>Simples Nacional: Usa CSOSN e alinhamento 0009</li> <li>Outros Regimes: Usa CST e alinhamento 0010</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o:","text":"<ul> <li>Opera\u00e7\u00f5es internas (CFOP 1xxx, 5xxx)</li> <li>Opera\u00e7\u00f5es interestaduais (CFOP 2xxx, 6xxx)</li> <li>Opera\u00e7\u00f5es com exterior (CFOP 3xxx)</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#calculos-automaticos","title":"C\u00e1lculos Autom\u00e1ticos:","text":"<ul> <li>Valores de impostos (ICMS, IPI, PIS, COFINS)</li> <li>Base de c\u00e1lculo e aliquotas</li> <li>Totais da nota fiscal</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Formato Descri\u00e7\u00e3o Estrutura XML Arquivo XML da NFe Layout 4.00 da SEFAZ Chave Chave de acesso 44 d\u00edgitos Dados XML pronto Para assinatura digital"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":""},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#bibliotecas","title":"Bibliotecas:","text":"<ul> <li><code>multitec.utils</code> - Utilit\u00e1rios e datas</li> <li><code>java.time</code> - Manipula\u00e7\u00e3o de datas</li> <li><code>br.com.multiorm</code> - Acesso a dados</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#configuracoes","title":"Configura\u00e7\u00f5es:","text":"<ul> <li>Templates de alinhamento (0009, 0010)</li> <li>Par\u00e2metros do sistema (NFeDataProducao)</li> <li>Certificado digital (para assinatura)</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#estrutura-xml","title":"Estrutura XML:","text":"<ul> <li>Segue padr\u00e3o oficial da SEFAZ</li> <li>Namespace: http://www.portalfiscal.inf.br/nfe</li> <li>Vers\u00e3o do layout: 4.00</li> <li>Codifica\u00e7\u00e3o UTF-8</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#tratamento-de-dados","title":"Tratamento de Dados:","text":"<ul> <li>Substitui\u00e7\u00e3o de caracteres especiais</li> <li>Formata\u00e7\u00e3o de valores decimais</li> <li>Valida\u00e7\u00e3o de tamanhos de campos</li> <li>Ajuste de timezone para datas</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#performance","title":"Performance:","text":"<ul> <li>Uso de TableMap para dados JSON</li> <li>Consultas otimizadas ao banco</li> <li>Processamento em lote para itens</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#validacoes","title":"Valida\u00e7\u00f5es:","text":"<ul> <li>MultiValidationException para erros</li> <li>Verifica\u00e7\u00e3o de consist\u00eancia fiscal</li> <li>Valida\u00e7\u00e3o de documentos referenciados</li> </ul>"},{"location":"ELTECH/formulas/srf/SRF_GerarXMLNfe/#suporte-a-cenarios-especiais","title":"Suporte a Cen\u00e1rios Especiais:","text":"<ul> <li>Conting\u00eancia offline</li> <li>Exporta\u00e7\u00e3o</li> <li>Importa\u00e7\u00e3o com DI</li> <li>Combust\u00edveis (ANP)</li> <li>Rastreabilidade</li> <li>Devolu\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/","title":"SAP Resumo Deprecia\u00e7\u00e3o por Departamento","text":""},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio que apresenta o resumo da deprecia\u00e7\u00e3o patrimonial agrupado por departamentos/classifica\u00e7\u00f5es patrimoniais da empresa El Tech.</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Controlar e analisar a deprecia\u00e7\u00e3o de ativos imobilizados por centro de custo/departamento, permitindo acompanhar: - Saldo anterior de deprecia\u00e7\u00e3o - Deprecia\u00e7\u00e3o do per\u00edodo atual - Baixas de ativos - Transfer\u00eancias entre departamentos - Saldo atual acumulado</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Contabilidade</li> <li>Gestores Patrimoniais</li> <li>Controladoria</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABB11</code> - Departamentos/Centro de Custos - <code>ECB01</code> - Imobilizados - <code>ECB0101</code> - Reclassifica\u00e7\u00f5es de Imobilizados - <code>ECB0102</code> - Deprecia\u00e7\u00e3o Mensal - <code>ABB20</code> - Bens Patrimoniais - <code>ABA01</code> - Par\u00e2metros do Sistema</p> <p>Entidades Envolvidas: - <code>Abb11</code> - Departamento - <code>Ecb01</code> - Imobilizado - <code>Ecb0101</code> - Reclassifica\u00e7\u00e3o - <code>Ecb0102</code> - Deprecia\u00e7\u00e3o - <code>Aba01</code> - Par\u00e2metro</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis dtReferencia String Sim M\u00eas/Ano de refer\u00eancia Formato MM/yyyy imprimir Integer Sim Tipo de sa\u00edda 0=PDF, 1=XLSX"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo F\u00f3rmula C\u00f3digo C\u00f3digo do departamento String - Nome Nome do departamento String - Saldo Anterior Saldo depreciado acumulado anterior BigDecimal <code>buscaSaldo(dataRef-1)</code> Deprecia\u00e7\u00e3o Deprecia\u00e7\u00e3o do m\u00eas atual BigDecimal <code>buscaDepreciacao(dataRef)</code> Baixas Baixas de ativos no per\u00edodo BigDecimal <code>buscaBaixas(dataRef)</code> Saldo Atual Saldo depreciado acumulado atual BigDecimal <code>buscaSaldo(dataRef)</code> Transfer\u00eancias Varia\u00e7\u00e3o por transfer\u00eancias BigDecimal <code>saldoAtual - saldoAnterior - deprec + baixas</code>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Estrutura</li> <li>Busca par\u00e2metro <code>ABB11-ESTRCODDEPTO</code> para estrutura de c\u00f3digos</li> <li> <p>Valida exist\u00eancia de pelo menos 2 grupos na estrutura</p> </li> <li> <p>Processamento de Reclassifica\u00e7\u00f5es</p> </li> <li>Identifica \u00faltima reclassifica\u00e7\u00e3o por imobilizado at\u00e9 a data de refer\u00eancia</li> <li> <p>Mapeia imobilizados por departamento considerando reclassifica\u00e7\u00f5es</p> </li> <li> <p>C\u00e1lculo de Valores</p> </li> <li>Busca departamentos ativos</li> <li>Calcula saldos anteriores e atuais</li> <li>Calcula deprecia\u00e7\u00e3o do per\u00edodo</li> <li>Identifica baixas de ativos</li> <li> <p>Calcula transfer\u00eancias entre departamentos</p> </li> <li> <p>Consolida\u00e7\u00e3o Hier\u00e1rquica</p> </li> <li>Soma valores dos n\u00edveis inferiores para superiores baseado na estrutura de c\u00f3digos</li> <li>Filtra registros com valores zerados</li> </ol>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Estrutura de c\u00f3digos deve ter pelo menos 2 grupos</li> <li>Data de refer\u00eancia obrigat\u00f3ria</li> <li>Considera apenas imobilizados ativos (n\u00e3o baixados)</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#calculos","title":"C\u00e1lculos","text":"<ul> <li>Saldo Anterior: Soma deprecia\u00e7\u00e3o acumulada at\u00e9 m\u00eas anterior</li> <li>Deprecia\u00e7\u00e3o: Valor depreciado no m\u00eas atual</li> <li>Baixas: Deprecia\u00e7\u00e3o de ativos baixados no per\u00edodo</li> <li>Transfer\u00eancias: Diferen\u00e7a entre varia\u00e7\u00e3o do saldo e movimenta\u00e7\u00f5es conhecidas</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#filtros","title":"Filtros","text":"<ul> <li>Aplica <code>getSamWhere()</code> para filtros padr\u00e3o do sistema</li> <li>Considera apenas departamentos com movimenta\u00e7\u00e3o no per\u00edodo</li> </ul>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado para visualiza\u00e7\u00e3o <code>gerarPDF()</code> XLSX Planilha para an\u00e1lise e exporta\u00e7\u00e3o <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e queries - <code>multitec.utils</code> - Utilit\u00e1rios (DateUtils, StringUtils, Utils) - <code>sam.core</code> - Core do sistema SAM - <code>sam.model</code> - Entidades do sistema</p> <p>Par\u00e2metros do Sistema: - <code>ABB11-ESTRCODDEPTO</code> - Estrutura de codifica\u00e7\u00e3o de departamentos</p>"},{"location":"ELTECH/relatorios/sap/SAP_Resumo_Deprecia%C3%A7%C3%A3o_por_Departamento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza recursividade para processar estrutura hier\u00e1rquica</li> <li>Considera reclassifica\u00e7\u00f5es hist\u00f3ricas de imobilizados</li> <li>Otimizado com consultas SQL nativas para performance</li> <li>Filtra automaticamente registros com todos valores zerados</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/","title":"SCF_CaixaFinanceiro.md","text":""},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de relat\u00f3rio de Caixa Financeiro que apresenta o fluxo de movimenta\u00e7\u00f5es financeiras por conta corrente, com c\u00e1lculo de saldos e suporte a diferentes formas de visualiza\u00e7\u00e3o.</p>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar relat\u00f3rio consolidado das movimenta\u00e7\u00f5es financeiras, permitindo acompanhamento do saldo por conta corrente, com op\u00e7\u00f5es de visualiza\u00e7\u00e3o por natureza financeira e exporta\u00e7\u00e3o em diferentes formatos.</p>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Gestores</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Relat\u00f3rio <code>SCF_CaixaFinanceiro</code> - Vers\u00e3o PDF - Relat\u00f3rio <code>SCF_LancamentosXLS</code> - Vers\u00e3o Excel</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/scf/</code></p>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAB10</code> - Lan\u00e7amentos financeiros - <code>DAB01</code> - Contas correntes - <code>DAB1002</code> - Rateio por conta corrente - <code>DAB1001</code> - Departamentos - <code>DAB10011</code> - Naturezas financeiras - <code>DAB0101</code> - Saldos mensais - <code>ABF10</code> - Naturezas</p> <p>Entidades Envolvidas: - <code>Dab10</code> - Lan\u00e7amento financeiro - <code>Dab01</code> - Conta corrente - <code>Dab1002</code> - Rateio financeiro - <code>Abf10</code> - Natureza financeira</p>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o contaCorrente List N\u00e3o Filtro por contas correntes espec\u00edficas periodo LocalDate[] Sim Per\u00edodo de an\u00e1lise (data inicial e final) imprimir Integer Sim Formato de sa\u00edda (0=XLSX, 1=PDF) isSaltarPagina Boolean N\u00e3o Controla quebra de p\u00e1gina por conta no PDF isNatureza Boolean N\u00e3o Agrupa por natureza financeira quando true"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define par\u00e2metros padr\u00e3o (m\u00eas corrente)</li> <li>Configura t\u00edtulo e informa\u00e7\u00f5es da empresa</li> <li> <p>Prepara formata\u00e7\u00e3o do per\u00edodo</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta lan\u00e7amentos financeiros no per\u00edodo</li> <li>Aplica filtros por conta corrente</li> <li> <p>Op\u00e7\u00e3o de agrupamento por natureza</p> </li> <li> <p>C\u00e1lculo de Saldos</p> </li> <li>Busca saldo inicial do per\u00edodo</li> <li>Calcula entradas e sa\u00eddas acumuladas</li> <li> <p>Atualiza saldo a cada movimenta\u00e7\u00e3o</p> </li> <li> <p>Processamento por Conta</p> </li> <li>Agrupa movimenta\u00e7\u00f5es por conta corrente</li> <li>Calcula saldo individual por conta</li> <li> <p>Mant\u00e9m sequ\u00eancia por c\u00f3digo de conta</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>PDF: Relat\u00f3rio formatado com quebras de p\u00e1gina</li> <li>XLSX: Planilha export\u00e1vel para an\u00e1lise</li> </ol>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#calculo-de-saldos","title":"C\u00e1lculo de Saldos","text":"<ul> <li>Saldo Inicial: \u00daltimo saldo conhecido antes do per\u00edodo</li> <li>Entradas: Movimenta\u00e7\u00f5es com dab10mov = 0</li> <li>Sa\u00eddas: Movimenta\u00e7\u00f5es com dab10mov = 1</li> <li>Saldo Atual: Saldo anterior + entradas - sa\u00eddas</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#agrupamento-de-dados","title":"Agrupamento de Dados","text":"<ul> <li>Por Natureza: Quando isNatureza = true, usa valores de Dab10011</li> <li>Sem Natureza: Quando isNatureza = false, usa valores de Dab1002</li> <li>Ordena\u00e7\u00e3o: Por c\u00f3digo da conta e data do lan\u00e7amento</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#validacoes-de-periodo","title":"Valida\u00e7\u00f5es de Per\u00edodo","text":"<ul> <li>Per\u00edodo \u00e9 obrigat\u00f3rio</li> <li>Data final n\u00e3o pode ser anterior \u00e0 data inicial</li> <li>Suporte a per\u00edodos que cruzam anos diferentes</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#formatacao-de-saida","title":"Formata\u00e7\u00e3o de Sa\u00edda","text":"<ul> <li>PDF: Layout otimizado para impress\u00e3o, com quebras opcionais</li> <li>XLSX: Estrutura tabular para an\u00e1lise em planilhas</li> <li>Ambos incluem cabe\u00e7alho com empresa e per\u00edodo</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo Relat\u00f3rio PDF Caixa Financeiro formatado DadosParaDownload Planilha XLSX Dados em formato Excel DadosParaDownload"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>JasperReports</code> - Gera\u00e7\u00e3o de relat\u00f3rios PDF - <code>Apache POI</code> - Exporta\u00e7\u00e3o para Excel - <code>multiorm</code> - Persist\u00eancia e consultas</p> <p>Servi\u00e7os: - <code>DateUtils</code> - Manipula\u00e7\u00e3o de datas e per\u00edodos</p>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Performance: Consultas SQL otimizadas com joins</li> <li>Escalabilidade: Suporte a grandes volumes de lan\u00e7amentos</li> <li>Flexibilidade: M\u00faltiplas formas de agrupamento e filtro</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#calculo-de-saldo-inicial","title":"C\u00e1lculo de Saldo Inicial","text":"<ul> <li>Busca recursiva por saldos anteriores quando necess\u00e1rio</li> <li>Considera movimenta\u00e7\u00f5es do in\u00edcio do m\u00eas at\u00e9 o dia anterior</li> <li>Suporte a contas sem hist\u00f3rico pr\u00e9vio</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#tratamento-de-dados","title":"Tratamento de Dados","text":"<ul> <li>Normaliza\u00e7\u00e3o de valores nulos para zero</li> <li>Formata\u00e7\u00e3o de datas no padr\u00e3o brasileiro</li> <li>Ordena\u00e7\u00e3o consistente por conta e data</li> <li>C\u00e1lculo incremental de saldos</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_CaixaFinanceiro/#personalizacao-de-relatorio","title":"Personaliza\u00e7\u00e3o de Relat\u00f3rio","text":"<ul> <li>T\u00edtulo din\u00e2mico com nome da empresa</li> <li>Per\u00edodo formatado no cabe\u00e7alho</li> <li>Op\u00e7\u00e3o de quebra de p\u00e1gina por conta</li> <li>Suporte a diferentes n\u00edveis de detalhe</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/","title":"SCF Extrato Cont\u00e1bil","text":"<p>]# SCF - Extrato Cont\u00e1bil</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de extrato cont\u00e1bil para documentos a receber e a pagar, com op\u00e7\u00f5es de visualiza\u00e7\u00e3o por diferentes crit\u00e9rios, exporta\u00e7\u00e3o para m\u00faltiplos formatos e filtro por PLF (Parametro e Lan\u00e7amento Fiscal).</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer uma vis\u00e3o consolidada da situa\u00e7\u00e3o financeira da empresa, permitindo an\u00e1lise de contas a receber/pagar por diversos filtros e per\u00edodos, com c\u00e1lculo autom\u00e1tico de juros, multas e encargos.</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Gestores Financeiros</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA01</code> - Documentos a receber/pagar - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades (clientes/fornecedores) - <code>ABC10</code> - Plano de contas cont\u00e1bil - <code>ABF15</code> - Portadores - <code>AAH01</code> - Tipos de documento - <code>AAC10</code> - Empresas - <code>DAB10</code> - Hist\u00f3ricos de documentos - <code>DAA0103</code> - Itens de documentos financeiros - <code>ABF20</code> - PLF (Parametro e Lan\u00e7amento Fiscal).</p> <p>Entidades Envolvidas: - <code>Daa01</code> - Documentos financeiros - <code>Abe01</code> - Clientes/Fornecedores - <code>Aac10</code> - Empresa - <code>Abf15</code> - Portador - <code>Abc10</code> - Conta cont\u00e1bil - <code>Abf20</code> - PLF</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis classe Integer Sim Tipo de documento 0=A receber, 1=A pagar ordem Integer Sim Ordena\u00e7\u00e3o 0=C\u00f3digo entidade, 1=Nome entidade exportar Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX tp Integer Sim Tipo de registro 0=Todos, 1=Reais numeroInicial Integer N\u00e3o N\u00famero documento inicial 000000000 numeroFinal Integer N\u00e3o N\u00famero documento final 999999999 port List N\u00e3o Portadores espec\u00edficos IDs portadores documento List N\u00e3o Tipos documento IDs tipos documento entInicial String N\u00e3o C\u00f3digo entidade inicial C\u00f3digo inicial entFinal String N\u00e3o C\u00f3digo entidade final C\u00f3digo final emps List N\u00e3o Empresas espec\u00edficas IDs empresas dataPer LocalDate[] Sim Per\u00edodo de an\u00e1lise Data inicial e final op Integer Sim Layout do relat\u00f3rio 0=Padr\u00e3o, 1=Alternativo opEnt Integer Sim Nome entidade 0=Nome reduzido, 1=Nome completo plf List N\u00e3o PLFs a desconsiderar IDs PLFs"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo ent_cod C\u00f3digo da entidade String ent_nome Nome da entidade String contabil Conta cont\u00e1bil String dt_emis Data emiss\u00e3o Date tp Tipo documento String doc_num N\u00famero documento Integer dt_vcto Data vencimento Date dt_baixa Data baixa Date portador Nome portador String aRealizar Valor a realizar BigDecimal realizado Valor realizado BigDecimal jme Juros/Multas/Encargos BigDecimal"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Define classe (receber/pagar)</li> <li>Configura ordena\u00e7\u00e3o e formata\u00e7\u00e3o</li> <li> <p>Processa filtros de empresas e entidades</p> </li> <li> <p>Constru\u00e7\u00e3o da Consulta</p> </li> <li>Monta SQL din\u00e2mico com filtros aplicados</li> <li>Define joins espec\u00edficos por classe</li> <li> <p>Aplica filtro de PLF quando informado</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta documentos no per\u00edodo</li> <li>Considera apenas \u00faltimo item por documento</li> <li> <p>Calcula campos financeiros (JME)</p> </li> <li> <p>Ajuste de Per\u00edodo</p> </li> <li>Separa valores realizados e a realizar</li> <li>Filtra documentos fora do per\u00edodo</li> <li> <p>Calcula totais de juros, multas e encargos</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Seleciona template conforme layout</li> <li>Exporta para PDF ou XLSX</li> <li>Formata dados para visualiza\u00e7\u00e3o</li> </ol>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#filtros-de-periodo","title":"Filtros de Per\u00edodo","text":"<ul> <li>Considera documentos com data de liquida\u00e7\u00e3o dentro do per\u00edodo</li> <li>Inclui documentos em aberto com vencimento no per\u00edodo</li> <li>Exclui documentos emitidos ap\u00f3s o per\u00edodo final</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>JME: Soma de juros, multas e encargos</li> <li>A Realizar: Valores em aberto no per\u00edodo</li> <li>Realizado: Valores liquidados no per\u00edodo</li> <li>Descontos zerados para valores realizados</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#classificacao","title":"Classifica\u00e7\u00e3o","text":"<ul> <li>Classe 0 (Receber): Join com <code>Abe02</code> e <code>Abe0201</code></li> <li>Classe 1 (Pagar): Join com <code>Abe03</code> e <code>Abe0301</code></li> <li>Conta cont\u00e1bil da primeira sequ\u00eancia</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#filtro-plf","title":"Filtro PLF","text":"<ul> <li>Exclui documentos vinculados aos PLFs informados</li> <li>Considera apenas o \u00faltimo item por documento</li> </ul>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o Template M\u00e9todo PDF Layout padr\u00e3o <code>SCF_ExtratoContabil</code> <code>gerarPDF()</code> PDF Layout alternativo <code>SCF_ExtratoContabil_R1</code> <code>gerarPDF()</code> XLSX Planilha padr\u00e3o <code>SCF_ExtratoContabil</code> <code>gerarXLSX()</code> XLSX Planilha alternativo <code>SCF_ExtratoContabil_R1</code> <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios (PDF)</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para diferentes layouts - Par\u00e2metros JSON para campos financeiros</p>"},{"location":"ELTECH/relatorios/scf/SCF_Extrato_Cont%C3%A1bil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>SQL din\u00e2mico com m\u00faltiplos filtros opcionais</li> <li>Join espec\u00edfico por classe (receber/pagar)</li> <li>Processamento de campos JSON para valores financeiros</li> <li>Ajuste autom\u00e1tico de datas e per\u00edodos</li> <li>Suporte a m\u00faltiplas empresas no cabe\u00e7alho</li> <li>Filtro por PLF com subconsulta para \u00faltimo item</li> <li>Ordena\u00e7\u00e3o flex\u00edvel por c\u00f3digo ou nome de entidade</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/","title":"SGC_BalancoPatrimonialDRE.md","text":""},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o de relat\u00f3rios cont\u00e1beis para a Linhasita, incluindo Balan\u00e7o Patrimonial, Demonstra\u00e7\u00e3o do Resultado do Exerc\u00edcio (DRE) e Notas Explicativas.</p>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rios cont\u00e1beis completos e padronizados para atendimento \u00e0s obriga\u00e7\u00f5es legais e an\u00e1lise gerencial da situa\u00e7\u00e3o patrimonial e de resultados da empresa.</p>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Controladoria</li> <li>Diretoria Financeira</li> <li>Auditores externos</li> <li>Conselho de Administra\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGC_BalancoPatrimonialDRE</code> - Layout dos relat\u00f3rios - Par\u00e2metros cont\u00e1beis configurados</p> <p>Localiza\u00e7\u00e3o: <code>linhasita/relatorios/sgc/</code></p>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABC10</code> - Plano de contas - <code>EBB02</code> - Saldos cont\u00e1beis - <code>EBA10</code> - Agrupamentos de contas - <code>EBA30</code> - Notas explicativas - <code>EBA40</code> - Livros cont\u00e1beis - <code>AAC10</code> - Empresas/Filiais</p> <p>Entidades Envolvidas: - <code>Abc10</code> - Contas cont\u00e1beis - <code>Ebb02</code> - Saldos mensais - <code>Eba10</code> - Agrupamentos - <code>Eba30</code> - Notas - <code>Aac10</code> - Empresas</p>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis emitir Integer Sim Tipo de relat\u00f3rio 0-BP, 1-DRE, 2-DRE Mensal, 3-Notas data1 String Sim Data de refer\u00eancia 1 MM/aaaa data2 String N\u00e3o Data de refer\u00eancia 2 MM/aaaa data3 String N\u00e3o Data de refer\u00eancia 3 MM/aaaa anexarBalanceteAoDiario Boolean N\u00e3o Vincular ao livro di\u00e1rio true/false"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#tipos-de-relatorio","title":"\ud83d\udccb Tipos de Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#balanco-patrimonial-0","title":"Balan\u00e7o Patrimonial (0)","text":"<ul> <li>Ativo e Passivo circulante/n\u00e3o circulante</li> <li>Patrim\u00f4nio l\u00edquido</li> <li>Comparativo entre per\u00edodos (at\u00e9 3 datas)</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#dre-demonstracao-do-resultado-1","title":"DRE - Demonstra\u00e7\u00e3o do Resultado (1)","text":"<ul> <li>Receitas operacionais</li> <li>Custos e despesas</li> <li>Resultado l\u00edquido do exerc\u00edcio</li> <li>Agrupamentos espec\u00edficos por conta</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#dre-mensal-2","title":"DRE Mensal (2)","text":"<ul> <li>Vers\u00e3o mensal da DRE</li> <li>Foco em resultados do m\u00eas</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#notas-explicativas-3","title":"Notas Explicativas (3)","text":"<ul> <li>Informa\u00e7\u00f5es complementares</li> <li>Esclarecimentos sobre demonstra\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica datas de refer\u00eancia</li> <li>Valida consist\u00eancia entre per\u00edodos</li> <li> <p>Confirma configura\u00e7\u00f5es cont\u00e1beis</p> </li> <li> <p>Configura\u00e7\u00e3o do Ambiente</p> </li> <li>Carrega dados da empresa</li> <li>Obt\u00e9m estrutura do plano de contas</li> <li> <p>Configura assinaturas e termos</p> </li> <li> <p>Processamento de Dados</p> </li> <li>Busca saldos cont\u00e1beis por per\u00edodo</li> <li>Aplica regras de classifica\u00e7\u00e3o</li> <li> <p>Calcula totais e subtotais</p> </li> <li> <p>Formata\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Composi\u00e7\u00e3o hier\u00e1rquica das contas</li> <li>Aplica\u00e7\u00e3o de sinais (d\u00e9bito/cr\u00e9dito)</li> <li> <p>Formata\u00e7\u00e3o de valores e textos</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>PDF com relat\u00f3rio formatado</li> <li>Numera\u00e7\u00e3o de p\u00e1ginas</li> <li>Assinaturas e termos</li> </ol>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Estrutura de plano de contas com 6 graus</li> <li>Grau da empresa deve ser o 5\u00ba</li> <li>Datas de refer\u00eancia n\u00e3o podem ser iguais</li> <li>Saldos devem estar atualizados</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#classificacao-de-contas","title":"Classifica\u00e7\u00e3o de Contas","text":"<ul> <li>Ativo: Contas classe 1</li> <li>Passivo: Contas classe 2  </li> <li>Resultado: Contas classe 3</li> <li>Sinais invertidos para passivo e resultado</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#agrupamentos-especificos","title":"Agrupamentos Espec\u00edficos","text":"<ul> <li>Contas 31, 32, 33, 36 possuem agrupamentos customizados</li> <li>Mapeamento para c\u00f3digos espec\u00edficos (990101xx)</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#termos-e-assinaturas","title":"Termos e Assinaturas","text":"<ul> <li>Termos em extenso para valores</li> <li>Assinaturas do respons\u00e1vel e contador</li> <li>Qualifica\u00e7\u00f5es profissionais</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio cont\u00e1bil completo <code>gerarPDF()</code>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>Par\u00e2metros do Sistema: - <code>GRAUEMPRESA</code> - Grau da empresa no plano - <code>ESTRCODCONTA</code> - Estrutura do c\u00f3digo de conta - <code>EB_ATUALIZARCTAS</code> - Indicador de atualiza\u00e7\u00e3o</p>"},{"location":"ELTECH/relatorios/sgc/SGC_BalancoPatrimonialDRE/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos per\u00edodos comparativos</li> <li>Hierarquia autom\u00e1tica baseada em graus</li> <li>Tratamento espec\u00edfico para DRE mensal</li> <li>Integra\u00e7\u00e3o com livro di\u00e1rio</li> <li>Formata\u00e7\u00e3o profissional para relat\u00f3rios cont\u00e1beis</li> <li>Valida\u00e7\u00f5es robustas de consist\u00eancia</li> <li>Suporte a notas explicativas periodizadas</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/","title":"SGC_LivroRazao.md","text":""},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro Raz\u00e3o cont\u00e1bil para a Linhasita, respons\u00e1vel pela impress\u00e3o do registro cronol\u00f3gico de todos os lan\u00e7amentos cont\u00e1beis por conta.</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer um relat\u00f3rio completo do Livro Raz\u00e3o para acompanhamento dos lan\u00e7amentos cont\u00e1beis, saldos e movimenta\u00e7\u00f5es por conta no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Controladoria</li> <li>Auditores internos e externos</li> <li>Diretoria Financeira</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGC_LivroRazao_R2</code> - Layout retrato - Template Jasper <code>SGC_LivroRazao_R3</code> - Layout paisagem - Template Jasper <code>SGC_LivroRazao_R1</code> - Termos de abertura/encerramento</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgc/</code></p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABC10</code> - Plano de contas - <code>EBB05</code> - Lan\u00e7amentos cont\u00e1beis - <code>EBB02</code> - Saldos cont\u00e1beis - <code>EBA40</code> - Livros cont\u00e1beis - <code>AAC10</code> - Empresas/Filiais</p> <p>Entidades Envolvidas: - <code>Abc10</code> - Contas cont\u00e1beis - <code>Ebb05</code> - Lan\u00e7amentos - <code>Ebb02</code> - Saldos mensais - <code>Eba40</code> - Controle de livros - <code>Aac10</code> - Empresas</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro Raz\u00e3o, 1-Termo Abertura, 2-Termo Encerramento dataInicial LocalDate Sim Data inicial do per\u00edodo dd/MM/yyyy dataFinal LocalDate Sim Data final do per\u00edodo dd/MM/yyyy contaContabilInicial String N\u00e3o Conta cont\u00e1bil inicial C\u00f3digo da conta contaContabilFinal String N\u00e3o Conta cont\u00e1bil final C\u00f3digo da conta rascunho Boolean Sim Modo rascunho true/false ctaComMovimento Boolean Sim Apenas contas com movimento true/false"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#tipos-de-impressao","title":"\ud83d\udccb Tipos de Impress\u00e3o","text":""},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#livro-razao-0","title":"Livro Raz\u00e3o (0)","text":"<ul> <li>Lan\u00e7amentos detalhados por conta</li> <li>Saldos anteriores e atuais</li> <li>Movimenta\u00e7\u00f5es a d\u00e9bito e cr\u00e9dito</li> <li>Hist\u00f3rico dos lan\u00e7amentos</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#termo-de-abertura-1","title":"Termo de Abertura (1)","text":"<ul> <li>Documento formal de abertura do livro</li> <li>Identifica\u00e7\u00e3o da empresa</li> <li>Per\u00edodo cont\u00e1bil</li> <li>Assinaturas respons\u00e1veis</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#termo-de-encerramento-2","title":"Termo de Encerramento (2)","text":"<ul> <li>Documento formal de encerramento</li> <li>Confirma\u00e7\u00e3o do per\u00edodo</li> <li>Encerramento para novo livro</li> <li>Assinaturas respons\u00e1veis</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo informado</li> <li>Valida contas cont\u00e1beis selecionadas</li> <li> <p>Confirma configura\u00e7\u00f5es do plano de contas</p> </li> <li> <p>Busca de Dados Cont\u00e1beis</p> </li> <li>Obt\u00e9m saldos anteriores do per\u00edodo</li> <li>Busca lan\u00e7amentos a d\u00e9bito</li> <li>Busca lan\u00e7amentos a cr\u00e9dito</li> <li> <p>Calcula saldos atualizados</p> </li> <li> <p>Processamento do Raz\u00e3o</p> </li> <li>Agrupa lan\u00e7amentos por conta</li> <li>Calcula saldos em tempo real</li> <li> <p>Ordena por c\u00f3digo de conta e data</p> </li> <li> <p>Controle de Livros</p> </li> <li>Verifica exist\u00eancia de livro em aberto</li> <li>Calcula numera\u00e7\u00e3o de p\u00e1ginas</li> <li> <p>Gerencia termos de abertura/encerramento</p> </li> <li> <p>Gera\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Aplica formata\u00e7\u00e3o espec\u00edfica</li> <li>Insere quebras de p\u00e1gina por conta</li> <li>Gera PDF final</li> </ol>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Estrutura do plano de contas deve estar configurada</li> <li>Grau da empresa deve ser definido</li> <li>C\u00f3digos das empresas devem estar atualizados</li> <li>N\u00e3o permite livro em aberto com n\u00famero diferente</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#calculos-contabeis","title":"C\u00e1lculos Cont\u00e1beis","text":"<ul> <li>Saldo Anterior: Saldo do m\u00eas anterior + lan\u00e7amentos do in\u00edcio do m\u00eas</li> <li>D\u00e9bitos: Soma de todos os lan\u00e7amentos a d\u00e9bito</li> <li>Cr\u00e9ditos: Soma de todos os lan\u00e7amentos a cr\u00e9dito  </li> <li>Saldo Atual: Saldo anterior + d\u00e9bitos - cr\u00e9ditos</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#controle-de-livros","title":"Controle de Livros","text":"<ul> <li>Livro deve estar em aberto para novas impress\u00f5es</li> <li>Termo de encerramento gera novo n\u00famero de livro</li> <li>Numera\u00e7\u00e3o de p\u00e1ginas \u00e9 sequencial e controlada</li> </ul>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#opcoes-de-formatacao","title":"\ud83c\udfa8 Op\u00e7\u00f5es de Formata\u00e7\u00e3o","text":"Configura\u00e7\u00e3o Descri\u00e7\u00e3o Valores Orienta\u00e7\u00e3o Layout da p\u00e1gina 0-Retrato, 1-Paisagem Salto Quebra por conta 0-Linhas, 1-P\u00e1gina Rascunho Modo n\u00e3o oficial true/false"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros do Sistema: - <code>GRAUEMPRESA</code> - Grau da empresa no plano - <code>ESTRCODCONTA</code> - Estrutura do c\u00f3digo de conta - <code>EMPRATUALIZADAS</code> - C\u00f3digos das empresas atualizadas - <code>EB_ATUALIZARCTAS</code> - Indicador de atualiza\u00e7\u00e3o</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgc/SGC_LivroRazao/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplas empresas no mesmo plano</li> <li>C\u00e1lculo preciso de saldos considerando per\u00edodos parciais</li> <li>Controle rigoroso de numera\u00e7\u00e3o de livros e p\u00e1ginas</li> <li>Op\u00e7\u00e3o de emitir apenas contas com movimento</li> <li>Formata\u00e7\u00e3o profissional para documentos cont\u00e1beis</li> <li>Integra\u00e7\u00e3o com sistema de livros fiscais</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados cont\u00e1beis</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/","title":"SGT_ApuracaoICMSP9.md","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Apura\u00e7\u00e3o do ICMS (P9) para a Linhasita, respons\u00e1vel pela apura\u00e7\u00e3o e registro dos valores de ICMS e ICMS-ST no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rio completo de apura\u00e7\u00e3o do ICMS conforme exig\u00eancias fiscais, incluindo c\u00e1lculos de d\u00e9bitos, cr\u00e9ditos e saldos a recolher ou compensar.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Auditores fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGT_ApuracaoICMSP9_R2</code> - Layout ICMS - Template Jasper <code>SGT_ApuracaoICMSP9_R3</code> - Layout ICMS-ST - Template Jasper <code>SGT_ApuracaoICMSP9_R1</code> - Termos de abertura/encerramento - M\u00faltiplos sub-relat\u00f3rios para se\u00e7\u00f5es espec\u00edficas</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgt/</code></p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>EDB01</code> - Apura\u00e7\u00f5es fiscais - <code>EDB0101</code> - Ocorr\u00eancias da apura\u00e7\u00e3o - <code>EDD10</code> - Livros fiscais - <code>AAJ15</code> - CFOPs - <code>AAG02</code> - Estados/UF</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens fiscais - <code>Edb01</code> - Apura\u00e7\u00e3o principal - <code>Edb0101</code> - Detalhes da apura\u00e7\u00e3o - <code>Edd10</code> - Controle de livros</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro, 1-Termo Abertura, 2-Termo Encerramento referencia String Sim Per\u00edodo de refer\u00eancia MM/aaaa modelo Integer Sim Tipo de apura\u00e7\u00e3o 0-ICMS, 1-ICMS-ST estados List N\u00e3o Estados para filtro IDs dos estados apuracao Long N\u00e3o Tipo de apura\u00e7\u00e3o espec\u00edfica ID do tipo rascunho Boolean Sim Modo rascunho true/false"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#tipos-de-apuracao","title":"\ud83d\udccb Tipos de Apura\u00e7\u00e3o","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#icms-0","title":"ICMS (0)","text":"<ul> <li>Apura\u00e7\u00e3o normal do ICMS</li> <li>Entradas e sa\u00eddas por CFOP</li> <li>C\u00e1lculo de d\u00e9bitos e cr\u00e9ditos</li> <li>Saldo a recolher ou compensar</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#icms-st-1","title":"ICMS-ST (1)","text":"<ul> <li>Apura\u00e7\u00e3o do ICMS Substitui\u00e7\u00e3o Tribut\u00e1ria</li> <li>Filtro por estados espec\u00edficos</li> <li>C\u00e1lculos espec\u00edficos para ST</li> <li>Diferencia\u00e7\u00e3o por UF</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo de refer\u00eancia</li> <li>Valida tipo de apura\u00e7\u00e3o selecionado</li> <li> <p>Confirma exist\u00eancia de dados fiscais</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Lan\u00e7amentos agrupados por CFOP</li> <li>C\u00e1lculos de bases e valores de ICMS</li> <li> <p>Dados de entradas e sa\u00eddas</p> </li> <li> <p>Processamento da Apura\u00e7\u00e3o</p> </li> <li>C\u00e1lculo de d\u00e9bitos e cr\u00e9ditos</li> <li>Aplica\u00e7\u00e3o de estornos e dedu\u00e7\u00f5es</li> <li> <p>C\u00e1lculo do saldo final</p> </li> <li> <p>Composi\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>M\u00faltiplos sub-relat\u00f3rios especializados</li> <li>Agrupamento por UF (ICMS-ST)</li> <li> <p>Formata\u00e7\u00e3o fiscal espec\u00edfica</p> </li> <li> <p>Controle de Livros</p> </li> <li>Numera\u00e7\u00e3o sequencial de livros</li> <li>Termos de abertura e encerramento</li> <li>Controle de p\u00e1ginas</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Per\u00edodo deve ser v\u00e1lido e consistente</li> <li>Dados fiscais devem estar integrados</li> <li>Livro n\u00e3o pode estar encerrado para novas apura\u00e7\u00f5es</li> <li>Estados devem estar cadastrados para ICMS-ST</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Base de C\u00e1lculo: Soma das bases de ICMS dos lan\u00e7amentos</li> <li>Valor do ICMS: Soma dos valores de ICMS</li> <li>D\u00e9bitos/Cr\u00e9ditos: C\u00e1lculo conforme regras fiscais</li> <li>Saldo Final: D\u00e9bitos - Cr\u00e9ditos - Dedu\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#campos-de-alinhamento","title":"Campos de Alinhamento","text":"<ul> <li>Configura\u00e7\u00e3o espec\u00edfica para campos JSON</li> <li>Mapeamento de campos fiscais padronizados</li> <li>Suporte a m\u00faltiplos tipos de apura\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#estrutura-do-relatorio","title":"\ud83c\udfa8 Estrutura do Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-1-dados-da-empresa","title":"Se\u00e7\u00e3o 1 - Dados da Empresa","text":"<ul> <li>Raz\u00e3o social e CNPJ</li> <li>Inscri\u00e7\u00e3o Estadual</li> <li>Per\u00edodo de apura\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-2-lancamentos-por-cfop","title":"Se\u00e7\u00e3o 2 - Lan\u00e7amentos por CFOP","text":"<ul> <li>Agrupamento por grupo de CFOP (1.x, 2.x, 3.x, 5.x, 6.x, 7.x)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Bases e valores de ICMS</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-3-apuracao-do-icms","title":"Se\u00e7\u00e3o 3 - Apura\u00e7\u00e3o do ICMS","text":"<ul> <li>D\u00e9bitos e cr\u00e9ditos do per\u00edodo</li> <li>Estornos e compensa\u00e7\u00f5es</li> <li>Saldo a recolher</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#secao-4-ocorrencias","title":"Se\u00e7\u00e3o 4 - Ocorr\u00eancias","text":"<ul> <li>Detalhamento por tipo de ocorr\u00eancia</li> <li>Valores espec\u00edficos por subitem</li> <li>Observa\u00e7\u00f5es fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros de Alinhamento: - <code>0040</code> - Apura\u00e7\u00e3o LF ICMS - <code>0082</code> - Resumo de Apura\u00e7\u00e3o ICMS P9</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoICMSP9/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos sub-relat\u00f3rios especializados</li> <li>C\u00e1lculos fiscais precisos baseados em JSON fields</li> <li>Controle rigoroso de livros fiscais</li> <li>Formata\u00e7\u00e3o espec\u00edfica para cada tipo de apura\u00e7\u00e3o</li> <li>Integra\u00e7\u00e3o com sistema de alinhamento de campos</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados fiscais</li> <li>Suporte a filtros por UF para ICMS-ST</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/","title":"SGT_ApuracaoIPIP8.md","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Apura\u00e7\u00e3o do IPI (P8) para a Linhasita, respons\u00e1vel pela apura\u00e7\u00e3o e registro dos valores de IPI no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rio completo de apura\u00e7\u00e3o do IPI conforme exig\u00eancias fiscais, incluindo c\u00e1lculos de d\u00e9bitos, cr\u00e9ditos e saldos a recolher ou compensar.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Auditores fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGT_ApuracaoIPIP8_R2</code> - Layout principal do IPI - Template Jasper <code>SGT_ApuracaoIPIP8_R1</code> - Termos de abertura/encerramento - M\u00faltiplos sub-relat\u00f3rios para se\u00e7\u00f5es espec\u00edficas</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgt/</code></p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>EDB01</code> - Apura\u00e7\u00f5es fiscais - <code>EDB0101</code> - Ocorr\u00eancias da apura\u00e7\u00e3o - <code>EDD10</code> - Livros fiscais - <code>AAJ15</code> - CFOPs</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens fiscais - <code>Edb01</code> - Apura\u00e7\u00e3o principal - <code>Edb0101</code> - Detalhes da apura\u00e7\u00e3o - <code>Edd10</code> - Controle de livros</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro, 1-Termo Abertura, 2-Termo Encerramento referencia String Sim Per\u00edodo de refer\u00eancia MM/aaaa apuracao Long N\u00e3o Tipo de apura\u00e7\u00e3o espec\u00edfica ID do tipo rascunho Boolean Sim Modo rascunho true/false"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#estrutura-do-relatorio","title":"\ud83d\udccb Estrutura do Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-1-dados-da-empresa","title":"Se\u00e7\u00e3o 1 - Dados da Empresa","text":"<ul> <li>Raz\u00e3o social e CNPJ</li> <li>Inscri\u00e7\u00e3o Estadual</li> <li>Per\u00edodo de apura\u00e7\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-2-lancamentos-por-cfop-entradas","title":"Se\u00e7\u00e3o 2 - Lan\u00e7amentos por CFOP (Entradas)","text":"<ul> <li>Agrupamento por grupo de CFOP (1.x, 2.x, 3.x)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Bases e valores de IPI</li> <li>Isen\u00e7\u00f5es e outras situa\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-3-lancamentos-por-cfop-saidas","title":"Se\u00e7\u00e3o 3 - Lan\u00e7amentos por CFOP (Sa\u00eddas)","text":"<ul> <li>Agrupamento por grupo de CFOP (5.x, 6.x, 7.x)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Bases e valores de IPI</li> <li>Isen\u00e7\u00f5es e outras situa\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-4-apuracao-do-ipi","title":"Se\u00e7\u00e3o 4 - Apura\u00e7\u00e3o do IPI","text":"<ul> <li>D\u00e9bitos e cr\u00e9ditos do per\u00edodo</li> <li>Estornos e compensa\u00e7\u00f5es</li> <li>Cr\u00e9ditos anteriores</li> <li>Dedu\u00e7\u00f5es aplic\u00e1veis</li> <li>Saldo a recolher</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#secao-5-ocorrencias","title":"Se\u00e7\u00e3o 5 - Ocorr\u00eancias","text":"<ul> <li>Detalhamento por tipo de ocorr\u00eancia</li> <li>Valores espec\u00edficos por subitem</li> <li>Observa\u00e7\u00f5es fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo de refer\u00eancia</li> <li>Valida tipo de apura\u00e7\u00e3o selecionado</li> <li> <p>Confirma exist\u00eancia de dados fiscais</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Lan\u00e7amentos agrupados por CFOP</li> <li>C\u00e1lculos de bases e valores de IPI</li> <li> <p>Dados de entradas e sa\u00eddas</p> </li> <li> <p>Processamento da Apura\u00e7\u00e3o</p> </li> <li>C\u00e1lculo de d\u00e9bitos e cr\u00e9ditos</li> <li>Aplica\u00e7\u00e3o de estornos e dedu\u00e7\u00f5es</li> <li> <p>C\u00e1lculo do saldo final</p> </li> <li> <p>Composi\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>M\u00faltiplos sub-relat\u00f3rios especializados</li> <li> <p>Formata\u00e7\u00e3o fiscal espec\u00edfica para IPI</p> </li> <li> <p>Controle de Livros</p> </li> <li>Numera\u00e7\u00e3o sequencial de livros</li> <li>Termos de abertura e encerramento</li> <li>Controle de p\u00e1ginas</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Per\u00edodo deve ser v\u00e1lido e consistente</li> <li>Dados fiscais devem estar integrados</li> <li>Livro n\u00e3o pode estar encerrado para novas apura\u00e7\u00f5es</li> <li>Documentos cancelados s\u00e3o exclu\u00eddos</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Base de C\u00e1lculo: Soma das bases de IPI dos lan\u00e7amentos</li> <li>Valor do IPI: Soma dos valores de IPI</li> <li>D\u00e9bitos/Cr\u00e9ditos: C\u00e1lculo conforme regras fiscais</li> <li>Saldo Final: D\u00e9bitos - Cr\u00e9ditos - Dedu\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#campos-de-alinhamento","title":"Campos de Alinhamento","text":"<ul> <li>0040 - Apura\u00e7\u00e3o LF ICMS/IPI (campos gerais)</li> <li>0083 - Resumo de Apura\u00e7\u00e3o IPI P8 (campos espec\u00edficos)</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#sub-relatorios-especializados","title":"\ud83c\udfa8 Sub-relat\u00f3rios Especializados","text":"Sub-relat\u00f3rio Descri\u00e7\u00e3o R2S1 Lan\u00e7amentos de entrada por CFOP R2S2 Lan\u00e7amentos de sa\u00edda por CFOP R2S3 Apura\u00e7\u00e3o principal do IPI R2S3S1-R2S3S5 Ocorr\u00eancias detalhadas por tipo R2S4 Resumo final da apura\u00e7\u00e3o"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros de Alinhamento: - <code>0040</code> - Apura\u00e7\u00e3o LF ICMS/IPI - <code>0083</code> - Resumo de Apura\u00e7\u00e3o IPI P8</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgt/SGT_ApuracaoIPIP8/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos sub-relat\u00f3rios especializados</li> <li>C\u00e1lculos fiscais precisos baseados em JSON fields</li> <li>Controle rigoroso de livros fiscais (P8)</li> <li>Formata\u00e7\u00e3o espec\u00edfica para apura\u00e7\u00e3o de IPI</li> <li>Integra\u00e7\u00e3o com sistema de alinhamento de campos</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados fiscais</li> <li>Suporte a termos de abertura e encerramento</li> <li>Modo rascunho para testes e verifica\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/","title":"SGT_LivroSaidasP2P2A.md","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Sa\u00eddas (P2/P2A) para a Linhasita, respons\u00e1vel pelo registro fiscal de todas as opera\u00e7\u00f5es de sa\u00edda no per\u00edodo.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rio completo de sa\u00eddas fiscais conforme exig\u00eancias legais, incluindo dados de ICMS, IPI e demais tributos incidentes nas opera\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria</li> <li>Auditores fiscais</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SGT_LivroSaidasP2P2A_R2</code> - Layout P2 (sem IPI) - Template Jasper <code>SGT_LivroSaidasP2P2A_R3</code> - Layout P2A (com IPI) - Template Jasper <code>SGT_LivroSaidasP2P2A_R1</code> - Termos de abertura/encerramento - M\u00faltiplos sub-relat\u00f3rios para demonstra\u00e7\u00f5es e resumos</p> <p>Localiza\u00e7\u00e3o: <code>eltech/relatorios/sgt/</code></p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>AAJ15</code> - CFOPs - <code>EAA0102</code> - Dados gerais do documento - <code>EAA0101</code> - Endere\u00e7os - <code>AAG02</code> - Estados/UF - <code>EDD10</code> - Livros fiscais</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens fiscais - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Eaa0102</code> - Dados do destinat\u00e1rio - <code>Edd10</code> - Controle de livros</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0-Livro, 1-Termo Abertura, 2-Termo Encerramento dataInicial LocalDate Sim Data inicial do per\u00edodo dd/MM/yyyy dataFinal LocalDate Sim Data final do per\u00edodo dd/MM/yyyy modelo Integer Sim Modelo do livro 0-P2, 1-P2A consEntNosDocDeSaida Boolean Sim Considerar entradas em docs de sa\u00edda true/false rascunho Boolean Sim Modo rascunho true/false resumo Boolean Sim Exibir resumo por CFOP e al\u00edquota true/false"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#modelos-do-livro","title":"\ud83d\udccb Modelos do Livro","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#p2-0","title":"P2 (0)","text":"<ul> <li>Livro de Sa\u00eddas sem IPI</li> <li>Foco nas opera\u00e7\u00f5es de ICMS</li> <li>Demonstra\u00e7\u00f5es por estado e CFOP</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#p2a-1","title":"P2A (1)","text":"<ul> <li>Livro de Sa\u00eddas com IPI</li> <li>Inclui dados de IPI al\u00e9m do ICMS</li> <li>Formata\u00e7\u00e3o espec\u00edfica para ind\u00fastria</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica per\u00edodo informado</li> <li>Valida modelo selecionado</li> <li> <p>Confirma configura\u00e7\u00f5es fiscais</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Documentos de sa\u00edda no per\u00edodo</li> <li>Itens fiscais com tributos</li> <li> <p>Dados de destinat\u00e1rios e CFOPs</p> </li> <li> <p>Processamento dos Dados</p> </li> <li>Agrupamento por diversos crit\u00e9rios</li> <li>C\u00e1lculos de bases e valores tribut\u00e1rios</li> <li> <p>Formata\u00e7\u00e3o espec\u00edfica por modelo</p> </li> <li> <p>Composi\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Dados principais dos documentos</li> <li>Demonstra\u00e7\u00f5es por estado (contribuintes/n\u00e3o contribuintes)</li> <li>Resumos por CFOP e al\u00edquotas</li> <li> <p>Sub-relat\u00f3rios especializados</p> </li> <li> <p>Controle de Livros</p> </li> <li>Numera\u00e7\u00e3o sequencial</li> <li>Termos de abertura e encerramento</li> <li>Controle de p\u00e1ginas</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Per\u00edodo deve ser v\u00e1lido e consistente</li> <li>Documentos cancelados t\u00eam valores zerados</li> <li>Apenas documentos fiscais integrados</li> <li>Livro n\u00e3o pode estar encerrado</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#calculos-fiscais","title":"C\u00e1lculos Fiscais","text":"<ul> <li>Valor Cont\u00e1bil: Soma dos totais dos itens</li> <li>Base ICMS: Soma das bases de c\u00e1lculo</li> <li>Valor ICMS: Soma dos valores do imposto</li> <li>Base IPI: Soma das bases de IPI (P2A)</li> <li>Valor IPI: Soma dos valores de IPI (P2A)</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#campos-de-alinhamento","title":"Campos de Alinhamento","text":"<ul> <li>Configura\u00e7\u00e3o espec\u00edfica para campos JSON</li> <li>Mapeamento de campos fiscais padronizados (0080)</li> <li>Suporte a m\u00faltiplos tipos de dados tribut\u00e1rios</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#estrutura-do-relatorio","title":"\ud83c\udfa8 Estrutura do Relat\u00f3rio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#secao-principal-documentos-de-saida","title":"Se\u00e7\u00e3o Principal - Documentos de Sa\u00edda","text":"<ul> <li>Data e n\u00famero do documento</li> <li>CFOP e descri\u00e7\u00e3o</li> <li>Destinat\u00e1rio (c\u00f3digo, nome, IE)</li> <li>Valores cont\u00e1beis e fiscais</li> <li>Tributos incidentes</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#sub-relatorios-especializados","title":"Sub-relat\u00f3rios Especializados","text":"<p>R2S1: Demonstrativo por estado - Opera\u00e7\u00f5es com contribuinte R2S4: Demonstrativo por estado - Opera\u00e7\u00f5es com n\u00e3o contribuinte R2S2: Resumo por CFOP R2S3: Resumo por CFOP e al\u00edquota de ICMS</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Par\u00e2metros de Alinhamento: - <code>0080</code> - Livro de Sa\u00eddas P2/P2A</p> <p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Acesso a dados - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p>"},{"location":"ELTECH/relatorios/sgt/SGT_LivroSaidasP2P2A/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos sub-relat\u00f3rios especializados</li> <li>Zeramento autom\u00e1tico de valores para documentos cancelados</li> <li>Controle rigoroso de livros fiscais (P2/P2A)</li> <li>Formata\u00e7\u00e3o espec\u00edfica para cada modelo</li> <li>Integra\u00e7\u00e3o com sistema de alinhamento de campos</li> <li>Valida\u00e7\u00f5es de consist\u00eancia dos dados fiscais</li> <li>Suporte a entradas em documentos de sa\u00edda (opcional)</li> <li>Resumos agrupados por diversos crit\u00e9rios</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/","title":"SGT Livro Entradas P1 P1A","text":""},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o do Livro de Registro de Entradas modelos P1 e P1A para fins fiscais, incluindo termos de abertura e encerramento conforme legisla\u00e7\u00e3o.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Atender \u00e0s obriga\u00e7\u00f5es fiscais de registro de entradas de mercadorias, gerando livros fiscais P1/P1A com demonstrativos por estado, resumo por CFOP e controle de numera\u00e7\u00e3o sequencial.</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Auditoria Fiscal</li> <li>Gest\u00e3o Tribut\u00e1ria</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Templates Jasper: - <code>SGT_LivroEntradasP1P1A_R1</code> - Termos de abertura/encerramento - <code>SGT_LivroEntradasP1P1A_R2</code> - Livro P1 - <code>SGT_LivroEntradasP1P1A_R3</code> - Livro P1A - <code>SGT_LivroEntradasP1P1A_R2S1</code> - Demonstrativo por estado - <code>SGT_LivroEntradasP1P1A_R2S2</code> - Resumo por CFOP - <code>SGT_LivroEntradasP1P1A_R2S3</code> - Resumo por CFOP e al\u00edquota</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>AAJ15</code> - CFOP - <code>EDD10</code> - Controle de livros fiscais - <code>AAC10</code> - Dados da empresa - <code>AAC1002</code> - Inscri\u00e7\u00f5es estaduais</p> <p>Entidades Envolvidas: - <code>Edd10</code> - Controle de livros - <code>Eaa01</code> - Documentos fiscais - <code>Aac10</code> - Empresa - <code>Aag0201</code> - Munic\u00edpios</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis imprimir Integer Sim Tipo de impress\u00e3o 0=Livro, 1=Termo Abertura, 2=Termo Encerramento dataInicial LocalDate Sim Data inicial do per\u00edodo Formato dd/MM/yyyy dataFinal LocalDate Sim Data final do per\u00edodo Formato dd/MM/yyyy modelo Integer Sim Modelo do livro 0=P1, 1=P1A entidade Boolean Sim Exibir dados da entidade true/false rascunho Boolean Sim Modo rascunho true/false resumo Boolean Sim Exibir resumo CFOP true/false livro Integer Sim N\u00famero do livro Sequencial pagina Integer Sim P\u00e1gina inicial N\u00famero da p\u00e1gina"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#campos-do-livro","title":"\ud83d\udccb Campos do Livro","text":"Campo Descri\u00e7\u00e3o Tipo eaa01esData Data de entrada Date abb01num N\u00famero do documento Integer aaj15codigo CFOP String eaa0102nome Nome do fornecedor String eaa0102ni CNPJ/CPF String aag02uf UF do fornecedor String vlr_contabil Valor cont\u00e1bil BigDecimal bc_icms Base c\u00e1lculo ICMS BigDecimal icms Valor ICMS BigDecimal bc_ipi Base c\u00e1lculo IPI BigDecimal ipi Valor IPI BigDecimal"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define campos JSON para impostos (ICMS, IPI)</li> <li>Configura alinhamento de impress\u00e3o</li> <li> <p>Obt\u00e9m dados da empresa e respons\u00e1veis</p> </li> <li> <p>Valida\u00e7\u00e3o de Par\u00e2metros</p> </li> <li>Verifica per\u00edodo fiscal</li> <li>Valida n\u00famero do livro e p\u00e1gina</li> <li> <p>Configura termos de abertura/encerramento</p> </li> <li> <p>Busca de Dados Fiscais</p> </li> <li>Consulta documentos de entrada no per\u00edodo</li> <li>Agrupa por UF, CFOP e al\u00edquotas</li> <li> <p>Calcula totais e impostos</p> </li> <li> <p>Gera\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Seleciona template conforme modelo (P1/P1A)</li> <li>Processa sub-relat\u00f3rios (demonstrativos)</li> <li> <p>Gera PDF com numera\u00e7\u00e3o de p\u00e1ginas</p> </li> <li> <p>Controle de Numera\u00e7\u00e3o</p> </li> <li>Grava/atualiza controle do livro</li> <li>Valida sequ\u00eancia num\u00e9rica</li> <li>Controla termos de encerramento</li> </ol>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#validacoes-fiscais","title":"Valida\u00e7\u00f5es Fiscais","text":"<ul> <li>Apenas documentos de entrada (<code>ESMOV_ENTRADA</code>)</li> <li>Apenas documentos SRF (<code>CLASDOC_SRF</code>)</li> <li>Documentos com indica\u00e7\u00e3o para livro fiscal (<code>iLivroFisc = SIM</code>)</li> <li>CFOPs 1xxx, 2xxx e 3xxx</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#controle-de-livros","title":"Controle de Livros","text":"<ul> <li>Numera\u00e7\u00e3o sequencial autom\u00e1tica</li> <li>Impedimento de livro em aberto</li> <li>Bloqueio de livro j\u00e1 encerrado</li> <li>Controle de p\u00e1ginas por livro</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#campos-de-impostos","title":"Campos de Impostos","text":"<ul> <li>Configura\u00e7\u00e3o via par\u00e2metros JSON</li> <li>Campos: al\u00edquota, base c\u00e1lculo, valor, isentas, outras</li> <li>Suporte a ICMS, IPI e ICMS ST</li> </ul>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Livro fiscal completo <code>JasperExportManager.exportReportToPdf()</code> PDF Termos de abertura/encerramento Template espec\u00edfico"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multiorm</code> - Persist\u00eancia e queries - <code>multitec.utils</code> - Utilit\u00e1rios e datas</p> <p>Configura\u00e7\u00f5es: - Par\u00e2metros JSON para campos de impostos - Templates Jasper para diferentes modelos - Controle sequencial de livros (<code>EDD10</code>)</p>"},{"location":"ELTECH/relatorios/sgt/SGT_Livro_Entradas_P1-P1A/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza sub-relat\u00f3rios para demonstrativos consolidados</li> <li>Processa campos fiscais via fun\u00e7\u00f5es JSON (<code>jGet</code>)</li> <li>Controle rigoroso de numera\u00e7\u00e3o de livros e p\u00e1ginas</li> <li>Suporte a modo rascunho sem grava\u00e7\u00e3o</li> <li>Valida\u00e7\u00e3o de estado do livro (aberto/encerrado)</li> <li>Configura\u00e7\u00e3o din\u00e2mica de alinhamento de impress\u00e3o</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/","title":"SRF - Resumo Por Item","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio resumido de documentos fiscais consolidados por item, com flexibilidade para sele\u00e7\u00e3o de campos personalizados e tratamento de devolu\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer vis\u00e3o consolidada das opera\u00e7\u00f5es fiscais por item, permitindo an\u00e1lise personalizada com campos flex\u00edveis e ajustes autom\u00e1ticos para devolu\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Controladoria</li> <li>Gest\u00e3o de Estoque</li> <li>Comercial</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA0103</code> - Itens de documentos fiscais - <code>EAA01</code> - Documentos fiscais - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABM01</code> - Itens/Cadastro de produtos - <code>AAC10</code> - Empresas - <code>AAM06</code> - Unidades de medida - <code>ABE01</code> - Entidades - <code>ABM0102</code> - Crit\u00e9rios de itens</p> <p>Entidades Envolvidas: - <code>Eaa0103</code> - Itens de documentos - <code>Abm01</code> - Itens/produtos - <code>Eaa01</code> - Documentos fiscais - <code>Aac10</code> - Empresa</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis resumoOperacao Integer Sim Tipo de opera\u00e7\u00e3o 0=Entrada, 1=Sa\u00edda impressao Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX numeroInicial Integer Sim N\u00famero documento inicial 000000001 numeroFinal Integer Sim N\u00famero documento final 999999999 entidade List N\u00e3o Entidades espec\u00edficas IDs entidades tipo List N\u00e3o Tipos documento IDs tipos documento itens List N\u00e3o Itens espec\u00edficos IDs itens empresas List N\u00e3o Empresas espec\u00edficas IDs empresas dataEmissao LocalDate[] N\u00e3o Per\u00edodo emiss\u00e3o Data inicial e final dataEntSai LocalDate[] N\u00e3o Per\u00edodo entrada/sa\u00edda Data inicial e final criterios List N\u00e3o Crit\u00e9rios de item IDs crit\u00e9rios cfop List N\u00e3o CFOPs espec\u00edficos IDs CFOPs pcd List N\u00e3o Crit\u00e9rios PCD IDs crit\u00e9rios PCD"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Campos Personaliz\u00e1veis: - 6 campos configur\u00e1veis (fixos ou livres) - Campos fixos: Qtde Uso, Qtde Comercial, Pre\u00e7o Unit\u00e1rio, Total Item, Total Documento, Total Financeiro - Campos livres: Qualquer campo do JSON do item - Valida\u00e7\u00e3o contra duplica\u00e7\u00e3o de campos</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo abm01codigo C\u00f3digo do item String abm01descr Descri\u00e7\u00e3o do item String aam06codigo Unidade de medida String eaa0103qtComl Quantidade comercial BigDecimal eaa0103unit Pre\u00e7o unit\u00e1rio BigDecimal eaa0103total Total item BigDecimal nomeCampo[1-6] Nome campo personalizado String valor[1-6] Valor campo personalizado BigDecimal"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Valida campos personalizados (sem duplicatas)</li> <li>Define opera\u00e7\u00e3o (entrada/sa\u00edda)</li> <li> <p>Processa agrupamentos de entidades e itens</p> </li> <li> <p>Busca de Agrupamentos</p> </li> <li>Identifica c\u00f3digos com 2 caracteres como agrupadores</li> <li>Expande para incluir entidades e itens filhas</li> <li> <p>Prepara listas completas de IDs</p> </li> <li> <p>Consulta de Dados Principais</p> </li> <li>Busca itens consolidados com filtros aplicados</li> <li>Agrupa por item com totais</li> <li> <p>Aplica crit\u00e9rios de opera\u00e7\u00e3o</p> </li> <li> <p>Processamento de Campos Personalizados</p> </li> <li>Busca campos JSON para cada item</li> <li>Calcula totais dos campos livres</li> <li> <p>Aplica ajustes de devolu\u00e7\u00f5es</p> </li> <li> <p>Tratamento de Devolu\u00e7\u00f5es</p> </li> <li>Identifica itens com devolu\u00e7\u00f5es</li> <li>Subtrai valores devolvidos dos totais</li> <li> <p>Ajusta campos personalizados</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Formata dados com campos personalizados</li> <li>Exporta para PDF ou XLSX</li> <li>Configura totais por campo</li> </ol>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#agrupamento","title":"Agrupamento","text":"<ul> <li>C\u00f3digos com 2 caracteres considerados como agrupadores</li> <li>Expans\u00e3o autom\u00e1tica para entidades e itens filhas</li> <li>Agrupamento por tipo e c\u00f3digo de item</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#campos-personalizados","title":"Campos Personalizados","text":"<ul> <li>M\u00e1ximo 6 campos por relat\u00f3rio</li> <li>Combina\u00e7\u00e3o de campos fixos e livres</li> <li>Valida\u00e7\u00e3o contra duplica\u00e7\u00e3o</li> <li>Campos livres somados do JSON dos itens</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#devolucoes","title":"Devolu\u00e7\u00f5es","text":"<ul> <li>Subtrai quantidades e valores devolvidos</li> <li>Ajusta campos personalizados quando aplic\u00e1vel</li> <li>Considera apenas devolu\u00e7\u00f5es com quantidades &gt; 0</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#filtros","title":"Filtros","text":"<ul> <li>Apenas documentos fiscais (<code>CLASDOC_SRF</code>)</li> <li>Exclui documentos cancelados</li> <li>Filtros por per\u00edodo de emiss\u00e3o ou entrada/sa\u00edda</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado <code>gerarPDF()</code> XLSX Planilha para an\u00e1lise <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para formata\u00e7\u00e3o - Par\u00e2metros JSON para campos personalizados - Tabela <code>AAH02</code> para descri\u00e7\u00e3o de campos</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_Por_Item/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Flexibilidade total na sele\u00e7\u00e3o de campos</li> <li>Processamento complexo de agrupamentos</li> <li>Duas consultas SQL: dados principais + campos personalizados</li> <li>Algoritmo de valida\u00e7\u00e3o de campos contra duplica\u00e7\u00e3o</li> <li>Suporte a m\u00faltiplos crit\u00e9rios de filtragem</li> <li>Tratamento autom\u00e1tico de devolu\u00e7\u00f5es</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/","title":"SRF - Resumo Por Estado","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio resumido de documentos fiscais consolidados por estado/UF, com tratamento de devolu\u00e7\u00f5es e agrupamento autom\u00e1tico para an\u00e1lise geogr\u00e1fica.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer vis\u00e3o consolidada das opera\u00e7\u00f5es fiscais por estado, permitindo an\u00e1lise r\u00e1pida de faturamento ou recebimento com totais agrupados por UF e ajustes para devolu\u00e7\u00f5es.</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Controladoria</li> <li>Gest\u00e3o Comercial</li> <li>Diretoria</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens de documentos - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades - <code>AAG02</code> - Estados/UF - <code>AAG0201</code> - Munic\u00edpios - <code>AAH01</code> - Tipos de documento - <code>AAC10</code> - Empresas</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Abe01</code> - Clientes/Fornecedores - <code>Aag02</code> - Estado - <code>Aac10</code> - Empresa</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis resumoOperacao Integer Sim Tipo de opera\u00e7\u00e3o 0=Recebimento, 1=Faturamento impressao Integer Sim Formato sa\u00edda 0=PDF, 1=XLSX numeroInicial Integer Sim N\u00famero documento inicial 000000001 numeroFinal Integer Sim N\u00famero documento final 999999999 entidade List N\u00e3o Entidades espec\u00edficas IDs entidades tipo List N\u00e3o Tipos documento IDs tipos documento empresas List N\u00e3o Empresas espec\u00edficas IDs empresas dataEmissao LocalDate[] N\u00e3o Per\u00edodo emiss\u00e3o Data inicial e final dataEntSai LocalDate[] N\u00e3o Per\u00edodo entrada/sa\u00edda Data inicial e final estados List N\u00e3o Estados espec\u00edficos IDs estados pcd List N\u00e3o Crit\u00e9rios PCD IDs crit\u00e9rios"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo aag02uf Estado/UF String aag02nome Nome do estado String eaa0103qtComl Soma quantidade comercial BigDecimal eaa0103unit Soma pre\u00e7o unit\u00e1rio BigDecimal eaa0103total Soma total item BigDecimal eaa0103totDoc Soma total documento BigDecimal"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Define opera\u00e7\u00e3o (faturamento/recebimento)</li> <li>Configura per\u00edodo no cabe\u00e7alho</li> <li> <p>Processa agrupamentos de entidades</p> </li> <li> <p>Busca de Agrupamentos</p> </li> <li>Identifica c\u00f3digos de entidade com 2 caracteres</li> <li>Expande para incluir entidades filhas</li> <li> <p>Prepara lista completa de IDs</p> </li> <li> <p>Consulta de Dados Detalhados</p> </li> <li>Busca documentos com filtros aplicados</li> <li>Processa devolu\u00e7\u00f5es para cada item</li> <li> <p>Ajusta valores com base nas devolu\u00e7\u00f5es</p> </li> <li> <p>Consolida\u00e7\u00e3o por Estado</p> </li> <li>Agrupa dados por UF</li> <li>Soma valores para cada estado</li> <li> <p>Cria estrutura resumida final</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Formata dados consolidados</li> <li>Exporta para PDF ou XLSX</li> <li>Configura cabe\u00e7alho com per\u00edodo</li> </ol>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#agrupamento-de-entidades","title":"Agrupamento de Entidades","text":"<ul> <li>C\u00f3digos com 2 caracteres considerados como agrupadores</li> <li>Inclui automaticamente entidades com c\u00f3digo iniciando pelo agrupador</li> <li>Expande lista de IDs para entidades filhas</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#filtros-de-operacao","title":"Filtros de Opera\u00e7\u00e3o","text":"<ul> <li>Recebimento: <code>eaa01esMov = Eaa01.ESMOV_ENTRADA</code></li> <li>Faturamento: <code>eaa01esMov = Eaa01.ESMOV_SAIDA</code></li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#tratamento-de-devolucoes","title":"Tratamento de Devolu\u00e7\u00f5es","text":"<ul> <li>Busca itens com relacionamento <code>EAA01033</code></li> <li>Subtrai quantidades e valores devolvidos</li> <li>Mant\u00e9m apenas valores l\u00edquidos no relat\u00f3rio</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#consolidacao","title":"Consolida\u00e7\u00e3o","text":"<ul> <li>Agrupamento autom\u00e1tico por estado</li> <li>Soma de todos os valores por UF</li> <li>Manuten\u00e7\u00e3o da ordena\u00e7\u00e3o por estado</li> </ul>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado <code>gerarPDF()</code> XLSX Planilha para an\u00e1lise <code>gerarXLSX()</code>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para formata\u00e7\u00e3o - Par\u00e2metros JSON para campos adicionais</p>"},{"location":"ELTECH/relatorios/srf/SRF_Resumo_por_Estado/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento em duas etapas: detalhado \u2192 consolidado</li> <li>Expans\u00e3o autom\u00e1tica de agrupamentos de entidades</li> <li>Tratamento complexo de devolu\u00e7\u00f5es antes da consolida\u00e7\u00e3o</li> <li>Algoritmo de agrupamento manual por estado na mem\u00f3ria</li> <li>Manuten\u00e7\u00e3o da ordena\u00e7\u00e3o original durante a consolida\u00e7\u00e3o</li> <li>SQL com m\u00faltiplos joins para dados geogr\u00e1ficos</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/","title":"CGS - Parcelamento (Equilibrio)","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para c\u00e1lculo e gera\u00e7\u00e3o de parcelas de condi\u00e7\u00f5es de pagamento, considerando datas de vencimento, ajustes por dias da semana, feriados, valores m\u00ednimos por parcela e configura\u00e7\u00f5es espec\u00edficas do m\u00f3dulo Equilibrio.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular automaticamente as parcelas de uma condi\u00e7\u00e3o de pagamento, aplicando regras de vencimento, descontos, juros, multas e valida\u00e7\u00f5es de valores m\u00ednimos por parcela.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Faturamento</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Abe30</code> - Condi\u00e7\u00f5es de pagamento - <code>Abe3001</code> - Parcelas da condi\u00e7\u00e3o de pagamento - <code>Abe3002</code> - Dias complementares (ajustes de vencimento) - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens do documento fiscal</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o dtBase LocalDate Sim Data base para c\u00e1lculo das parcelas abe30id Long Sim ID da condi\u00e7\u00e3o de pagamento valor BigDecimal Sim Valor total a ser parcelado abe01id Long N\u00e3o ID da entidade (cliente) eaa01 Eaa01 N\u00e3o Documento fiscal relacionado"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Valida\u00e7\u00e3o dos par\u00e2metros obrigat\u00f3rios</li> <li>Carregamento da condi\u00e7\u00e3o de pagamento (Abe30)</li> <li>Defini\u00e7\u00e3o da data de emiss\u00e3o (do documento ou atual)</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#2-calculo-dos-ajustes-de-data","title":"2. C\u00e1lculo dos Ajustes de Data","text":"<ul> <li>Aplica\u00e7\u00e3o de dias adicionais conforme dia da semana da data base</li> <li>C\u00e1lculo de vencimentos nominais para cada parcela</li> <li>Ajustes por vencimentos fixos e dias espec\u00edficos</li> <li>Tratamento de meses com menos dias (ex: fevereiro)</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#3-calculo-dos-valores-das-parcelas","title":"3. C\u00e1lculo dos Valores das Parcelas","text":"<ul> <li>Distribui\u00e7\u00e3o percentual do valor total</li> <li>C\u00e1lculo do saldo para \u00faltima parcela</li> <li>Aplica\u00e7\u00e3o de juros, multas e encargos</li> <li>C\u00e1lculo de descontos por antecipa\u00e7\u00e3o</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#4-validacoes-e-regras-especiais","title":"4. Valida\u00e7\u00f5es e Regras Especiais","text":"<ul> <li>Verifica\u00e7\u00e3o de valor m\u00ednimo por parcela</li> <li>Op\u00e7\u00e3o de agrupamento em parcela \u00fanica</li> <li>C\u00e1lculo de comiss\u00f5es na \u00faltima parcela</li> <li>Valida\u00e7\u00e3o de documentos financeiros</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#configuracao-de-vencimentos","title":"Configura\u00e7\u00e3o de Vencimentos","text":"<ul> <li>Dias base: Ajustes por dia da semana na data base</li> <li>Vencimentos fixos: Datas espec\u00edficas por parcela</li> <li>Dias do m\u00eas: Vencimento em dia espec\u00edfico do m\u00eas</li> <li>Ajustes complementares: Regras por faixa de dias</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#calculo-financeiro","title":"C\u00e1lculo Financeiro","text":"<ul> <li>Juros: Percentual aplicado sobre o valor da parcela</li> <li>Multa: Percentual ou valor fixo</li> <li>Desconto: Percentual com limite temporal</li> <li>Encargos: Valores adicionais fixos</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#validacoes-de-parcelas","title":"Valida\u00e7\u00f5es de Parcelas","text":"<ul> <li>Valor m\u00ednimo: Configur\u00e1vel por condi\u00e7\u00e3o de pagamento</li> <li>Op\u00e7\u00f5es: 0 - Agrupar em uma parcela, 1 - Validar valor m\u00ednimo</li> <li>Comiss\u00f5es: Calculadas apenas na \u00faltima parcela</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#documentos-financeiros","title":"Documentos Financeiros","text":"<ul> <li>Tipo 1: Gera documento na data de vencimento</li> <li>Tipo 2: Gera documento na data de emiss\u00e3o</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de parcelamento.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#obterdiasadicionaisadatalocaldate-data-abe30-abe30-int-qualdata","title":"<code>obterDiasAdicionaisAData(LocalDate data, Abe30 abe30, int qualData)</code>","text":"<p>Calcula dias adicionais baseado no dia da semana: - 0: Dias para data base - 1: Dias para vencimento nominal</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#buscarcondicaopagamentoporidlong-abe30id","title":"<code>buscarCondicaoPagamentoPorId(Long abe30id)</code>","text":"<p>Busca a condi\u00e7\u00e3o de pagamento pelo ID.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#buscarparcelaspeloidcondicaopagamentolong-abe30id","title":"<code>buscarParcelasPeloIdCondicaoPagamento(Long abe30id)</code>","text":"<p>Busca as parcelas configuradas para a condi\u00e7\u00e3o de pagamento.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#buscardiacomplementarpeloidcondicaopagamentolong-abe30id","title":"<code>buscarDiaComplementarPeloIdCondicaoPagamento(Long abe30id)</code>","text":"<p>Busca ajustes complementares de dias.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#montarparceladtolocaldate-data-bigdecimal-valor-integer-docfinanc-abe3001-abe3001-tablemap-cposlivres","title":"<code>montarParcelaDto(LocalDate data, BigDecimal valor, Integer docFinanc, Abe3001 abe3001, TableMap cposLivres)</code>","text":"<p>Monta o DTO da parcela com todos os dados calculados.</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>ParcelaDto: - <code>vctoN</code> - Data de vencimento nominal - <code>valor</code> - Valor da parcela - <code>criaDoc</code> - Tipo de documento financeiro (1 ou 2) - <code>abf15id</code> - ID do portador - <code>abf16id</code> - ID da opera\u00e7\u00e3o - <code>abf40id</code> - ID da forma de pagamento - <code>cposLivres</code> - Campos livres (juros, multa, desconto, etc.)</p> <p>Lista de Parcelas: - Retornada no par\u00e2metro <code>listaParcelas</code></p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e consultas ao banco - <code>multitec.utils</code> - Utilit\u00e1rios de data - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.cgs</code> - DTOs do m\u00f3dulo CGS - <code>sam.model</code> - Entidades do sistema - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>M\u00f3dulo: Equilibrio</p>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#tratamento-de-datas","title":"Tratamento de Datas","text":"<ul> <li>Ajustes autom\u00e1ticos para finais de semana</li> <li>Tratamento especial para fevereiro (meses com menos dias)</li> <li>Suporte a vencimentos fixos e vari\u00e1veis</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#campos-livres-json","title":"Campos Livres (JSON)","text":"<ul> <li><code>juros</code> - Valor calculado de juros</li> <li><code>multa</code> - Valor calculado de multa</li> <li><code>encargos</code> - Encargos adicionais</li> <li><code>desconto</code> - Valor de desconto por antecipa\u00e7\u00e3o</li> <li><code>dtLimiteDesc</code> - Data limite para desconto</li> <li><code>nomevcto</code> - Nome personalizado do vencimento</li> <li><code>comissao_parcela</code> - Comiss\u00e3o na \u00faltima parcela</li> </ul>"},{"location":"EQUILIBRIO/formulas/cgs/CGS_Parcelamento/#validacoes-de-negocio","title":"Valida\u00e7\u00f5es de Neg\u00f3cio","text":"<ul> <li>Interrup\u00e7\u00e3o se valor m\u00ednimo n\u00e3o for atingido</li> <li>C\u00e1lculo preciso de saldos para evitar diferen\u00e7as</li> <li>Suporte a condi\u00e7\u00f5es complexas de pagamento</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:00 Autor: Bruno Tipo: F\u00f3rmula de Condi\u00e7\u00e3o de Pagamento Vers\u00e3o: 1.0</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Equilibrio)","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Equilibrio, com tratamento de caracteres especiais e c\u00f3pia obrigat\u00f3ria para e-mail interno.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) incluindo c\u00f3pia para contato@equilibrioind.com.br e tratamento de normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Administra\u00e7\u00e3o</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> <li>Normaliza\u00e7\u00e3o de caracteres para remover acentos</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE + c\u00f3pia interna</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> <li>C\u00f3pia Interna: contato@equilibrioind.com.br (apenas faturamento)</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE (boleto opcional)</li> <li>Cobran\u00e7a: Apenas boleto</li> <li>C\u00f3pia Interna: XML + DANFE</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Faturamento/C\u00f3pia Interna: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a)</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-especificas","title":"Funcionalidades Espec\u00edficas","text":"<ul> <li>Normaliza\u00e7\u00e3o de Caracteres: Remove acentos do nome do cliente</li> <li>C\u00f3pia Obrigat\u00f3ria: contato@equilibrioind.com.br para todos os faturamentos</li> <li>Transportadora: C\u00f3digo comentado - n\u00e3o envia e-mails para transportadora</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Envia boleto junto com faturamento se mesmo e-mail</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML e normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem (caracteres normalizados) - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema - <code>java.text.Normalizer</code> - Normaliza\u00e7\u00e3o de caracteres</p> <p>M\u00f3dulo: Equilibrio</p>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer.normalize(corpo, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\")</code></li> <li>Remove acentos e caracteres especiais do nome do cliente</li> <li>Aplica tanto no corpo da mensagem quanto no nome do cliente</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#copia-interna-obrigatoria","title":"C\u00f3pia Interna Obrigat\u00f3ria","text":"<ul> <li>E-mail: contato@equilibrioind.com.br</li> <li>Apenas para opera\u00e7\u00f5es de faturamento (n\u00e3o cancelamento/CC-e)</li> <li>Recebe XML e DANFE para controle interno</li> </ul>"},{"location":"EQUILIBRIO/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-comentadas","title":"Funcionalidades Comentadas","text":"<ul> <li>M\u00e9todo <code>obterEmailTransportadoraDespacho()</code> dispon\u00edvel mas n\u00e3o utilizado</li> <li>Bloco de c\u00f3digo para transportadora comentado</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:48 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Equilibrio) Vers\u00e3o: 1.0</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/","title":"SCV - Separa\u00e7\u00e3o de Pedido (Equilibrio)","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Classe Groovy especializada na gera\u00e7\u00e3o de relat\u00f3rios de separa\u00e7\u00e3o de pedidos e envio automatizado de e-mails para o sistema SCV da Equilibrio.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar relat\u00f3rios de separa\u00e7\u00e3o de pedidos em formato PDF/XLSX e enviar por e-mail para clientes, com controle de filtros avan\u00e7ados e composi\u00e7\u00e3o completa de dados do pedido.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento de Vendas</li> <li>Log\u00edstica e Separa\u00e7\u00e3o</li> <li>Faturamento</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos de pedidos - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0103</code> - Itens do pedido - <code>Aac10</code> - Empresas - <code>Abe0104</code> - E-mails das entidades - <code>Aab1008</code> - Configura\u00e7\u00f5es de usu\u00e1rio</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#parametros-da-classe","title":"\u2699\ufe0f Par\u00e2metros da Classe","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o tipos List N\u00e3o Tipos de documento entidades List N\u00e3o Entidades (clientes) numeroInicial Integer Sim N\u00famero inicial do pedido numeroFinal Integer Sim N\u00famero final do pedido impressao Integer Sim 0=PDF, 1=XLSX atendimento Boolean Sim Filtro de atendimento eaa01id Long N\u00e3o Filtro por separador espec\u00edfico enviaEmail Boolean N\u00e3o Habilitar envio por e-mail"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de filtro</li> <li>Defini\u00e7\u00e3o do caminho do logo para relat\u00f3rios</li> <li>Carregamento de IDs de documentos com base nos crit\u00e9rios</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#2-composicao-de-dados-do-pedido","title":"2. Composi\u00e7\u00e3o de Dados do Pedido","text":"<ul> <li>Dados do Documento: N\u00famero, data, valores, observa\u00e7\u00f5es</li> <li>Dados da Empresa: Raz\u00e3o social, CNPJ, endere\u00e7o, contato</li> <li>Dados do Cliente: Nome, CNPJ/CPF, endere\u00e7o, e-mail</li> <li>Dados Financeiros: Condi\u00e7\u00e3o de pagamento, forma de pagamento</li> <li>Dados de Entrega: Endere\u00e7o, transportadora, tipo de frete</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#3-processamento-de-itens","title":"3. Processamento de Itens","text":"<ul> <li>Busca de itens do pedido com sequ\u00eancia</li> <li>C\u00e1lculo de volumes e pesos l\u00edquidos</li> <li>Agrupamento de n\u00fameros de pedido de compra</li> <li>Formata\u00e7\u00e3o de descontos e valores</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#4-geracao-de-saida","title":"4. Gera\u00e7\u00e3o de Sa\u00edda","text":"<ul> <li>PDF: Relat\u00f3rio formatado para impress\u00e3o</li> <li>XLSX: Planilha para an\u00e1lise de dados</li> <li>E-mail: Envio autom\u00e1tico com anexo PDF</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#filtros-de-documentos","title":"Filtros de Documentos","text":"<ul> <li>Apenas documentos n\u00e3o cancelados (<code>eaa01cancData is null</code>)</li> <li>Apenas documentos classificados como venda (<code>eaa01clasdoc = 0</code>)</li> <li>Apenas documentos com aceite confirmado (<code>eaa01aceite = 1</code>)</li> <li>Filtro por per\u00edodo de emiss\u00e3o e entrega</li> <li>Filtro por status de atendimento (0, 1, 2)</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#composicao-de-valores","title":"Composi\u00e7\u00e3o de Valores","text":"<ul> <li>Frete: Soma de valores do emitente e destinat\u00e1rio</li> <li>Desconto: Extra\u00eddo do JSON do documento</li> <li>Impostos: IPI, ICMS-ST, despesas acess\u00f3rias</li> <li>Valores: Unit\u00e1rio, total e total do documento</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#envio-de-e-mail","title":"Envio de E-mail","text":"<ul> <li>Requer e-mail cadastrado para o usu\u00e1rio logado</li> <li>Busca e-mails de destino na entidade (c\u00f3digo 9001)</li> <li>Inclui assinatura digital se configurada</li> <li>Anexa PDF do pedido com nome personalizado</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de gera\u00e7\u00e3o do relat\u00f3rio.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#enviaremailinteger-numeroinicial-listtablemap-dadospedido","title":"<code>enviarEmail(Integer numeroInicial, List&lt;TableMap&gt; dadosPedido)</code>","text":"<p>Envia relat\u00f3rio por e-mail com PDF anexo para os destinat\u00e1rios configurados.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#buscardocidslistlong-tipos-listlong-entidades","title":"<code>buscarDocIds(List&lt;Long&gt; tipos, List&lt;Long&gt; entidades, ...)</code>","text":"<p>Busca IDs de documentos com base nos crit\u00e9rios de filtro aplicados.</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#metodos-de-composicao","title":"M\u00e9todos de Composi\u00e7\u00e3o","text":"<ul> <li><code>comporDocumento()</code>: Dados b\u00e1sicos do documento</li> <li><code>comporDadosEmpresa()</code>: Informa\u00e7\u00f5es da empresa</li> <li><code>comporDadosEntidade()</code>: Dados do cliente</li> <li><code>comporDadosEntidadeEndereco()</code>: Endere\u00e7o completo</li> <li><code>comporDadosFinanceiro()</code>: Condi\u00e7\u00f5es financeiras</li> <li><code>comporDadosEntrega()</code>: Dados de entrega e frete</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>TableMap Principal: - Dados do documento (n\u00famero, data, valores totais) - Dados da empresa (raz\u00e3o social, endere\u00e7o, contato) - Dados do cliente (nome, endere\u00e7o, e-mail) - Dados financeiros (condi\u00e7\u00e3o pagamento) - Dados de entrega (endere\u00e7o, transportadora, frete)</p> <p>Lista de Itens: - Sequ\u00eancia, c\u00f3digo, descri\u00e7\u00e3o do produto - Quantidade, valor unit\u00e1rio, valor total - Volume, peso l\u00edquido, pedido de compra - Controle de qualidade (abm15nome)</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>JasperReports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>Java Mail</code> - Envio de e-mails - <code>MultiORM</code> - Persist\u00eancia e consultas - <code>Utils Multitec</code> - Utilit\u00e1rios corporativos - <code>Java Time</code> - Manipula\u00e7\u00e3o de datas</p> <p>M\u00f3dulo: SCV - Sistema de Controle de Vendas</p>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer</code> para remover acentos do nome da empresa no e-mail</li> <li>Garante compatibilidade com sistemas de e-mail</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#tratamento-de-json","title":"Tratamento de JSON","text":"<ul> <li>Extra\u00e7\u00e3o de valores customizados do campo JSON dos documentos</li> <li>Flexibilidade para campos din\u00e2micos sem altera\u00e7\u00e3o de estrutura</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#configuracao-de-logotipo","title":"Configura\u00e7\u00e3o de Logotipo","text":"<ul> <li>Caminho din\u00e2mico baseado no package da classe</li> <li>Suporte a diferentes ambientes de deployment</li> </ul>"},{"location":"EQUILIBRIO/relatorios/scv/SCV_SeparacaoPedido/#controle-de-acesso","title":"Controle de Acesso","text":"<ul> <li>Verifica\u00e7\u00e3o de permiss\u00f5es atrav\u00e9s do m\u00e9todo <code>obterWherePadrao()</code></li> <li>Filtragem por empresa ativa do usu\u00e1rio logado</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 23/10/2025 \u00e0s 17:25 Autor: Bruno Tipo: Relat\u00f3rio de Separa\u00e7\u00e3o de Pedidos Vers\u00e3o: 1.0</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Foco)","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Foco, com tratamento de caracteres especiais e configura\u00e7\u00e3o simplificada de envio.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) com foco em simplicidade e tratamento de normaliza\u00e7\u00e3o de caracteres, adaptado para as necessidades do m\u00f3dulo Foco.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> <li>Normaliza\u00e7\u00e3o de caracteres para remover acentos</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE + boleto</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto (se diferente)</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE + boleto</li> <li>Cobran\u00e7a: Apenas boleto</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Todos os e-mails: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Tamb\u00e9m usa remetente 2</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-especificas","title":"Funcionalidades Espec\u00edficas","text":"<ul> <li>Normaliza\u00e7\u00e3o de Caracteres: Remove acentos do nome do cliente</li> <li>Boleto no Faturamento: Sempre enviado junto com XML e DANFE</li> <li>Configura\u00e7\u00e3o Simplificada: Sem c\u00f3pias internas ou representantes</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Sempre envia boleto no e-mail de faturamento</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML e normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem (caracteres normalizados) - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (2: Faturamento para todos)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema - <code>java.text.Normalizer</code> - Normaliza\u00e7\u00e3o de caracteres</p> <p>M\u00f3dulo: Foco</p>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer.normalize(corpo, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\")</code></li> <li>Remove acentos e caracteres especiais do nome do cliente</li> <li>Aplica tanto no corpo da mensagem quanto no nome do cliente</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#configuracao-simplificada","title":"Configura\u00e7\u00e3o Simplificada","text":"<ul> <li>Sem c\u00f3pias internas para administra\u00e7\u00e3o</li> <li>Sem e-mails para representantes</li> <li>Sem e-mails para transportadora</li> <li>Foco apenas no cliente final</li> </ul>"},{"location":"FOCO/fromulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-cobranca","title":"Configura\u00e7\u00e3o de Cobran\u00e7a","text":"<ul> <li>Remetente 2 para todos os e-mails (inclusive cobran\u00e7a)</li> <li>Boleto sempre enviado no faturamento</li> <li>E-mail de cobran\u00e7a separado apenas se diferente do faturamento</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:47 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Foco) Vers\u00e3o: 1.0</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (LCB)","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo LCB, com tratamento de caracteres especiais, c\u00f3pia obrigat\u00f3ria para e-mail da empresa e configura\u00e7\u00e3o espec\u00edfica de cobran\u00e7a.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) incluindo c\u00f3pia para e-mail configurado na empresa e tratamento de normaliza\u00e7\u00e3o de caracteres, adaptado para as necessidades do m\u00f3dulo LCB.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Administra\u00e7\u00e3o</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades - <code>Aac10</code> - Empresa (para e-mail de c\u00f3pia)</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> <li>Normaliza\u00e7\u00e3o de caracteres para remover acentos</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE + boleto + c\u00f3pia interna</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> <li>C\u00f3pia Interna: E-mail configurado na empresa (Aac10.json)</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE + boleto</li> <li>Cobran\u00e7a: Apenas boleto</li> <li>C\u00f3pia Interna: XML + DANFE</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Todos os e-mails: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Tamb\u00e9m usa remetente 2 (diferente de outros m\u00f3dulos)</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-especificas","title":"Funcionalidades Espec\u00edficas","text":"<ul> <li>Normaliza\u00e7\u00e3o de Caracteres: Remove acentos do nome do cliente</li> <li>C\u00f3pia Obrigat\u00f3ria: E-mail configurado em <code>obterEmpresaAtiva().aac10json.getString(\"email\")</code></li> <li>Boleto no Faturamento: Sempre enviado junto com XML e DANFE</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Sempre envia boleto no e-mail de faturamento</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML e normaliza\u00e7\u00e3o de caracteres.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem (caracteres normalizados) - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (2: Faturamento para todos)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema - <code>java.text.Normalizer</code> - Normaliza\u00e7\u00e3o de caracteres</p> <p>M\u00f3dulo: LCB</p>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#normalizacao-de-caracteres","title":"Normaliza\u00e7\u00e3o de Caracteres","text":"<ul> <li>Uso de <code>Normalizer.normalize(corpo, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\")</code></li> <li>Remove acentos e caracteres especiais do nome do cliente</li> <li>Aplica tanto no corpo da mensagem quanto no nome do cliente</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#copia-interna-dinamica","title":"C\u00f3pia Interna Din\u00e2mica","text":"<ul> <li>E-mail obtido de <code>obterEmpresaAtiva().aac10json.getString(\"email\")</code></li> <li>Configur\u00e1vel por empresa via campo JSON</li> <li>Apenas para opera\u00e7\u00f5es de faturamento (n\u00e3o cancelamento/CC-e)</li> </ul>"},{"location":"LCB/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-cobranca","title":"Configura\u00e7\u00e3o de Cobran\u00e7a","text":"<ul> <li>Remetente 2 para todos os e-mails (inclusive cobran\u00e7a)</li> <li>Boleto sempre enviado no faturamento</li> <li>E-mail de cobran\u00e7a separado apenas se diferente do faturamento</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:37 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (LCB) Vers\u00e3o: 1.0</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/","title":"SCC Documentos de Comiss\u00f5es","text":""},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de comiss\u00f5es para representantes com vers\u00f5es anal\u00edtica e sint\u00e9tica, permitindo acompanhamento detalhado ou consolidado dos valores a pagar.</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Controlar e analisar as comiss\u00f5es de representantes, oferecendo vis\u00e3o detalhada por documento ou vis\u00e3o consolidada por representante, com flexibilidade de filtros por datas e status de c\u00e1lculo.</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Controladoria</li> <li>Gest\u00e3o de Representantes</li> <li>Departamento Financeiro</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DCB01</code> - Base de c\u00e1lculo de comiss\u00f5es - <code>ABB01</code> - Documentos de comiss\u00f5es - <code>ABE01</code> - Representantes e entidades - <code>AAH01</code> - Tipos de documento - <code>DAA01</code> - Documentos a receber - <code>DCD01</code> - C\u00e1lculos de comiss\u00f5es</p> <p>Entidades Envolvidas: - <code>Dcb01</code> - C\u00e1lculo de comiss\u00f5es - <code>Abe01</code> - Representantes e clientes - <code>Abb01</code> - Documentos - <code>Aac10</code> - Empresa</p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis layout Integer Sim Tipo de relat\u00f3rio 0=Anal\u00edtico, 1=Sint\u00e9tico dataCalculo Integer Sim Status do c\u00e1lculo 0=N\u00e3o calculado, 1=Calculado, 2=Todos numeroInicial Integer N\u00e3o N\u00famero documento inicial \u2265 0 numeroFinal Integer N\u00e3o N\u00famero documento final \u2265 0 representantes List N\u00e3o Representantes espec\u00edficos IDs representantes emissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o Data inicial e final dataCredito LocalDate[] N\u00e3o Per\u00edodo de cr\u00e9dito Data inicial e final imprimir Integer Sim Formato de sa\u00edda 0=PDF, 1=XLSX"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":""},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#layout-analitico","title":"Layout Anal\u00edtico","text":"Campo Descri\u00e7\u00e3o Tipo repCod C\u00f3digo representante String repNome Nome representante String abb01num N\u00famero documento Integer abb01parcela Parcela documento String entCod C\u00f3digo cliente String entNa Nome reduzido cliente String abb01data Data emiss\u00e3o Date dcb01dtCredito Data cr\u00e9dito Date abb01valor Valor documento BigDecimal dcb01bc Base c\u00e1lculo comiss\u00e3o BigDecimal dcb01taxa Taxa comiss\u00e3o BigDecimal dcb01valor Valor comiss\u00e3o BigDecimal"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#layout-sintetico","title":"Layout Sint\u00e9tico","text":"Campo Descri\u00e7\u00e3o Tipo repCod C\u00f3digo representante String repNome Nome representante String abb01valor Soma valores documentos BigDecimal dcb01bc Soma base c\u00e1lculo BigDecimal dcb01valor Soma valores comiss\u00e3o BigDecimal"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Define layout (anal\u00edtico/sint\u00e9tico)</li> <li>Processa filtros de datas (emiss\u00e3o/cr\u00e9dito)</li> <li> <p>Valida status de c\u00e1lculo</p> </li> <li> <p>Sele\u00e7\u00e3o de Consulta</p> </li> <li>Anal\u00edtico: Detalhamento por documento</li> <li>Sint\u00e9tico: Consolida\u00e7\u00e3o por representante</li> <li> <p>Aplica filtros comuns a ambos</p> </li> <li> <p>Constru\u00e7\u00e3o da Consulta</p> </li> <li>Monta SQL com joins espec\u00edficos</li> <li>Aplica filtros din\u00e2micos</li> <li> <p>Define ordena\u00e7\u00e3o conforme layout</p> </li> <li> <p>Processamento de Dados</p> </li> <li>Busca dados do banco</li> <li>Calcula totais (sint\u00e9tico)</li> <li> <p>Formata informa\u00e7\u00f5es</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Seleciona template conforme layout</li> <li>Exporta para PDF ou XLSX</li> <li>Formata cabe\u00e7alho com per\u00edodo</li> </ol>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#filtros-de-data","title":"Filtros de Data","text":"<ul> <li>Emiss\u00e3o: Data do documento original</li> <li>Cr\u00e9dito: Data de cr\u00e9dito da comiss\u00e3o</li> <li>Per\u00edodo exibido no cabe\u00e7alho conforme filtro aplicado</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#status-de-calculo","title":"Status de C\u00e1lculo","text":"<ul> <li>N\u00e3o calculado: <code>centralCalc.abb01data is null</code></li> <li>Calculado: <code>centralCalc.abb01data is not null</code></li> <li>Todos: Sem filtro de c\u00e1lculo</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Apenas endere\u00e7os principais (<code>abe0101principal = 1</code>)</li> <li>Relacionamento com documentos a receber (<code>abb0101tabela = 'Daa01'</code>)</li> <li>Aplica filtros padr\u00e3o do sistema (<code>obterWherePadrao</code>)</li> </ul>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Layout Formato Template M\u00e9todo Anal\u00edtico PDF <code>SCC_DocumentosComissoes_Analitico</code> <code>gerarPDF()</code> Anal\u00edtico XLSX <code>SCC_DocumentosComissoes_Analitico</code> <code>gerarXLSX()</code> Sint\u00e9tico PDF <code>SCC_DocumentosComissoes_Sintetico</code> <code>gerarPDF()</code> Sint\u00e9tico XLSX <code>SCC_DocumentosComissoes_Sintetico</code> <code>gerarXLSX()</code>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multitec.utils</code> - Utilit\u00e1rios e datas - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios</p> <p>Configura\u00e7\u00f5es: - Templates Jasper para layouts anal\u00edtico e sint\u00e9tico - Filtros padr\u00e3o do sistema para entidade <code>DCB01</code></p>"},{"location":"LINHASITA/relatorio/scc/SCC_Documentos_de_Comiss%C3%B5es/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>SQL din\u00e2mico com m\u00faltiplos joins para relacionamentos</li> <li>Dois templates distintos para anal\u00edtico/sint\u00e9tico</li> <li>Flexibilidade de filtros por datas diferentes</li> <li>Ordena\u00e7\u00e3o espec\u00edfica por layout</li> <li>Suporte a m\u00faltiplos representantes</li> <li>Controle de status de c\u00e1lculo das comiss\u00f5es</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/","title":"SCF_BoletoBancoBrasil - Gera\u00e7\u00e3o e Envio de Boletos Banco do Brasil","text":""},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema completo de gera\u00e7\u00e3o, impress\u00e3o e envio por email de boletos banc\u00e1rios do Banco do Brasil, seguindo o layout CNAB 400 com c\u00e1lculo autom\u00e1tico de c\u00f3digo de barras, linha digit\u00e1vel e valida\u00e7\u00f5es fiscais.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar todo o processo de cobran\u00e7a banc\u00e1ria, desde a gera\u00e7\u00e3o do boleto at\u00e9 o envio por email, garantindo conformidade com as regras do Banco do Brasil e proporcionando efici\u00eancia operacional para o departamento financeiro.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Tesouraria</li> <li>Cobran\u00e7a</li> <li>Faturamento</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o movimento Integer N\u00e3o Movimento espec\u00edfico dataProc LocalDate Sim Data de processamento carteira String N\u00e3o Carteira banc\u00e1ria aceite String N\u00e3o Aceite do t\u00edtulo instrucao1/2/3 String N\u00e3o Instru\u00e7\u00f5es do boleto numeroInicial/Final Integer N\u00e3o Range de n\u00fameros entidades List N\u00e3o Entidades espec\u00edficas dataVenc LocalDate[] N\u00e3o Per\u00edodo de vencimento eaa01id Long N\u00e3o ID documento SRF daa01id Long N\u00e3o ID documento SCF enviaBoletoPorEmail Boolean N\u00e3o Envio autom\u00e1tico"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#estrutura-do-boleto","title":"\ud83d\udccb Estrutura do Boleto","text":""},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#dados-do-cedente-empresa","title":"Dados do Cedente (Empresa):","text":"<ul> <li>Raz\u00e3o social, endere\u00e7o, CNPJ</li> <li>Ag\u00eancia, conta, d\u00edgitos</li> <li>C\u00f3digo do conv\u00eanio</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#dados-do-sacado-cliente","title":"Dados do Sacado (Cliente):","text":"<ul> <li>Nome, CNPJ/CPF, endere\u00e7o</li> <li>Munic\u00edpio, UF, CEP</li> <li>Email para envio</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#dados-do-titulo","title":"Dados do T\u00edtulo:","text":"<ul> <li>Nosso n\u00famero, n\u00famero documento</li> <li>Data vencimento, valor</li> <li>Parcela, juros</li> <li>C\u00f3digo de barras, linha digit\u00e1vel</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#1-validacao-e-filtragem","title":"1. Valida\u00e7\u00e3o e Filtragem","text":"<ul> <li>Processa m\u00faltiplas origens de dados (SRF, SCF, filtros)</li> <li>Aplica filtros por carteira, aceite, movimento</li> <li>Valida exist\u00eancia do banco e dados obrigat\u00f3rios</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#2-calculo-de-componentes-do-boleto","title":"2. C\u00e1lculo de Componentes do Boleto","text":"<ul> <li>Fator vencimento: Dias desde 07/10/1997</li> <li>Campo livre: Conforme regras BB</li> <li>C\u00f3digo de barras: Com d\u00edgito verificador</li> <li>Linha digit\u00e1vel: Formatada para impress\u00e3o</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#3-geracao-do-pdf","title":"3. Gera\u00e7\u00e3o do PDF","text":"<ul> <li>Monta dados para template JasperReports</li> <li>Aplica logo do Banco do Brasil</li> <li>Formata instru\u00e7\u00f5es e dados</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#4-envio-por-email-opcional","title":"4. Envio por Email (Opcional)","text":"<ul> <li>Agrupa boletos por documento origem</li> <li>Busca emails do cliente</li> <li>Envia em thread separada</li> <li>Atualiza status de impress\u00e3o</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#validacoes-de-dados","title":"Valida\u00e7\u00f5es de Dados:","text":"<ul> <li>Banco deve existir (abf01id obrigat\u00f3rio)</li> <li>Documento n\u00e3o pode estar pago (daa01dtPgto null)</li> <li>Endere\u00e7o de cobran\u00e7a obrigat\u00f3rio (abe0101cobranca = 1)</li> <li>Email destino obrigat\u00f3rio para envio</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#calculos-bancarios","title":"C\u00e1lculos Banc\u00e1rios:","text":"<ul> <li>Fator Vencimento: Base 07/10/1997, ajuste para &gt;9999 dias</li> <li>M\u00f3dulo 11: D\u00edgito verificador c\u00f3digo barras</li> <li>M\u00f3dulo 10: D\u00edgitos verificadores linha digit\u00e1vel</li> <li>Valor: Multiplicado por 100 (sem decimais)</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#layout-banco-do-brasil","title":"Layout Banco do Brasil:","text":"<ul> <li>C\u00f3digo banco: 001</li> <li>Moeda: 9 (Real)</li> <li>Campo livre: 6 zeros + 17 nosso n\u00famero + 2 carteira</li> <li>Formata\u00e7\u00e3o espec\u00edfica linha digit\u00e1vel</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#envio-de-email","title":"Envio de Email:","text":"<ul> <li>Agrupamento por documento origem</li> <li>Anexo PDF \u00fanico por grupo</li> <li>C\u00f3pia para boleto@linhasita.com.br</li> <li>Assinatura do usu\u00e1rio logado</li> <li>Thread separada para n\u00e3o bloquear interface</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Tipo Formato Descri\u00e7\u00e3o PDF Boleto banc\u00e1rio Layout padr\u00e3o BB Email HTML + Anexo Com instru\u00e7\u00f5es e contatos Banco Atualiza\u00e7\u00e3o status daa01imprDoc = 1"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":""},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#bibliotecas","title":"Bibliotecas:","text":"<ul> <li><code>Apache JasperReports</code> - Gera\u00e7\u00e3o PDF</li> <li><code>JavaMail</code> - Envio de emails</li> <li><code>MultiORM</code> - Acesso a dados</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#servicos","title":"Servi\u00e7os:","text":"<ul> <li><code>SCFService</code> - Servi\u00e7os financeiros</li> <li><code>FileSystem</code> - Manipula\u00e7\u00e3o de arquivos</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#entidades","title":"Entidades:","text":"<ul> <li><code>Daa01</code> - Documentos financeiros</li> <li><code>Abe01</code> - Entidades (clientes)</li> <li><code>Abf01</code> - Bancos</li> <li><code>Aac10</code> - Empresas</li> <li><code>Aab10</code> - Usu\u00e1rios</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#performance","title":"Performance:","text":"<ul> <li>Processamento em lote para m\u00faltiplos boletos</li> <li>Thread separada para envio de emails</li> <li>Consultas otimizadas com filtros no banco</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#seguranca","title":"Seguran\u00e7a:","text":"<ul> <li>Valida\u00e7\u00e3o de dados antes do processamento</li> <li>Verifica\u00e7\u00e3o de emails v\u00e1lidos</li> <li>Preven\u00e7\u00e3o de duplo processamento</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#tratamento-de-erros","title":"Tratamento de Erros:","text":"<ul> <li>Valida\u00e7\u00e3o de bancos suportados (apenas BB)</li> <li>Prote\u00e7\u00e3o contra divis\u00e3o por zero</li> <li>Tratamento de campos nulos</li> <li>Log de inconsist\u00eancias</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#customizacoes","title":"Customiza\u00e7\u00f5es:","text":"<ul> <li>Logo espec\u00edfica do Banco do Brasil</li> <li>Instru\u00e7\u00f5es personaliz\u00e1veis</li> <li>Texto de email configur\u00e1vel</li> <li>Assinatura digital do usu\u00e1rio</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_BoletoBancoBrasil/#limitacoes","title":"Limita\u00e7\u00f5es:","text":"<ul> <li>Suporte apenas ao Banco do Brasil (001)</li> <li>Formato CNAB 400 espec\u00edfico</li> <li>Estrutura fixa de campo livre</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/","title":"SCF Boleto Banco do Brasil","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o e envio de boletos banc\u00e1rios do Banco do Brasil para a Linhasita, com c\u00e1lculo autom\u00e1tico de c\u00f3digo de barras e linha digit\u00e1vel.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar a emiss\u00e3o de boletos banc\u00e1rios com envio por e-mail, garantindo a correta formata\u00e7\u00e3o dos campos according \u00e0s especifica\u00e7\u00f5es do Banco do Brasil e registro de status de impress\u00e3o.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Cobran\u00e7a</li> <li>Clientes/Fornecedores</li> <li>Faturamento</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Arquivo <code>LogoBancoBrasil.png</code> - Logo do banco - Template Jasper <code>SCF_BoletoBancoBrasil</code> - Layout do boleto</p> <p>Localiza\u00e7\u00e3o: <code>samdev/resources/linhasita/relatorios/scf/</code></p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA01</code> - Documentos a receber - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades/Clientes - <code>ABF01</code> - Dados banc\u00e1rios - <code>ABE0101</code> - Endere\u00e7os de cobran\u00e7a - <code>AAC10</code> - Dados da empresa</p> <p>Entidades Envolvidas: - <code>Daa01</code> - Documentos a receber - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Abe01</code> - Clientes - <code>Aab1008</code> - Configura\u00e7\u00e3o de e-mail do usu\u00e1rio</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis dataProc LocalDate Sim Data de processamento Data atual numeroInicial Integer N\u00e3o N\u00famero inicial do documento 000000000 numeroFinal Integer N\u00e3o N\u00famero final do documento 999999999 carteira String N\u00e3o Carteira banc\u00e1ria Especifica\u00e7\u00e3o BB aceite String N\u00e3o Aceite do t\u00edtulo S/N movimento Integer N\u00e3o Movimento espec\u00edfico ID movimento entidade List N\u00e3o Clientes espec\u00edficos IDs entidades dataVenc LocalDate[] N\u00e3o Per\u00edodo de vencimento Data inicial/final enviaBoletoPorEmail Boolean Sim Envio autom\u00e1tico true/false"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#campos-do-boleto","title":"\ud83d\udccb Campos do Boleto","text":"Campo Descri\u00e7\u00e3o Tipo daa01nossoNum Nosso n\u00famero String (10) daa01dtVctoN Data de vencimento Date daa01valor Valor do t\u00edtulo BigDecimal abe01nome Nome do cliente String abe01ni CNPJ/CPF String codigoBarras C\u00f3digo de barras String (44) codigoLinhaDigitavel Linha digit\u00e1vel String abf01agencia Ag\u00eancia String abf01conta Conta corrente String"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Processa filtros por n\u00famero, vencimento, entidades</li> <li> <p>Valida dados banc\u00e1rios obrigat\u00f3rios</p> </li> <li> <p>Busca de T\u00edtulos</p> </li> <li>Consulta documentos em aberto do Banco do Brasil (c\u00f3digo 001)</li> <li>Aplica filtros de cobran\u00e7a e vencimento</li> <li> <p>Busca por IDs espec\u00edficos ou por crit\u00e9rios</p> </li> <li> <p>C\u00e1lculo de Campos Banc\u00e1rios</p> </li> <li>Gera fator de vencimento (base 07/10/1997)</li> <li>Calcula c\u00f3digo de barras (m\u00f3dulo 11)</li> <li>Monta linha digit\u00e1vel (m\u00f3dulo 10)</li> <li> <p>Define campo livre conforme especifica\u00e7\u00e3o BB</p> </li> <li> <p>Processamento de Sa\u00edda</p> </li> <li>Gera PDF dos boletos</li> <li>Se solicitado, envia e-mails para clientes</li> <li> <p>Registra status de impress\u00e3o</p> </li> <li> <p>Envio por E-mail (opcional)</p> </li> <li>Agrupa boletos por documento origem</li> <li>Valida e-mails de cobran\u00e7a dos clientes</li> <li>Envia em lote com assinatura</li> </ol>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Considera apenas banco 001 (Banco do Brasil)</li> <li>Apenas documentos n\u00e3o pagos (<code>daa01dtPgto is null</code>)</li> <li>Endere\u00e7o de cobran\u00e7a obrigat\u00f3rio (<code>abe0101cobranca = 1</code>)</li> <li>Usu\u00e1rio deve ter e-mail configurado para envio</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#calculos-bancarios","title":"C\u00e1lculos Banc\u00e1rios","text":"<ul> <li>Fator Vencimento: Dias desde 07/10/1997</li> <li>C\u00f3digo Barras: M\u00f3dulo 11 com pesos 2-9</li> <li>Linha Digit\u00e1vel: M\u00f3dulo 10 com formata\u00e7\u00e3o espec\u00edfica</li> <li>Campo Livre: 6 zeros + 17 nosso n\u00famero + 2 carteira</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#formatacao","title":"Formata\u00e7\u00e3o","text":"<ul> <li>Nosso n\u00famero com 10 d\u00edgitos</li> <li>Valores em centavos (multiplicados por 100)</li> <li>Campos num\u00e9ricos com zeros \u00e0 esquerda</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Boleto formatado <code>gerarPDF()</code> E-mail Envio autom\u00e1tico para clientes <code>enviarBoletosPorEmail()</code>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>javax.mail</code> - Envio de e-mails - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos</p> <p>Servi\u00e7os: - <code>SCFService</code> - Servi\u00e7os do m\u00f3dulo financeiro</p> <p>Configura\u00e7\u00f5es: - E-mail do usu\u00e1rio logado (<code>Aab1008</code>) - E-mails de cobran\u00e7a (classifica\u00e7\u00e3o 01 e 03)</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Boleto_Banco_do_Brasil/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Implementa c\u00e1lculo completo de c\u00f3digo de barras segundo especifica\u00e7\u00e3o BB</li> <li>Suporte a m\u00faltiplos formatos de entrada (IDs espec\u00edficos ou filtros)</li> <li>Envio ass\u00edncrono de e-mails em lote com Thread separada</li> <li>Valida\u00e7\u00e3o de e-mails de cobran\u00e7a com fallback para e-mails de endere\u00e7o</li> <li>Registro autom\u00e1tico de status de impress\u00e3o dos documentos</li> <li>Formata\u00e7\u00e3o espec\u00edfica para Banco do Brasil (carteira, convenio, aceite)</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/","title":"SCF_Documentos.md","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de relat\u00f3rios para documentos financeiros do SCF (Sistema de Controle Financeiro) da Linhasita, permitindo a gera\u00e7\u00e3o de relat\u00f3rios anal\u00edticos e sint\u00e9ticos de documentos a receber, recebidos, a pagar e pagos.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer relat\u00f3rios financeiros completos e flex\u00edveis para an\u00e1lise de documentos, com diferentes op\u00e7\u00f5es de ordena\u00e7\u00e3o, filtros e formatos de sa\u00edda.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Controladoria</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> <li>Diretoria</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Classe <code>SCF_Documentos</code> - Relat\u00f3rio de documentos financeiros</p> <p>Localiza\u00e7\u00e3o: <code>linhasita/relatorios/scf/</code></p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>DAA01</code> - Documentos financeiros - <code>ABB01</code> - Documentos fiscais - <code>ABE01</code> - Entidades/Clientes - <code>ABF15</code> - Portadores - <code>ABF16</code> - Opera\u00e7\u00f5es - <code>ABF20</code> - PLF (Plano de Livro Fiscal) - <code>AAC10</code> - Empresas</p> <p>Entidades Envolvidas: - <code>Daa01</code> - Documentos financeiros - <code>Abb01</code> - Documentos fiscais - <code>Abe01</code> - Entidades - <code>Abf15</code> - Portadores - <code>Abf16</code> - Opera\u00e7\u00f5es - <code>Abf20</code> - PLF - <code>Aac10</code> - Empresas</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o ordem Integer Sim Tipo de ordena\u00e7\u00e3o (0-N\u00famero, 1-Vencimento, 2-Entidade, 3-Pagamento, 4-Portador, 5-Representante) classe Integer Sim Tipo de documento (0-\u00c0 Receber, 1-Recebidos, 2-\u00c0 Pagar, 3-Pagos, 4-\u00c0 Receber/Recebidos, 5-\u00c0 Pagar/Pagos) numeroInicial Integer Sim N\u00famero inicial do documento numeroFinal Integer Sim N\u00famero final do documento empresas List N\u00e3o Lista de empresas para filtro entidade List N\u00e3o Lista de entidades para filtro dataVenc LocalDate[] N\u00e3o Per\u00edodo de vencimento dataEmissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o tipoData Integer N\u00e3o Tipo de data (0-Pagamento, 1-Recebimento) sintetico Boolean N\u00e3o Relat\u00f3rio sint\u00e9tico vencimento Integer N\u00e3o Tipo de vencimento (0-Real, 1-Nominal)"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo PDF/XLSX Relat\u00f3rio formatado Arquivo documentos Lista de documentos processados List"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define valores padr\u00e3o para filtros</li> <li>Obt\u00e9m empresas acess\u00edveis ao usu\u00e1rio</li> <li> <p>Configura t\u00edtulo do relat\u00f3rio baseado na classe selecionada</p> </li> <li> <p>Processamento de Filtros</p> </li> <li>Aplica filtros de data, entidade, documento, etc.</li> <li>Define ordena\u00e7\u00e3o conforme par\u00e2metro</li> <li> <p>Configura condi\u00e7\u00f5es WHERE din\u00e2micas</p> </li> <li> <p>Busca de Documentos</p> </li> <li>Executa consulta SQL com filtros aplicados</li> <li>Processa dados de juros, multa e desconto</li> <li> <p>Calcula dias em atraso</p> </li> <li> <p>Gera\u00e7\u00e3o do Relat\u00f3rio</p> </li> <li>Seleciona template baseado na ordena\u00e7\u00e3o</li> <li>Gera PDF ou XLSX conforme sele\u00e7\u00e3o</li> <li>Retorna arquivo para download</li> </ol>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#filtros-e-ordenacao","title":"Filtros e Ordena\u00e7\u00e3o","text":"<ul> <li>Ordena\u00e7\u00e3o por n\u00famero, vencimento, entidade, pagamento, portador ou representante</li> <li>Filtro por per\u00edodo de emiss\u00e3o, vencimento ou pagamento/recebimento</li> <li>Suporte a documentos \u00e0 receber e a pagar</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#calculos-financeiros","title":"C\u00e1lculos Financeiros","text":"<ul> <li>C\u00e1lculo autom\u00e1tico de juros e multa baseado em JSON do documento</li> <li>C\u00e1lculo de dias em atraso</li> <li>Tratamento de descontos</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#acesso-a-dados","title":"Acesso a Dados","text":"<ul> <li>Restri\u00e7\u00e3o por empresas acess\u00edveis ao usu\u00e1rio</li> <li>Filtro por PLF (Plano de Livro Fiscal)</li> <li>Suporte a documentos transmutados</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#tipos-de-relatorio","title":"\ud83c\udfa8 Tipos de Relat\u00f3rio","text":"Tipo Descri\u00e7\u00e3o Template Anal\u00edtico Detalhado por documento SCF_Documentos Por Entidade Agrupado por entidade SCF_DocumentosEntidade Por Portador Agrupado por portador SCF_DocumentosPortador Por Representante Agrupado por representante SCF_DocumentosRepresentante Sint\u00e9tico Resumido SCF_DocumentosSintetico2"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>multitec.utils</code> - Utilit\u00e1rios e cole\u00e7\u00f5es - <code>sam.server.samdev.relatorio</code> - Framework de relat\u00f3rios</p> <p>Consultas: - Busca de documentos com m\u00faltiplos filtros - C\u00e1lculo de empresas acess\u00edveis - Agrega\u00e7\u00e3o de dados por diferentes crit\u00e9rios</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a m\u00faltiplos formatos de sa\u00edda (PDF/XLSX)</li> <li>Consulta otimizada com LEFT JOIN e ROW_NUMBER para dados mais recentes</li> <li>Tratamento de dados JSON para c\u00e1lculos financeiros</li> <li>Flexibilidade total na ordena\u00e7\u00e3o e agrupamento</li> <li>Filtros din\u00e2micos baseados em par\u00e2metros</li> <li>Suporte a documentos pr\u00e9vios (previs\u00e3o) e reais</li> <li>Controle de acesso por empresa</li> </ul>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#metodos-principais","title":"\ud83d\udd04 M\u00e9todos Principais","text":""},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de gera\u00e7\u00e3o do relat\u00f3rio.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#buscadocumentos","title":"<code>buscaDocumentos()</code>","text":"<p>Executa a consulta SQL principal com todos os filtros aplicados.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#criarvaloresiniciais","title":"<code>criarValoresIniciais()</code>","text":"<p>Configura valores padr\u00e3o e acessos iniciais.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#empresasacessiveis","title":"<code>empresasAcessiveis()</code>","text":"<p>Retorna lista de empresas que o usu\u00e1rio logado tem acesso.</p>"},{"location":"LINHASITA/relatorio/scf/SCF_Documentos/#consulta-sql","title":"\ud83d\udca1 Consulta SQL","text":"<p>A consulta principal utiliza: - <code>ROW_NUMBER()</code> para obter o registro mais recente da <code>daa0103</code> - M\u00faltiplos <code>LEFT JOIN</code> para relacionar todas as entidades - Cl\u00e1usulas <code>WHERE</code> din\u00e2micas baseadas nos filtros - <code>ORDER BY</code> flex\u00edvel baseado no par\u00e2metro de ordena\u00e7\u00e3o</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/","title":"SCV_FaturamentoDiarioDetalhado.md","text":""},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o de relat\u00f3rio de faturamento di\u00e1rio detalhado para a Linhasita, com consolida\u00e7\u00e3o de dados por filial e tipo de opera\u00e7\u00e3o.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer uma vis\u00e3o detalhada do faturamento di\u00e1rio da empresa, permitindo o acompanhamento do processo de faturamento por filiais e tipos de opera\u00e7\u00e3o comercial.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Faturamento</li> <li>Controladoria</li> <li>Gest\u00e3o Comercial</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Template Jasper <code>SCV_FaturamentoDiarioDetalhado</code> - Layout do relat\u00f3rio</p> <p>Localiza\u00e7\u00e3o: <code>linhasita/relatorios/scv/</code></p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>AAC10</code> - Empresas/Filiais - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABB10</code> - Opera\u00e7\u00f5es comerciais - <code>ABA20</code> - Reposit\u00f3rio de dados (dias n\u00e3o \u00fateis)</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Aac10</code> - Empresas do grupo - <code>Abb01</code> - Cabe\u00e7alho documentos - <code>Abb10</code> - Opera\u00e7\u00f5es comerciais</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis periodo String Sim Per\u00edodo de an\u00e1lise (MM/aaaa) M\u00eas/ano atual"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo dtMes Data do m\u00eas LocalDate flagDiaUtil Indicador de dia \u00fatil Integer vlr_Exp Valor exporta\u00e7\u00e3o BigDecimal kg_Exp Peso exporta\u00e7\u00e3o BigDecimal vlr_Ref Valor refugo/sucata BigDecimal kg_Ref Peso refugo/sucata BigDecimal vlr_Ind Valor industrializa\u00e7\u00e3o BigDecimal kg_Ind Peso industrializa\u00e7\u00e3o BigDecimal vlr_Fat Valor faturamento normal BigDecimal kg_Fat Peso faturamento normal BigDecimal vlr_Birigui Valor Birigui BigDecimal kg_Birigui Peso Birigui BigDecimal vlr_Franca Valor Franca BigDecimal kg_Franca Peso Franca BigDecimal vlr_Hamburgo Valor Hamburgo BigDecimal kg_Hamburgo Peso Hamburgo BigDecimal vlr_Serrana Valor Serrana BigDecimal kg_Serrana Peso Serrana BigDecimal vlr_Total Valor total matriz BigDecimal kg_Total Peso total matriz BigDecimal"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Processa per\u00edodo informado (MM/aaaa)</li> <li> <p>Define primeiro e \u00faltimo dia do m\u00eas</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta documentos fiscais do per\u00edodo</li> <li>Obt\u00e9m devolu\u00e7\u00f5es do m\u00eas</li> <li> <p>Busca dias n\u00e3o \u00fateis do reposit\u00f3rio</p> </li> <li> <p>Processamento de Dias</p> </li> <li>Cria lista com todos os dias do m\u00eas</li> <li>Classifica dias (\u00fatil, s\u00e1bado, domingo, n\u00e3o \u00fatil)</li> <li> <p>Consolida valores por tipo de opera\u00e7\u00e3o e filial</p> </li> <li> <p>C\u00e1lculo de Totais</p> </li> <li>Soma valores e pesos por categoria</li> <li>Calcula totais gerais por filial</li> <li> <p>Registra devolu\u00e7\u00f5es do per\u00edodo</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Gera PDF com dados consolidados</li> <li>Apresenta totais por filial e matriz</li> </ol>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Considera apenas documentos fiscais ativos (<code>eaa01cancData IS NULL</code>)</li> <li>Apenas documentos com status NFe = 3 (autorizada)</li> <li>Filtra por tipos de documento espec\u00edficos (NF-e pr\u00f3pria)</li> <li>Considera apenas opera\u00e7\u00f5es com <code>resumo_venda = 1</code></li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#classificacao-de-operacoes","title":"Classifica\u00e7\u00e3o de Opera\u00e7\u00f5es","text":"<ul> <li>EXPORTACAO: Ids 331927255, 285603711</li> <li>SUCATA: Ids 331931980, 331931983</li> <li>INDUSTRIALIZACAO: Ids 285367776</li> <li>NORMAL: Demais opera\u00e7\u00f5es</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#classificacao-de-dias","title":"Classifica\u00e7\u00e3o de Dias","text":"<ul> <li>Flag 1: Dias n\u00e3o \u00fateis (reposit\u00f3rio)</li> <li>Flag 2: S\u00e1bados</li> <li>Flag 3: Domingos</li> <li>Flag null: Dias \u00fateis normais</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#filiais-incluidas","title":"Filiais Inclu\u00eddas","text":"<ul> <li>LINHASITA MATRIZ</li> <li>LINHASITA BIRIGUI</li> <li>LINHASITA FRANCA</li> <li>LINHASITA HAMBURGO</li> <li>LINHASITA SERRANA</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Relat\u00f3rio formatado <code>gerarPDF()</code>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>multitec.utils</code> - Utilit\u00e1rios e c\u00e1lculos - <code>java.time</code> - Manipula\u00e7\u00e3o de datas</p> <p>Servi\u00e7os: - Acesso ao banco de dados</p>"},{"location":"LINHASITA/relatorio/scv/SCV_FaturamentoDiarioDetalhado/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Implementa consulta otimizada para grandes volumes de dados</li> <li>Suporte a m\u00faltiplas filiais do grupo Linhasita</li> <li>Classifica\u00e7\u00e3o autom\u00e1tica de dias \u00fateis e n\u00e3o \u00fateis</li> <li>Consolida\u00e7\u00e3o por tipo de opera\u00e7\u00e3o comercial</li> <li>C\u00e1lculo de totais parciais e gerais</li> <li>Integra\u00e7\u00e3o com reposit\u00f3rio de dias n\u00e3o \u00fateis</li> <li>Formata\u00e7\u00e3o espec\u00edfica para relat\u00f3rio financeiro</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/","title":"SCV Pedido de Compra","text":""},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de pedidos de compra da Linhasita com funcionalidade de emiss\u00e3o e envio autom\u00e1tico por e-mail para fornecedores.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar e distribuir pedidos de compra para fornecedores, automatizando o processo de solicita\u00e7\u00e3o de compras com envio de documenta\u00e7\u00e3o por e-mail.</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento de Compras</li> <li>Fornecedores</li> <li>Gestores de Suprimentos</li> <li>Controle Patrimonial</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Arquivo <code>Logo2.png</code> - Logo secund\u00e1ria - Arquivo <code>Logo3.png</code> - Logo terci\u00e1ria - Arquivo <code>NaoAutorizado.png</code> - Imagem para status n\u00e3o autorizado</p> <p>Localiza\u00e7\u00e3o: <code>samdev/resources/linhasita/relatorios/scv/</code></p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos de compra - <code>ABB01</code> - Cabe\u00e7alho pedidos - <code>ABE01</code> - Entidades/Fornecedores - <code>EAA0101</code> - Endere\u00e7os de entrega - <code>EAA0102</code> - Dados de contato - <code>EAA0103</code> - Itens do pedido - <code>ABE0104</code> - E-mails de fornecedores</p> <p>Entidades Envolvidas: - <code>Abe0104</code> - E-mails de entidades - <code>Aab1008</code> - Configura\u00e7\u00e3o de e-mail do usu\u00e1rio - <code>Aab10</code> - Usu\u00e1rio logado - <code>Aac10</code> - Empresa ativa</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis numeroInicial Integer N\u00e3o N\u00famero inicial do pedido \u2265 0 numeroFinal Integer N\u00e3o N\u00famero final do pedido \u2265 0 emissao LocalDate[] Sim Per\u00edodo de emiss\u00e3o Data inicial e final entidades List N\u00e3o Fornecedores espec\u00edficos IDs das entidades aprovado Boolean Sim Filtro por status true=aprovados, false=todos enviaEmail Boolean Sim Envio autom\u00e1tico true=enviar, false=apenas gerar"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo abb01num N\u00famero do pedido Integer abb01data Data de emiss\u00e3o Date abb01aprovado Status de aprova\u00e7\u00e3o Boolean eaa0102codigo C\u00f3digo do fornecedor String eaa0102nome Nome do fornecedor String eaa0102ni CNPJ/CPF String eaa0101endereco Endere\u00e7o de entrega String abm01codigo C\u00f3digo do item String eaa0103descr Descri\u00e7\u00e3o do item String eaa0103qtComl Quantidade BigDecimal eaa0103unit Valor unit\u00e1rio BigDecimal eaa0103total Valor total BigDecimal ipi_aliq Al\u00edquota IPI BigDecimal icm_aliq Al\u00edquota ICMS BigDecimal"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o de Par\u00e2metros</li> <li>Verifica n\u00fameros de pedido (inicial/final)</li> <li>Valida per\u00edodo de emiss\u00e3o</li> <li> <p>Processa lista de fornecedores</p> </li> <li> <p>Busca de Dados</p> </li> <li>Consulta pedidos com filtros aplicados</li> <li>Busca informa\u00e7\u00f5es completas (itens, endere\u00e7os, contatos)</li> <li> <p>Aplica filtro de aprova\u00e7\u00e3o quando solicitado</p> </li> <li> <p>Processamento de Sa\u00edda</p> </li> <li>Carrega recursos visuais (logos)</li> <li>Gera PDF do pedido de compra</li> <li> <p>Se solicitado, envia e-mail para fornecedores</p> </li> <li> <p>Envio por E-mail (opcional)</p> </li> <li>Busca e-mails cadastrados do fornecedor</li> <li>Valida configura\u00e7\u00e3o de e-mail do usu\u00e1rio</li> <li>Anexa PDF e envia com corpo padronizado</li> </ol>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Usu\u00e1rio deve ter e-mail configurado para envio</li> <li>Fornecedor deve ter e-mail cadastrado (classifica\u00e7\u00e3o 9002)</li> <li>Per\u00edodo de emiss\u00e3o obrigat\u00f3rio</li> <li>Filtro de aprova\u00e7\u00e3o aplicado por padr\u00e3o</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#processamento","title":"Processamento","text":"<ul> <li>Considera apenas documentos de classe 0 (compras)</li> <li>Endere\u00e7o principal de entrega</li> <li>Itens ordenados por sequ\u00eancia</li> <li>Calcula totais e impostos via campos JSON</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#e-mail","title":"E-mail","text":"<ul> <li>Assunto padronizado com n\u00famero do pedido</li> <li>Corpo em HTML com formata\u00e7\u00e3o</li> <li>Anexo PDF com nome identificador</li> <li>Inclui assinatura digital se configurada</li> </ul>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o M\u00e9todo PDF Pedido de compra formatado <code>gerarPDF()</code> E-mail Envio autom\u00e1tico para fornecedores <code>enviarEmail()</code>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>javax.mail</code> - Envio de e-mails - <code>multitec.utils</code> - Utilit\u00e1rios e e-mail</p> <p>Servi\u00e7os: - <code>CAS1010Service</code> - Processamento de assinaturas de e-mail</p> <p>Configura\u00e7\u00f5es: - E-mail do usu\u00e1rio logado (<code>Aab1008</code>) - E-mails de fornecedores (classifica\u00e7\u00e3o 9002)</p>"},{"location":"LINHASITA/relatorio/scv/SCV_Pedido_de_Compra/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Utiliza consulta SQL nativa para performance com m\u00faltiplos joins</li> <li>Processa campos de impostos diretamente do JSON da tabela</li> <li>Suporte a m\u00faltiplos anexos de e-mail</li> <li>Valida\u00e7\u00e3o de recursos de imagem em tempo de execu\u00e7\u00e3o</li> <li>Normaliza\u00e7\u00e3o de texto para remover acentos no corpo do e-mail</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/","title":"SRF_FaturamentoXPrecoMedio - Relat\u00f3rio de Faturamento x Pre\u00e7o M\u00e9dio","text":""},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio anal\u00edtico e sint\u00e9tico de faturamento versus pre\u00e7o m\u00e9dio de vendas, com m\u00faltiplos layouts e agrupamentos para an\u00e1lise comercial e estrat\u00e9gica de precifica\u00e7\u00e3o.</p>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer insights sobre o desempenho de vendas atrav\u00e9s da an\u00e1lise do faturamento e pre\u00e7o m\u00e9dio por grupo de itens, permitindo identificar tend\u00eancias de mercado e efic\u00e1cia da estrat\u00e9gia de precifica\u00e7\u00e3o.</p>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Gestores de Vendas</li> <li>Diretoria Executiva</li> <li>Planejamento Estrat\u00e9gico</li> <li>Controladoria</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis empresas List N\u00e3o Empresas espec\u00edficas IDs empresas emissao LocalDate[] Sim Per\u00edodo de emiss\u00e3o Data inicial e final layout Integer Sim Tipo de layout 0=Sint\u00e9tico, 1=Anal\u00edtico sintetico Integer Sim N\u00edvel de detalhe 0=Padr\u00e3o, 1=Nacional, 2=Por Cor, 3=Exporta\u00e7\u00e3o"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo grupoItem C\u00f3digo do grupo de item String nomeGrupo Nome do grupo de item String qtComlTotal Quantidade comercial total BigDecimal total Valor total l\u00edquido BigDecimal media Pre\u00e7o m\u00e9dio BigDecimal grupoNat Grupo natural/cor String abm01codigo C\u00f3digo do item String abm01na Nome do item String abb01num N\u00famero do documento Integer valorCotacao Valor da cota\u00e7\u00e3o BigDecimal mediaDolar M\u00e9dia em d\u00f3lar BigDecimal"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Define valores padr\u00e3o (m\u00eas atual, layout sint\u00e9tico)</li> <li>Obt\u00e9m lista de empresas selecionadas</li> <li>Formata per\u00edodo para exibi\u00e7\u00e3o</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#2-selecao-do-layout","title":"2. Sele\u00e7\u00e3o do Layout","text":"<ul> <li>Layout 0 (Sint\u00e9tico): Dados consolidados por grupo</li> <li>Sint\u00e9tico 0: Agrupamento padr\u00e3o</li> <li>Sint\u00e9tico 1: Separa\u00e7\u00e3o NAT/COR</li> <li>Sint\u00e9tico 2: Detalhamento por cor</li> <li>Sint\u00e9tico 3: Exporta\u00e7\u00e3o com cota\u00e7\u00e3o</li> <li>Layout 1 (Anal\u00edtico): Dados detalhados por documento</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#3-busca-de-dados","title":"3. Busca de Dados","text":"<ul> <li>Consulta grupos de itens ativos</li> <li>Executa query espec\u00edfica conforme layout selecionado</li> <li>Calcula m\u00e9dias e totais</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#4-processamento-de-dados","title":"4. Processamento de Dados","text":"<ul> <li>Combina dados de faturamento com grupos de itens</li> <li>Para exporta\u00e7\u00e3o, busca e calcula cota\u00e7\u00f5es de d\u00f3lar</li> <li>Ordena resultados por nome do grupo</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#5-geracao-do-relatorio","title":"5. Gera\u00e7\u00e3o do Relat\u00f3rio","text":"<ul> <li>Seleciona template JasperReports conforme layout</li> <li>Gera PDF com dados processados</li> <li>Retorna arquivo para download</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#filtros-de-dados","title":"Filtros de Dados:","text":"<ul> <li>Documentos de venda: clasDoc = 1, esMov = 1</li> <li>Opera\u00e7\u00f5es comerciais: tipocod = 1</li> <li>Itens v\u00e1lidos: tipo in (0, 1)</li> <li>Exclus\u00f5es: Opera\u00e7\u00f5es 112 e 115 (exceto exporta\u00e7\u00e3o)</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#calculo-de-valores","title":"C\u00e1lculo de Valores:","text":"<ul> <li>Total l\u00edquido: totDoc - ICMS - PIS - COFINS</li> <li>Pre\u00e7o m\u00e9dio: Total l\u00edquido / Quantidade</li> <li>C\u00f3digo grupo: 5 d\u00edgitos (tipo 0) ou 8 d\u00edgitos (tipo 1)</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#agrupamentos-especificos","title":"Agrupamentos Espec\u00edficos:","text":"<ul> <li>NAT/COR: Identifica pelo nome do item contendo \"NAT\"</li> <li>Exporta\u00e7\u00e3o: Inclui apenas opera\u00e7\u00f5es 112 e 115</li> <li>Cota\u00e7\u00e3o: M\u00e9dia das cota\u00e7\u00f5es no per\u00edodo</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#validacoes","title":"Valida\u00e7\u00f5es:","text":"<ul> <li>Divis\u00e3o por zero protegida em c\u00e1lculos de m\u00e9dia</li> <li>Tratamento de exce\u00e7\u00f5es em convers\u00e3o para d\u00f3lar</li> <li>Ordena\u00e7\u00e3o consistente por tipo e c\u00f3digo</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Layout Sint\u00e9tico Template Descri\u00e7\u00e3o 0 0 <code>SRF_FaturamentoXPrecoMedio_Sintetico</code> Agrupamento padr\u00e3o 0 1 <code>SRF_FaturamentoXPrecoMedio_Sintetico_S1</code> Separa\u00e7\u00e3o NAT/COR 0 2 <code>SRF_FaturamentoXPrecoMedio_Sintetico_S2</code> Detalhamento por cor 0 3 <code>SRF_FaturamentoXPrecoMedio_Sintetico_S3</code> Exporta\u00e7\u00e3o com cota\u00e7\u00e3o 1 - <code>SRF_FaturamentoXPrecoMedio_Analitico</code> Detalhado por documento"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios PDF - <code>br.com.multitec.utils</code> - Utilit\u00e1rios e datas</p> <p>Entidades: - <code>Eaa01</code> - Documentos fiscais - <code>Eaa0103</code> - Itens de documentos - <code>Abm01</code> - Itens cadastrais - <code>Aac10</code> - Empresas - <code>Abb10</code> - Opera\u00e7\u00f5es comerciales</p>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#consultas-sql","title":"Consultas SQL:","text":"<ul> <li>M\u00faltiplas varia\u00e7\u00f5es conforme layout selecionado</li> <li>Uso de substring para agrupamento por c\u00f3digo</li> <li>Extra\u00e7\u00e3o de campos JSON para valores fiscais</li> <li>Agrega\u00e7\u00e3o com GROUP BY din\u00e2mico</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#performance","title":"Performance:","text":"<ul> <li>Consultas otimizadas com filtros aplicados no banco</li> <li>Processamento em mem\u00f3ria apenas para combina\u00e7\u00e3o final</li> <li>Pagina\u00e7\u00e3o tratada pelo JasperReports</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#tratamento-de-dados","title":"Tratamento de Dados:","text":"<ul> <li>Formata\u00e7\u00e3o personalizada do per\u00edodo</li> <li>Concatena\u00e7\u00e3o de nomes de empresas</li> <li>C\u00e1lculo de m\u00e9dias com prote\u00e7\u00e3o contra divis\u00e3o por zero</li> <li>Ordena\u00e7\u00e3o alfab\u00e9tica por nome do grupo</li> </ul>"},{"location":"LINHASITA/relatorio/srf/SRF_FaturamentoXPrecoMedio/#calculo-de-cotacao","title":"C\u00e1lculo de Cota\u00e7\u00e3o:","text":"<ul> <li>Busca cota\u00e7\u00f5es hist\u00f3ricas para datas de emiss\u00e3o</li> <li>Calcula m\u00e9dia ponderada das cota\u00e7\u00f5es</li> <li>Converte valores para d\u00f3lar quando aplic\u00e1vel</li> </ul>"},{"location":"LINHASITA/script/SRF%20-%201002/","title":"SRF   1002","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#funcionalidades-implementadas","title":"\u2699\ufe0f Funcionalidades Implementadas","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#1-gestao-de-campos-personalizados","title":"1. Gest\u00e3o de Campos Personalizados","text":"Funcionalidade Descri\u00e7\u00e3o M\u00e9todo Ocultar Zerados Esconde campos num\u00e9ricos com valor zero <code>ocultarZerados()</code> Mostrar Todos Exibe todos os campos ocultos <code>mostrarTodos()</code>"},{"location":"LINHASITA/script/SRF%20-%201002/#2-operacoes-fiscais","title":"2. Opera\u00e7\u00f5es Fiscais","text":"Funcionalidade Descri\u00e7\u00e3o M\u00e9todo C\u00e1lculo Fiscal Agrupa dados fiscais por CFOP <code>calcularAbaFiscal()</code> Spread Fiscal Exibe resumo fiscal consolidado <code>criarSpreadETab()</code>"},{"location":"LINHASITA/script/SRF%20-%201002/#3-danfe-documento-auxiliar","title":"3. DANFE - Documento Auxiliar","text":"Funcionalidade Descri\u00e7\u00e3o M\u00e9todo Visualiza\u00e7\u00e3o Abre DANFE no navegador <code>abrirBrowser()</code> Impress\u00e3o Imprime DANFE em impressora selecionada <code>selectionBtnImprimirDanfePressed()</code>"},{"location":"LINHASITA/script/SRF%20-%201002/#estrutura-da-tela","title":"\ud83d\udccb Estrutura da Tela","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#componentes-criados","title":"Componentes Criados","text":"Componente Posi\u00e7\u00e3o Dimens\u00f5es Fun\u00e7\u00e3o btnOcultarCampos (550,635) 175x36 Oculta campos zerados btnMostrarCampos (750,635) 175x36 Mostra todos campos btnImprimirDanfe (950,635) 175x36 Imprime DANFE btnAbrirDanfe (1150,635) 175x36 Abre DANFE no browser Aba Fiscal Tab 7 - Dados fiscais consolidados"},{"location":"LINHASITA/script/SRF%20-%201002/#colunas-do-spread-fiscal","title":"Colunas do Spread Fiscal","text":"Campo Tipo Tamanho Descri\u00e7\u00e3o CFOP String 4 chars C\u00f3digo Fiscal de Opera\u00e7\u00f5es Total Doc BigDecimal 15 chars Valor total do documento BC ICMS BigDecimal 15 chars Base de c\u00e1lculo ICMS % ICMS BigDecimal 15 chars Al\u00edquota do ICMS ICMS BigDecimal 15 chars Valor do ICMS ICMS Outras BigDecimal 15 chars ICMS outras opera\u00e7\u00f5es ICMS Isento BigDecimal 15 chars ICMS isento"},{"location":"LINHASITA/script/SRF%20-%201002/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"LINHASITA/script/SRF%20-%201002/#1-inicializacao-da-tela","title":"1. Inicializa\u00e7\u00e3o da Tela","text":"<ul> <li>Ajusta dimens\u00f5es da janela</li> <li>Cria bot\u00f5es de controle</li> <li>Configura componentes fiscais</li> <li>Organiza layout</li> </ul>"},{"location":"LINHASITA/script/SRF%20-%201002/#2-processamento-fiscal","title":"2. Processamento Fiscal","text":"<ul> <li>Captura dados dos itens do pedido (EAA0103)</li> <li>Agrupa informa\u00e7\u00f5es por CFOP</li> <li>Calcula totais e impostos</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Mitra)","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Mitra, com foco em faturamento, cobran\u00e7a, cancelamentos e cartas de corre\u00e7\u00e3o.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) de acordo com o tipo de opera\u00e7\u00e3o, adaptado para as necessidades espec\u00edficas do m\u00f3dulo Mitra.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE (boleto opcional)</li> <li>Cobran\u00e7a: Apenas boleto</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Faturamento: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a)</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-desabilitadas","title":"Funcionalidades Desabilitadas","text":"<ul> <li>Representantes: C\u00f3digo comentado - n\u00e3o envia e-mails para representantes</li> <li>Transportadora: C\u00f3digo comentado - n\u00e3o envia e-mails para transportadora</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Envia boleto junto com faturamento se mesmo e-mail</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema</p> <p>M\u00f3dulo: Mitra</p>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#formatacao-html","title":"Formata\u00e7\u00e3o HTML","text":"<ul> <li>Corpo dos e-mails em HTML com tags b\u00e1sicas</li> <li>Links para portal da NF-e e site da Multitec</li> <li>Dados do cliente, CNPJ e chave de acesso</li> <li>Protocolo de autoriza\u00e7\u00e3o da SEFAZ</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#controle-de-anexos","title":"Controle de Anexos","text":"<ul> <li>XML sempre enviado para cliente</li> <li>DANFE apenas para faturamento</li> <li>Boleto apenas para cobran\u00e7a (separado ou junto)</li> </ul>"},{"location":"MITRA/formulas/srf/SRF_EnviarEmailsNFe/#funcionalidades-comentadas","title":"Funcionalidades Comentadas","text":"<ul> <li>M\u00e9todos <code>obterEmailsRepresentantes()</code> e <code>obterEmailTransportadoraDespacho()</code> dispon\u00edveis mas n\u00e3o utilizados</li> <li>Blocos de c\u00f3digo para representantes e transportadora comentados</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:45 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Mitra) Vers\u00e3o: 1.0</p>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/","title":"CAS_ImportarFCIEab01011.md","text":""},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de importa\u00e7\u00e3o de dados FCI (Ficha de Conte\u00fado de Importa\u00e7\u00e3o) para a tabela EAB01011 no m\u00f3dulo CAS (Controle Aduaneiro e Sped), processando arquivos Excel com informa\u00e7\u00f5es de c\u00e1lculos aduaneiros.</p>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar a importa\u00e7\u00e3o em massa de dados de c\u00e1lculos aduaneiros a partir de planilhas Excel, inserindo os registros diretamente na tabela de itens de c\u00e1lculo FCI.</p>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Contabilidade</li> <li>Controladoria Aduaneira</li> <li>Gest\u00e3o de Importa\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>CAS_ImportarFCIEab01011</code> - Importa\u00e7\u00e3o de dados FCI</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/cas/</code></p>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAB01011</code> - Itens de c\u00e1lculo FCI - <code>EAB0101</code> - Cabe\u00e7alho de c\u00e1lculo FCI</p> <p>Entidades Envolvidas: - <code>Eab0101</code> - Cabe\u00e7alho do c\u00e1lculo FCI - <code>Eab01011</code> - Itens do c\u00e1lculo FCI</p>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o arquivo MultipartFile Sim Arquivo Excel (.xlsx) com dados para importa\u00e7\u00e3o"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo (nenhuma sa\u00edda expl\u00edcita) Registros inseridos na tabela EAB01011 Opera\u00e7\u00e3o de banco"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Leitura do Arquivo</li> <li>Obt\u00e9m arquivo Excel do par\u00e2metro</li> <li>Cria workbook a partir do InputStream</li> <li> <p>Seleciona primeira planilha (sheet) para processamento</p> </li> <li> <p>Processamento Linha por Linha</p> </li> <li>Itera sobre todas as linhas da planilha</li> <li>Ignora cabe\u00e7alho (linha 0)</li> <li> <p>Processa apenas linhas com ID v\u00e1lido na primeira coluna</p> </li> <li> <p>Valida\u00e7\u00e3o de Dados</p> </li> <li>Verifica exist\u00eancia do registro EAB0101 correspondente</li> <li>Converte valores das c\u00e9lulas para tipos apropriados</li> <li> <p>Valida dados num\u00e9ricos obrigat\u00f3rios</p> </li> <li> <p>Constru\u00e7\u00e3o do SQL Din\u00e2mico</p> </li> <li>Monta instru\u00e7\u00e3o INSERT otimizada com m\u00faltiplos VALUES</li> <li>Utiliza placeholders (?) para preven\u00e7\u00e3o de SQL injection</li> <li> <p>Agrupa todos os registros em uma \u00fanica execu\u00e7\u00e3o</p> </li> <li> <p>Execu\u00e7\u00e3o em Lote</p> </li> <li>Prepara statement com par\u00e2metros</li> <li>Executa inser\u00e7\u00e3o em massa</li> <li>Utiliza sequence para gera\u00e7\u00e3o de IDs</li> </ol>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#estrutura-do-arquivo-excel","title":"Estrutura do Arquivo Excel","text":"Coluna Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio 0 Long ID do c\u00e1lculo FCI (EAB0101) Sim 1 Long ID do item Sim 2 BigDecimal Quantidade de composi\u00e7\u00e3o Sim 3 BigDecimal Quantidade Sim 4 BigDecimal Valor Sim 5 BigDecimal Valor por unidade de medida Sim"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Registro EAB0101 deve existir no banco</li> <li>C\u00e9lulas num\u00e9ricas n\u00e3o podem estar vazias</li> <li>Apenas processa linhas com ID na primeira coluna</li> <li>Ignora linhas completamente vazias</li> </ul>"},{"location":"STREMA/formulas/cas/CAS_ImportarFCIEab01011/#estrutura-do-insert","title":"Estrutura do INSERT","text":"<p>```sql INSERT INTO eab01011  (eab01011id, eab01011calc, eab01011item, eab01011qtdComp, eab01011qtde, eab01011valor, eab01011vmu) VALUES (nextval('default_sequence'), ?, ?, ?, ?, ?, ?), (nextval('default_sequence'), ?, ?, ?, ?, ?, ?), ...</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/","title":"SCE_ImportarItensLctosXlsx.md","text":""},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de importa\u00e7\u00e3o de itens para lan\u00e7amentos do SCE via arquivo Excel (XLSX) para a Linhasita, permitindo carga em lote de itens com suas quantidades e valores.</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de importa\u00e7\u00e3o de itens para lan\u00e7amentos cont\u00e1beis atrav\u00e9s de arquivos Excel, validando e processando os dados antes da inser\u00e7\u00e3o no sistema.</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Cont\u00e1bil</li> <li>Almoxarifado/Estoque</li> <li>Financeiro</li> <li>Controladoria</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SCE_ImportarItensLctosXlsx</code> - Processamento de importa\u00e7\u00e3o Excel</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/sce/</code></p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>ABM01</code> - Cadastro de itens - <code>ABE4001</code> - Pre\u00e7os de itens - <code>ABA20</code> - Reposit\u00f3rio de dados (avisos)</p> <p>Entidades Envolvidas: - <code>Abm01</code> - Itens - <code>Abe4001</code> - Pre\u00e7os - <code>ItemSCEDto</code> - DTO para transfer\u00eancia de itens</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o arquivo MultipartFile Sim Arquivo Excel com dados dos itens"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#estrutura-do-arquivo-excel","title":"\ud83d\udccb Estrutura do Arquivo Excel","text":"Coluna Descri\u00e7\u00e3o Tipo Obrigat\u00f3rio 0 Tipo do item Integer Sim 1 C\u00f3digo do item String Sim 4 Quantidade BigDecimal N\u00e3o"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Recebe arquivo Excel multipart</li> <li> <p>Abre a primeira planilha do workbook</p> </li> <li> <p>Processamento Linha a Linha</p> </li> <li>Ignora cabe\u00e7alho (linha 0)</li> <li>Processa a partir da linha 1</li> <li> <p>Valida c\u00e9lulas obrigat\u00f3rias</p> </li> <li> <p>Busca e Valida\u00e7\u00e3o de Itens</p> </li> <li>Localiza item por tipo e c\u00f3digo</li> <li>Verifica exist\u00eancia no cadastro</li> <li> <p>Confirma configura\u00e7\u00e3o de estoque</p> </li> <li> <p>Obten\u00e7\u00e3o de Valores</p> </li> <li>Recupera quantidade da planilha</li> <li>Busca pre\u00e7o unit\u00e1rio do item</li> <li> <p>Prepara DTO para transfer\u00eancia</p> </li> <li> <p>Tratamento de Erros</p> </li> <li>Coleta mensagens de erro</li> <li>Registra itens n\u00e3o encontrados</li> <li>Mant\u00e9m processamento mesmo com falhas</li> </ol>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>Item deve existir no cadastro (ABM01)</li> <li>Item deve ter configura\u00e7\u00e3o de estoque</li> <li>C\u00e9lulas de tipo e c\u00f3digo s\u00e3o obrigat\u00f3rias</li> <li>Quantidade opcional (default 0)</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#processamento","title":"Processamento","text":"<ul> <li>Apenas primeira planilha \u00e9 processada</li> <li>Linha vazia na coluna 0 encerra processamento</li> <li>Continua processamento mesmo com erros parciais</li> <li>Coleta todas as mensagens de erro</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#dados-obtidos","title":"Dados Obtidos","text":"<ul> <li>Quantidade: Da planilha Excel</li> <li>Valor Unit\u00e1rio: Do cadastro de pre\u00e7os (ABE4001)</li> <li>Lote/S\u00e9rie: Sempre nulos para importa\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo itensLctos Lista de itens processados List"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>Apache POI</code> - Manipula\u00e7\u00e3o de arquivos Excel - <code>multiorm</code> - Persist\u00eancia e consultas - <code>spring-web</code> - Upload de arquivos multipart</p> <p>Estruturas de Dados: - <code>ItemSCEDto</code> - Transporte de dados dos itens - <code>TableMap</code> - Armazenamento de dados JSON</p>"},{"location":"STREMA/formulas/sce/SCE_ImportarItensLctosXlsx/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Suporte a arquivos XLSX (Excel moderno)</li> <li>Processamento ass\u00edncrono e tolerante a falhas</li> <li>Valida\u00e7\u00e3o em tempo real durante importa\u00e7\u00e3o</li> <li>Mensagens de erro detalhadas por item</li> <li>Integra\u00e7\u00e3o com DTO padr\u00e3o do SCE</li> <li>Busca otimizada de itens com joins</li> <li>Tratamento de transa\u00e7\u00f5es para persist\u00eancia</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/","title":"SCF_LayoutBancoItauRetorno_CNAB_400 - Processamento de Retorno Banc\u00e1rio Ita\u00fa","text":""},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Classe respons\u00e1vel pelo processamento de arquivos de retorno banc\u00e1rio no layout CNAB 400 do Banco Ita\u00fa, realizando a concilia\u00e7\u00e3o autom\u00e1tica de documentos financeiros com as ocorr\u00eancias informadas pelo banco.</p>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de concilia\u00e7\u00e3o banc\u00e1ria, validando e processando retornos de cobran\u00e7a, identificando inconsist\u00eancias e aplicando liquida\u00e7\u00f5es autom\u00e1ticas nos documentos do sistema.</p>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Financeiro</li> <li>Tesouraria</li> <li>Contabilidade</li> <li>Backoffice banc\u00e1rio</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o registros TextFileLeitura Sim Arquivo de retorno banc\u00e1rio CNAB 400"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#estrutura-do-arquivo-cnab-400","title":"\ud83d\udccb Estrutura do Arquivo CNAB 400","text":""},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#layout-do-registro-detalhe-tipo-1","title":"Layout do Registro Detalhe (Tipo 1):","text":"Posi\u00e7\u00e3o Tamanho Descri\u00e7\u00e3o 0-1 1 Tipo registro (1) 37-62 25 Identifica\u00e7\u00e3o do documento 108-110 2 C\u00f3digo da ocorr\u00eancia 152-165 13 Valor do documento (com 2 decimais) 240-253 13 Valor do desconto 253-266 13 Valor l\u00edquido 266-279 13 Valor da multa/juros 295-301 6 Data pagamento (DDMMAA)"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#1-leitura-do-arquivo","title":"1. Leitura do Arquivo","text":"<ul> <li>Ignora header (primeira linha)</li> <li>Processa apenas registros do tipo 1 (detalhe)</li> <li>Itera linha por linha do arquivo</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#2-validacao-do-documento","title":"2. Valida\u00e7\u00e3o do Documento","text":"<ul> <li>Extrai ID do documento (posi\u00e7\u00f5es 37-62)</li> <li>Remove zeros \u00e0 esquerda do ID</li> <li>Busca documento no sistema por ID ou campo customizado</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#3-validacoes-de-negocio","title":"3. Valida\u00e7\u00f5es de Neg\u00f3cio","text":"<ul> <li>Verifica se documento j\u00e1 foi quitado</li> <li>Compara valores do documento com retorno banc\u00e1rio</li> <li>Valida c\u00f3digo de ocorr\u00eancia existente</li> <li>Verifica presen\u00e7a de data de pagamento</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#4-processamento-de-ocorrencias","title":"4. Processamento de Ocorr\u00eancias","text":"<ul> <li>Identifica tipo de ocorr\u00eancia (02, 03, 04, 06, 09, 29)</li> <li>Mapeia para PLF (Parametro e Lan\u00e7amento Fiscal) correspondente</li> <li>Aplica liquida\u00e7\u00e3o para ocorr\u00eancia \"06\" (Liquida\u00e7\u00e3o normal)</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#5-atualizacao-de-dados","title":"5. Atualiza\u00e7\u00e3o de Dados","text":"<ul> <li>Define data de pagamento</li> <li>Calcula valor l\u00edquido</li> <li>Registra juros e descontos no JSON do documento</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#validacoes-de-documento","title":"Valida\u00e7\u00f5es de Documento:","text":"<ul> <li>Documento n\u00e3o encontrado: Gera inconsist\u00eancia se ID n\u00e3o existir</li> <li>Documento j\u00e1 quitado: Impede processamento duplicado</li> <li>Valor divergente: Compara valor do documento com retorno (exceto para R$ 0,01)</li> <li>Ocorr\u00eancia inv\u00e1lida: Verifica se c\u00f3digo existe no mapeamento</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#codigos-de-ocorrencia-suportados","title":"C\u00f3digos de Ocorr\u00eancia Suportados:","text":"C\u00f3digo Descri\u00e7\u00e3o A\u00e7\u00e3o 02 Entrada confirmada Informa\u00e7\u00e3o 03 Entrada rejeitada Informa\u00e7\u00e3o 04 Altera\u00e7\u00e3o de Dados Informa\u00e7\u00e3o 06 Liquida\u00e7\u00e3o normal Aplica baixa 09 Baixa Simples Informa\u00e7\u00e3o 29 Tarifa manuten\u00e7\u00e3o Boletos Vencidos Informa\u00e7\u00e3o"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#mapeamento-plf","title":"Mapeamento PLF:","text":"<ul> <li>06 \u2192 C\u00f3digo PLF \"201\" (Liquida\u00e7\u00e3o normal)</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#tratamento-de-valores","title":"Tratamento de Valores:","text":"<ul> <li>Valores monet\u00e1rios divididos por 100 (2 casas decimais)</li> <li>Data no formato DDMMAA convertida para LocalDate</li> <li>Campos num\u00e9ricos com zeros s\u00e3o considerados vazios</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Campo Tipo Descri\u00e7\u00e3o tmList List Lista de documentos processados daa01 Daa01 Documento financeiro abf20id Long ID do PLF para liquida\u00e7\u00e3o ocorrencia String Descri\u00e7\u00e3o da ocorr\u00eancia inconsistencias List Lista de erros encontrados"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":""},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#bibliotecas","title":"Bibliotecas:","text":"<ul> <li><code>TextFileLeitura</code> - Leitura de arquivos texto</li> <li><code>SCFService</code> - Servi\u00e7o do m\u00f3dulo financeiro</li> <li><code>MultiORM</code> - Acesso a dados</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#entidades","title":"Entidades:","text":"<ul> <li><code>Daa01</code> - Documentos financeiros</li> <li><code>Abf20</code> - PLF (Parametro e Lan\u00e7amento Fiscal)</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#configuracoes","title":"Configura\u00e7\u00f5es:","text":"<ul> <li>Mapeamento fixo de ocorr\u00eancias banc\u00e1rias</li> <li>C\u00f3digos PLF pr\u00e9-definidos</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#busca-de-documentos","title":"Busca de Documentos:","text":"<ul> <li>Primeiro busca por ID direto (daa01id)</li> <li>Fallback para campo customizado (id_sam3)</li> <li>Join com central de documentos para dados complementares</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#tratamento-de-erros","title":"Tratamento de Erros:","text":"<ul> <li>Continua processamento mesmo com documentos inv\u00e1lidos</li> <li>Coleta todas as inconsist\u00eancias por documento</li> <li>Retorna lista completa para decis\u00e3o manual</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#performance","title":"Performance:","text":"<ul> <li>Processamento linha a linha do arquivo</li> <li>Consultas otimizadas com criteria</li> <li>Uso de TableMap para dados tempor\u00e1rios</li> </ul>"},{"location":"STREMA/formulas/scf/SCF_LayoutBancoItauRetorno_CNAB_400/#seguranca","title":"Seguran\u00e7a:","text":"<ul> <li>Valida\u00e7\u00e3o rigorosa de dados antes do processamento</li> <li>Preven\u00e7\u00e3o de dupla liquida\u00e7\u00e3o</li> <li>Verifica\u00e7\u00e3o de consist\u00eancia de valores</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/","title":"SCV_OrcamentoItem - C\u00e1lculo de Itens de Or\u00e7amento","text":""},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Classe respons\u00e1vel pelo c\u00e1lculo de valores, impostos e totais para itens de or\u00e7amento, considerando configura\u00e7\u00f5es espec\u00edficas por empresa, entidade, estado e munic\u00edpio.</p>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Realizar c\u00e1lculos completos de pre\u00e7os, impostos e totais para itens de or\u00e7amento, incluindo ICMS, IPI, PIS, COFINS, descontos e valores comerciais, com base nas configura\u00e7\u00f5es fiscais e comerciais do sistema.</p>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Vendedores</li> <li>Departamento Fiscal</li> <li>Gestores de Or\u00e7amentos</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o cbe1001 Cbe1001 Sim Item do or\u00e7amento a ser calculado procInvoc String N\u00e3o Processo de invoca\u00e7\u00e3o (CAS0240, CAS0242)"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#estrutura-de-dados-principais","title":"\ud83d\udccb Estrutura de Dados Principais","text":""},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#entidades-envolvidas","title":"Entidades Envolvidas:","text":"<ul> <li>Cbe1001 - Item do or\u00e7amento</li> <li>Cbe10 - Cabe\u00e7alho do or\u00e7amento</li> <li>Abe40 - Tabela de pre\u00e7o</li> <li>Abe4001 - Item da tabela de pre\u00e7o</li> <li>Abb01 - Central de documento</li> <li>Abe01 - Entidade (cliente)</li> <li>Abe0101 - Endere\u00e7o da entidade</li> <li>Abm01 - Item cadastral</li> <li>Abm0101 - Configura\u00e7\u00e3o do item por empresa</li> <li>Abm10 - Valores do item</li> <li>Abm12 - Dados fiscais do item</li> <li>Abm13 - Dados comerciais do item</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#campos-calculados","title":"Campos Calculados:","text":"<ul> <li>Pre\u00e7o de custo</li> <li>Totais do item</li> <li>Peso bruto e l\u00edquido</li> <li>Descontos</li> <li>Base de c\u00e1lculo e valores de impostos (ICMS, IPI, PIS, COFINS)</li> <li>Total do documento</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#1-inicializacao-e-validacao","title":"1. Inicializa\u00e7\u00e3o e Valida\u00e7\u00e3o","text":"<ul> <li>Carrega dados do item do or\u00e7amento</li> <li>Verifica processo de invoca\u00e7\u00e3o</li> <li>Valida exist\u00eancia do item</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#2-carregamento-de-dados-relacionados","title":"2. Carregamento de Dados Relacionados","text":"<ul> <li>Or\u00e7amento (Cbe10)</li> <li>Tabela de pre\u00e7o (Abe40)</li> <li>Entidade e endere\u00e7o (Abe01, Abe0101)</li> <li>Configura\u00e7\u00f5es do item (Abm0101, Abm12, Abm13)</li> <li>Dados geogr\u00e1ficos (munic\u00edpio, UF)</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#3-calculo-do-preco-de-custo","title":"3. C\u00e1lculo do Pre\u00e7o de Custo","text":"<ul> <li>Busca pre\u00e7o na tabela de pre\u00e7o</li> <li>Para itens compostos, calcula valor da composi\u00e7\u00e3o</li> <li>Considera m\u00e3o de obra e itens componentes</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#4-calculos-comerciais","title":"4. C\u00e1lculos Comerciais","text":"<ul> <li>Total do item (quantidade \u00d7 unit\u00e1rio)</li> <li>Convers\u00e3o para volume</li> <li>C\u00e1lculo de pesos</li> <li>Aplica\u00e7\u00e3o de descontos</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#5-calculos-fiscais","title":"5. C\u00e1lculos Fiscais","text":"<ul> <li>IPI: Base de c\u00e1lculo e valor</li> <li>ICMS: Base, al\u00edquota e valor</li> <li>PIS: Base, al\u00edquota e valor</li> <li>COFINS: Base, al\u00edquota e valor</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#6-consolidacao-de-totais","title":"6. Consolida\u00e7\u00e3o de Totais","text":"<ul> <li>Total do documento</li> <li>Total financeiro</li> <li>Atualiza\u00e7\u00e3o do JSON do item</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#hierarquia-de-aliquotas-icms","title":"Hierarquia de Al\u00edquotas ICMS:","text":"<ol> <li>Entidade espec\u00edfica (Abm1003)</li> <li>Munic\u00edpio (Abm1002)</li> <li>Estado (Abm1001)</li> <li>Valores padr\u00e3o do item (Abm10)</li> <li>Configura\u00e7\u00e3o do item (Abm0101)</li> <li>Regras por UF (interior \u00d7 interestadual)</li> </ol>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#calculo-de-preco-para-itens-compostos","title":"C\u00e1lculo de Pre\u00e7o para Itens Compostos:","text":"<ul> <li>Item principal (seq = 1) tem valor base</li> <li>Itens do tipo servi\u00e7o representam % de m\u00e3o de obra</li> <li>Demais itens somam ao custo</li> <li>Total = custo + item principal + (item principal \u00d7 % m\u00e3o de obra)</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#base-de-calculo-de-impostos","title":"Base de C\u00e1lculo de Impostos:","text":"<ul> <li>IPI: Total + frete + seguro + outras despesas</li> <li>ICMS: Total + frete + seguro + outras despesas - desconto</li> <li>PIS/COFINS: Total + frete + seguro + outras despesas - ICMS</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#regras-especificas-por-cst","title":"Regras Espec\u00edficas por CST:","text":"<ul> <li>CST 100, 300, 800: Al\u00edquota interestadual de 4%</li> <li>Demais CSTs: Al\u00edquota de sa\u00edda do estado</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#validacoes-criticas","title":"Valida\u00e7\u00f5es Cr\u00edticas:","text":"<ul> <li>Munic\u00edpio da entidade obrigat\u00f3rio</li> <li>Configura\u00e7\u00e3o fiscal do item obrigat\u00f3ria</li> <li>Tipo fiscal do item obrigat\u00f3rio</li> <li>Composi\u00e7\u00e3o de produto \u00fanica por item</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Campo Tipo Descri\u00e7\u00e3o preco_custo BigDecimal Pre\u00e7o de custo do item vlr_vlme BigDecimal Valor do volume vlr_pl BigDecimal Valor do peso l\u00edquido vlr_pb BigDecimal Valor do peso bruto ipi_bc BigDecimal Base de c\u00e1lculo do IPI ipi_aliq BigDecimal Al\u00edquota do IPI ipi_ipi BigDecimal Valor do IPI icm_bc BigDecimal Base de c\u00e1lculo do ICMS icm_aliq BigDecimal Al\u00edquota do ICMS icm_icm BigDecimal Valor do ICMS pis_bc BigDecimal Base de c\u00e1lculo do PIS pis_aliq BigDecimal Al\u00edquota do PIS pis_pis BigDecimal Valor do PIS cofins_bc BigDecimal Base de c\u00e1lculo do COFINS cofins_aliq BigDecimal Al\u00edquota do COFINS cofins_cofins BigDecimal Valor do COFINS"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":""},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#bibliotecas","title":"Bibliotecas:","text":"<ul> <li><code>br.com.multiorm</code> - Acesso a dados</li> <li><code>br.com.multitec.utils</code> - Utilit\u00e1rios e valida\u00e7\u00f5es</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#entidades-principais","title":"Entidades Principais:","text":"<ul> <li>Cbe1001 (Item do or\u00e7amento)</li> <li>Abm01 (Item cadastral)</li> <li>Abe40 (Tabela de pre\u00e7o)</li> <li>Abe01 (Entidade)</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#configuracoes","title":"Configura\u00e7\u00f5es:","text":"<ul> <li>Campos livres (JSON) das entidades</li> <li>Par\u00e2metros de c\u00e1lculo fiscal</li> <li>Hierarquia de valores por localidade</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#tratamento-de-dados","title":"Tratamento de Dados:","text":"<ul> <li>Uso extensivo de TableMap para campos JSON</li> <li>Arredondamento para 2-4 casas decimais conforme necessidade</li> <li>Valida\u00e7\u00f5es com MultiValidationException</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#performance","title":"Performance:","text":"<ul> <li>Carregamento lazy de entidades relacionadas</li> <li>Consultas otimizadas para composi\u00e7\u00e3o de produtos</li> <li>Cache de configura\u00e7\u00f5es por item/empresa</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#hierarquia-de-configuracoes","title":"Hierarquia de Configura\u00e7\u00f5es:","text":"<ul> <li>Implementa fallback para valores n\u00e3o encontrados</li> <li>Considera especificidade (entidade &gt; munic\u00edpio &gt; estado &gt; padr\u00e3o)</li> <li>Suporte a regras interestaduais</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_OrcamentoItem/#casos-de-excecao","title":"Casos de Exce\u00e7\u00e3o:","text":"<ul> <li>Processos CAS0240 e CAS0242 s\u00e3o ignorados</li> <li>Itens sem configura\u00e7\u00e3o fiscal geram erro</li> <li>Munic\u00edpio obrigat\u00f3rio para entidade</li> <li>Composi\u00e7\u00e3o duplicada n\u00e3o permitida</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/","title":"SCV_Pre_Gravacao.md","text":""},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de valida\u00e7\u00e3o pr\u00e9-grava\u00e7\u00e3o para documentos do SCV (Sistema de Controle de Vendas) da Linhasita, realizando verifica\u00e7\u00f5es de cr\u00e9dito e consist\u00eancia antes da persist\u00eancia dos dados.</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Garantir a integridade e conformidade dos documentos de venda atrav\u00e9s de valida\u00e7\u00f5es financeiras e comerciais antes da grava\u00e7\u00e3o definitiva no sistema.</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Cr\u00e9dito e Cobran\u00e7a</li> <li>Faturamento</li> <li>Controladoria</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SCV_Pre_Gravacao</code> - Valida\u00e7\u00e3o pr\u00e9-grava\u00e7\u00e3o</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/scv/</code></p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>ABE30</code> - Condi\u00e7\u00f5es de pagamento - <code>ABE01</code> - Entidades/Clientes - <code>DAA01</code> - T\u00edtulos a receber - <code>EAA0107</code> - Mensagens de inconsist\u00eancia</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documentos fiscais - <code>Abe30</code> - Condi\u00e7\u00f5es de pagamento - <code>Abe01</code> - Entidades - <code>Daa01</code> - T\u00edtulos - <code>Eaa0107</code> - Inconsist\u00eancias</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01 Eaa01 Sim Documento a ser validado"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo gravar Indicador de grava\u00e7\u00e3o (0-N\u00e3o, 1-Sim) Integer eaa01 Documento com inconsist\u00eancias registradas Eaa01"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Obt\u00e9m documento fiscal (EAA01)</li> <li>Verifica exist\u00eancia de condi\u00e7\u00e3o de pagamento</li> <li> <p>Inicializa flags de controle</p> </li> <li> <p>Processamento por Tipo de Opera\u00e7\u00e3o</p> </li> <li>Aplica valida\u00e7\u00f5es apenas para opera\u00e7\u00e3o \"201\" (Venda)</li> <li> <p>Executa verifica\u00e7\u00f5es financeiras espec\u00edficas</p> </li> <li> <p>Valida\u00e7\u00f5es de Inconsist\u00eancia</p> </li> <li>T\u00edtulos a receber vencidos</li> <li>Limite de cr\u00e9dito excedido</li> <li> <p>Restri\u00e7\u00f5es financeiras da entidade</p> </li> <li> <p>Defini\u00e7\u00e3o de Bloqueio</p> </li> <li>Define se documento ser\u00e1 bloqueado</li> <li>Registra mensagens de inconsist\u00eancia</li> <li>Remove pol\u00edtica de uso do documento</li> </ol>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#validacoes-obrigatorias","title":"Valida\u00e7\u00f5es Obrigat\u00f3rias","text":"<ul> <li>Condi\u00e7\u00e3o de pagamento \u00e9 obrigat\u00f3ria</li> <li>Apenas opera\u00e7\u00e3o \"201\" (Venda) sofre valida\u00e7\u00f5es financeiras</li> <li>Documento deve ter classifica\u00e7\u00e3o de documento ativa</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#verificacoes-financeiras","title":"Verifica\u00e7\u00f5es Financeiras","text":"<p>T\u00edtulos Vencidos: - Soma valores de t\u00edtulos com vencimento anterior \u00e0 data atual - Bloqueia documento se existirem t\u00edtulos vencidos</p> <p>Limite de Cr\u00e9dito: - Calcula total financeiro em aberto - Soma t\u00edtulos a receber n\u00e3o quitados - Considera valor do documento atual (se novo) - Bloqueia se exceder limite cadastrado</p> <p>Restri\u00e7\u00f5es: - Verifica flag de restri\u00e7\u00e3o financeira no cadastro da entidade - Bloqueia documento se entidade possui restri\u00e7\u00e3o</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#comportamento-do-sistema","title":"Comportamento do Sistema","text":"<ul> <li>Documento \u00e9 bloqueado (<code>eaa01bloqueado = 1</code>) se houver inconsist\u00eancias</li> <li>Mensagens detalhadas s\u00e3o registradas em <code>EAA0107</code></li> <li>Pol\u00edtica de uso \u00e9 removida do documento</li> <li>Processamento continua mesmo com inconsist\u00eancias</li> </ul>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#inconsistencias-registradas","title":"\ud83c\udfa8 Inconsist\u00eancias Registradas","text":"Tipo Mensagem Identificador T\u00edtulos Vencidos \"T\u00edtulo a receber vencido: [valor]\" BLOQUEIO Limite Excedido \"Limite de cr\u00e9dito excedido...\" BLOQUEIO Sem Limite \"A entidade n\u00e3o possui limite de cr\u00e9dito\" BLOQUEIO Restri\u00e7\u00e3o \"A entidade possui restri\u00e7\u00e3o financeira\" BLOQUEIO"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>multitec.utils</code> - Utilit\u00e1rios e cole\u00e7\u00f5es</p> <p>Consultas: - Soma de t\u00edtulos vencidos por entidade - Total financeiro de documentos em aberto - Total de t\u00edtulos a receber n\u00e3o quitados</p>"},{"location":"STREMA/formulas/scv/SCV_Pre_Gravacao/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Valida\u00e7\u00f5es aplicadas apenas para novos documentos/vendas</li> <li>Sistema tolerante a falhas (continua processamento)</li> <li>Mensagens de erro detalhadas e espec\u00edficas</li> <li>Integra\u00e7\u00e3o com sistema de bloqueio de documentos</li> <li>Remo\u00e7\u00e3o autom\u00e1tica de pol\u00edtica de uso</li> <li>Consultas otimizadas com joins</li> <li>Suporte a campos JSON para configura\u00e7\u00f5es flex\u00edveis</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/","title":"CAS_ImportarFCIEab01011 - Importa\u00e7\u00e3o de Ficha de Conte\u00fado de Importa\u00e7\u00e3o","text":""},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Classe respons\u00e1vel pela importa\u00e7\u00e3o de dados de Ficha de Conte\u00fado de Importa\u00e7\u00e3o (FCI) a partir de arquivos Excel (XLSX), realizando a inser\u00e7\u00e3o em lote na tabela <code>eab01011</code> do sistema.</p>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de importa\u00e7\u00e3o de dados de FCI, permitindo o carregamento em massa de informa\u00e7\u00f5es de c\u00e1lculo, itens, quantidades e valores atrav\u00e9s de planilhas Excel.</p>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Import/Export</li> <li>Contabilidade</li> <li>Administradores do sistema</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o arquivo MultipartFile Sim Arquivo Excel (.xlsx) com dados FCI"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#estrutura-de-dados","title":"\ud83d\udccb Estrutura de Dados","text":""},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#tabela-destino-eab01011","title":"Tabela Destino: <code>eab01011</code>","text":"Campo Tipo Descri\u00e7\u00e3o eab01011id Long ID \u00fanico do registro (sequencial) eab01011calc Long C\u00f3digo do c\u00e1lculo FCI eab01011item Long C\u00f3digo do item eab01011qtdComp BigDecimal Quantidade do componente eab01011qtde BigDecimal Quantidade eab01011valor BigDecimal Valor eab01011vmu BigDecimal Valor por unidade de medida"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#estrutura-do-arquivo-excel","title":"Estrutura do Arquivo Excel:","text":"Coluna Tipo Descri\u00e7\u00e3o Exemplo A Long C\u00f3digo do c\u00e1lculo FCI 1001 B Long C\u00f3digo do item 2050 C BigDecimal Quantidade do componente 2.5 D BigDecimal Quantidade 10.0 E BigDecimal Valor 150.75 F BigDecimal Valor por unidade 15.075"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#1-leitura-do-arquivo","title":"1. Leitura do Arquivo","text":"<ul> <li>Recebe arquivo Excel via MultipartFile</li> <li>Abre workbook e seleciona primeira planilha</li> <li>Itera sobre todas as linhas a partir da linha 1 (cabe\u00e7alho)</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#2-validacao-e-processamento","title":"2. Valida\u00e7\u00e3o e Processamento","text":"<ul> <li>Ignora linhas vazias na coluna A</li> <li>Valida exist\u00eancia do registro Eab0101</li> <li>Converte valores das c\u00e9lulas para tipos apropriados</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#3-construcao-do-sql","title":"3. Constru\u00e7\u00e3o do SQL","text":"<ul> <li>Monta instru\u00e7\u00e3o INSERT em lote</li> <li>Utiliza sequence para gera\u00e7\u00e3o de IDs</li> <li>Prepara statement com par\u00e2metros din\u00e2micos</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#4-execucao-em-lote","title":"4. Execu\u00e7\u00e3o em Lote","text":"<ul> <li>Preenche par\u00e2metros do PreparedStatement</li> <li>Executa inser\u00e7\u00e3o em massa</li> <li>Confirma transa\u00e7\u00e3o automaticamente</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#validacoes","title":"Valida\u00e7\u00f5es:","text":"<ul> <li>Linha vazia: Ignora se c\u00e9lula A estiver vazia</li> <li>Registro existente: Verifica se Eab0101 existe antes de importar</li> <li>Tipos de dados: Converte automaticamente para BigDecimal/Long</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#estrutura-do-arquivo","title":"Estrutura do Arquivo:","text":"<ul> <li>Cabe\u00e7alho: Linha 0 \u00e9 ignorada (considerada cabe\u00e7alho)</li> <li>Dados efetivos: Processa a partir da linha 1</li> <li>Formato num\u00e9rico: Todas as colunas de B a F devem ser num\u00e9ricas</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#processamento-em-lote","title":"Processamento em Lote:","text":"<ul> <li>Constru\u00e7\u00e3o incremental do SQL com m\u00faltiplos VALUES</li> <li>Uso de PreparedStatement para seguran\u00e7a e performance</li> <li>Commit autom\u00e1tico ao final da execu\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Tipo Descri\u00e7\u00e3o Resultado Banco Inser\u00e7\u00e3o em <code>eab01011</code> Registros importados Sistema Transa\u00e7\u00e3o Commit autom\u00e1tico"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":""},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#bibliotecas","title":"Bibliotecas:","text":"<ul> <li><code>Apache POI</code> - Manipula\u00e7\u00e3o de arquivos Excel</li> <li><code>Spring Multipart</code> - Upload de arquivos</li> <li><code>MultiORM</code> - Acesso a dados e criteria</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#entidades","title":"Entidades:","text":"<ul> <li><code>Eab0101</code> - Entidade de valida\u00e7\u00e3o</li> <li><code>Eab01011</code> - Tabela de destino</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#recursos-do-sistema","title":"Recursos do Sistema:","text":"<ul> <li>Sequence: <code>default_sequence</code> para gera\u00e7\u00e3o de IDs</li> <li>Conex\u00e3o ativa com banco de dados</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#performance","title":"Performance:","text":"<ul> <li>Processamento em lote para melhor performance</li> <li>Uso de PreparedStatement para evitar SQL injection</li> <li>Stream processing do arquivo Excel</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#tratamento-de-erros","title":"Tratamento de Erros:","text":"<ul> <li>Valida\u00e7\u00e3o de exist\u00eancia do registro pai</li> <li>Convers\u00e3o segura de tipos de dados</li> <li>Continua processamento mesmo com linhas inv\u00e1lidas</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#seguranca","title":"Seguran\u00e7a:","text":"<ul> <li>PreparedStatement previne SQL injection</li> <li>Valida\u00e7\u00e3o de tipos antes da inser\u00e7\u00e3o</li> <li>Controle de transa\u00e7\u00f5es autom\u00e1tico</li> </ul>"},{"location":"STREMA/formulas/spp/CAS_ImportarFCIEab01011/#limitacoes","title":"Limita\u00e7\u00f5es:","text":"<ul> <li>Processa apenas primeira planilha do workbook</li> <li>Assume estrutura fixa de colunas</li> <li>Requer cabe\u00e7alho na primeira linha</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/","title":"SPP_F8_SPP1001","text":""},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula F8 para consulta de ordens de produ\u00e7\u00e3o no sistema SPP (Sistema de Produ\u00e7\u00e3o e Planejamento). Implementa busca paginada com filtros din\u00e2micos para visualiza\u00e7\u00e3o de dados de produ\u00e7\u00e3o.</p>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer interface de consulta r\u00e1pida (F8) para ordens de produ\u00e7\u00e3o, permitindo filtros personalizados e busca textual sobre dados de produ\u00e7\u00e3o.</p>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Planejamento de Produ\u00e7\u00e3o</li> <li>Controle de Produ\u00e7\u00e3o</li> <li>PCP (Planejamento e Controle de Produ\u00e7\u00e3o)</li> <li>Supervisores de Produ\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#parametrosconfiguracoes","title":"\u2699\ufe0f Par\u00e2metros/Configura\u00e7\u00f5es","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis requisicao RequisicaoDoF8 Sim Objeto com par\u00e2metros da consulta F8 Pagina\u00e7\u00e3o, filtros e buscas"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#estrutura-de-dados","title":"\ud83d\udcca Estrutura de Dados","text":""},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#colunas-retornadas","title":"Colunas Retornadas","text":"Campo Descri\u00e7\u00e3o Tipo aah01codigo C\u00f3digo do tipo de documento String abb01num N\u00famero do documento Integer abb01data Data do documento Date bab01status Status da ordem de produ\u00e7\u00e3o String abp20bomCodigo C\u00f3digo da lista de materiais (BOM) String abm01codigo C\u00f3digo do item String abm01na N\u00famero de alternativo do item String bab01qt Quantidade da ordem BigDecimal abp10codigo C\u00f3digo do processo String abp10descr Descri\u00e7\u00e3o do processo String"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#tabelas-envolvidas","title":"Tabelas Envolvidas","text":"<ul> <li><code>bab01</code> - Ordens de produ\u00e7\u00e3o</li> <li><code>abb01</code> - Cabe\u00e7alho de documentos</li> <li><code>aah01</code> - Tipos de documento</li> <li><code>abp20</code> - Listas de materiais (BOM)</li> <li><code>abm01</code> - Itens (produtos)</li> <li><code>abp10</code> - Processos de produ\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o das Colunas</li> <li>Define colunas que ser\u00e3o exibidas no resultado</li> <li> <p>Mapeia campos do SAM para colunas do F8</p> </li> <li> <p>Processamento de Filtros</p> </li> <li>Converte filtros da interface em cl\u00e1usulas WHERE</li> <li> <p>Adiciona par\u00e2metros para consulta segura</p> </li> <li> <p>Processamento de Buscas</p> </li> <li>Converte crit\u00e9rios de busca textual em cl\u00e1usulas OR</li> <li> <p>Combina m\u00faltiplos campos de busca</p> </li> <li> <p>Execu\u00e7\u00e3o da Consulta</p> </li> <li>Monta SQL final com pagina\u00e7\u00e3o</li> <li>Aplica filtros de seguran\u00e7a (obterWherePadrao)</li> <li> <p>Ordena por data e n\u00famero decrescente</p> </li> <li> <p>Retorno dos Dados</p> </li> <li>Estrutura resposta no formato F8</li> <li>Inclui metadados das colunas e dados paginados</li> </ol>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Aplica <code>obterWherePadrao(\"bab01\")</code> para restringir acesso aos dados</li> <li>Utiliza consultas parametrizadas para prevenir SQL injection</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#paginacao","title":"Pagina\u00e7\u00e3o","text":"<ul> <li>Suporta pagina\u00e7\u00e3o nativa do F8</li> <li>Mant\u00e9m ordena\u00e7\u00e3o consistente entre p\u00e1ginas</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#filtros","title":"Filtros","text":"<ul> <li>Combina m\u00faltiplos filtros com operador AND</li> <li>Suporta filtros complexos com m\u00faltiplos par\u00e2metros</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#buscas","title":"Buscas","text":"<ul> <li>Combina m\u00faltiplos crit\u00e9rios de busca com operador OR</li> <li>Permite busca textual em m\u00faltiplos campos</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#saidasretornos","title":"\ud83c\udfa8 Sa\u00eddas/Retornos","text":"Tipo Descri\u00e7\u00e3o Estrutura RespostaDoF8 Dados paginados + metadados Lista de registros + defini\u00e7\u00e3o de colunas"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Entidades do Sistema: - <code>bab01</code> - Ordem de produ\u00e7\u00e3o - <code>abb01</code> - Cabe\u00e7alho do documento - <code>aah01</code> - Tipo de documento - <code>abp20</code> - Lista de materiais (BOM) - <code>abm01</code> - Item - <code>abp10</code> - Processo</p> <p>Framework: - <code>RequisicaoDoF8</code> - Par\u00e2metros da consulta - <code>RespostaDoF8</code> - Estrutura de retorno - <code>ColunaF8</code> - Defini\u00e7\u00e3o de colunas</p>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#performance","title":"Performance","text":"<ul> <li>Utiliza pagina\u00e7\u00e3o nativa do banco de dados</li> <li>Aplica \u00edndices atrav\u00e9s de ordena\u00e7\u00e3o por data e n\u00famero</li> <li>Consulta otimizada com JOINs necess\u00e1rios apenas</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#manutenibilidade","title":"Manutenibilidade","text":"<ul> <li>C\u00f3digo claro e estruturado</li> <li>F\u00e1cil adi\u00e7\u00e3o de novas colunas</li> <li>Tratamento gen\u00e9rico de filtros e buscas</li> </ul>"},{"location":"STREMA/formulas/spp/SPP_F8_SPP1001/#seguranca_1","title":"Seguran\u00e7a","text":"<ul> <li>Where padr\u00e3o aplicado automaticamente</li> <li>Par\u00e2metros tratados contra SQL injection</li> <li>Acesso restrito por permiss\u00f5es do sistema</li> </ul> <p>\u00daltima Atualiza\u00e7\u00e3o: 13/11/2025 Tipo de F\u00f3rmula: F8 (Consulta R\u00e1pida)</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/","title":"SRF_CalculoItem_Entrada_ImportacaoDrawback.md","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula para c\u00e1lculo de itens em documentos fiscais de entrada com regime especial de Drawback, respons\u00e1vel pelo processamento de tributos e valores em importa\u00e7\u00f5es.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular automaticamente os valores tribut\u00e1rios, quantidades e custos de itens em documentos de entrada com regime de Drawback, garantindo conformidade fiscal e precis\u00e3o nos c\u00e1lculos.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Com\u00e9rcio Exterior</li> <li>Contabilidade</li> <li>Almoxarifado/Estoque</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_CalculoItem_Entrada_ImportacaoDrawback</code> - C\u00e1lculo de itens com Drawback</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens do documento - <code>ABM01</code> - Cadastro de itens - <code>ABM0101</code> - Configura\u00e7\u00f5es do item por empresa - <code>ABM12</code> - Dados fiscais do item - <code>ABM13</code> - Dados comerciais do item</p> <p>Entidades Envolvidas: - <code>Eaa0103</code> - Item do documento - <code>Abm01</code> - Item - <code>Abm0101</code> - Configura\u00e7\u00e3o empresa-item - <code>Abm12</code> - Configura\u00e7\u00e3o fiscal - <code>Abm13</code> - Configura\u00e7\u00e3o comercial</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa0103 Eaa0103 Sim Item do documento a ser calculado"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o e Valida\u00e7\u00f5es</li> <li>Obt\u00e9m item do documento (EAA0103)</li> <li>Carrega documento pai (EAA01) e central (ABB01)</li> <li> <p>Recupera dados da PCD, entidade e empresa</p> </li> <li> <p>Carregamento de Dados Complementares</p> </li> <li>Endere\u00e7os da entidade e empresa</li> <li>Configura\u00e7\u00f5es do item (fiscal, comercial, valores)</li> <li>Dados tribut\u00e1rios (CFOP, NCM, CSTs)</li> <li> <p>Campos livres (JSON) de diversas entidades</p> </li> <li> <p>C\u00e1lculos Principais</p> </li> <li>Valores do item (total, descontos)</li> <li>Tributos (II, IPI, PIS, COFINS, ICMS)</li> <li>Quantidades e convers\u00f5es de unidades</li> <li>Pesos e volumes</li> <li> <p>Custo de aquisi\u00e7\u00e3o para importa\u00e7\u00e3o</p> </li> <li> <p>Processamento Espec\u00edfico Drawback</p> </li> <li>C\u00e1lculo de base de custo (CIF)</li> <li>Tratamento para opera\u00e7\u00f5es com exterior</li> <li>Ajustes fiscais espec\u00edficos</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#validacoes-criticas","title":"Valida\u00e7\u00f5es Cr\u00edticas","text":"<ul> <li>Item deve existir no documento</li> <li>Endere\u00e7o principal da entidade \u00e9 obrigat\u00f3rio</li> <li>Configura\u00e7\u00e3o fiscal do item deve existir</li> <li>Dados da empresa e entidade devem estar completos</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#calculos-tributarios","title":"C\u00e1lculos Tribut\u00e1rios","text":"<ul> <li>IPI: Calculado com al\u00edquota do NCM, com isen\u00e7\u00e3o para al\u00edquota zero</li> <li>ICMS: C\u00e1lculo com base na al\u00edquota e ajuste de base de c\u00e1lculo</li> <li>PIS/COFINS: Tratamento especial para opera\u00e7\u00f5es com exterior</li> <li>II: Utiliza al\u00edquota espec\u00edfica do item</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#conversoes-e-ajustes","title":"Convers\u00f5es e Ajustes","text":"<ul> <li>Convers\u00e3o de quantidade comercial para estoque</li> <li>C\u00e1lculo de peso bruto e l\u00edquido</li> <li>Ajuste de volumes quando aplic\u00e1vel</li> <li>C\u00e1lculo de custo de aquisi\u00e7\u00e3o considerando todos os tributos</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#campos-livres-json","title":"Campos Livres (JSON)","text":"<ul> <li><code>vlrfcientrada</code>: Valor fiscal de entrada</li> <li><code>ii_aliq</code>: Al\u00edquota do Imposto de Importa\u00e7\u00e3o</li> <li><code>vlr_vlme</code>: Valor do volume</li> <li><code>ipi_aliq</code>, <code>ipi_bc</code>, <code>ipi_ipi</code>: Dados do IPI</li> <li><code>custo_aquisicao</code>: Custo total de aquisi\u00e7\u00e3o</li> <li><code>cif_imp</code>: Valor CIF da importa\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo eaa0103 Item do documento com c\u00e1lculos atualizados Eaa0103"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>sam.dicdados</code> - Defini\u00e7\u00f5es de tipos de f\u00f3rmula - <code>sam.model.entities</code> - Entidades do sistema</p> <p>Entidades Relacionadas: - Todas entidades AA, AB, EA do pacote <code>sam.model.entities</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, executado para cada item do documento</li> <li>Tratamento de Erros: Valida\u00e7\u00f5es com <code>ValidacaoException</code> para dados inconsistentes</li> <li>Performance: Utiliza carregamento lazy de entidades relacionadas</li> <li>Flexibilidade: Campos livres (JSON) permitem extensibilidade sem altera\u00e7\u00e3o de schema</li> <li>Especificidade: Foco em opera\u00e7\u00f5es de importa\u00e7\u00e3o com regime Drawback</li> <li>Arredondamentos: Aplicados em valores monet\u00e1rios (2 casas) e quantidades (4 casas)</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#estrutura-de-calculo","title":"Estrutura de C\u00e1lculo","text":"<ul> <li>Separa\u00e7\u00e3o clara entre carregamento de dados e c\u00e1lculos</li> <li>Reutiliza\u00e7\u00e3o de fatores de convers\u00e3o comerciais</li> <li>Considera\u00e7\u00e3o de m\u00faltiplos endere\u00e7os na entidade</li> <li>Suporte a diferentes unidades de medida</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItemEntradaImportacaoDrawback/#tributacao","title":"Tributa\u00e7\u00e3o","text":"<ul> <li>Tratamento diferenciado para opera\u00e7\u00f5es com exterior (UF \"EX\")</li> <li>C\u00e1lculo de base de ICMS com ajuste de divisor</li> <li>Isen\u00e7\u00e3o autom\u00e1tica de IPI quando al\u00edquota zero</li> <li>Acumula\u00e7\u00e3o de despesas acess\u00f3rias</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/","title":"SRF_CalculoItem_Entrada.md","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula principal para c\u00e1lculo de itens em documentos fiscais de entrada, respons\u00e1vel pelo processamento completo de tributos, valores e ajustes fiscais em opera\u00e7\u00f5es de compra.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular automaticamente valores tribut\u00e1rios, convers\u00f5es de unidades, custos de aquisi\u00e7\u00e3o e tratamentos fiscais espec\u00edficos para opera\u00e7\u00f5es de entrada, garantindo conformidade fiscal e precis\u00e3o nos c\u00e1lculos.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Compras</li> <li>Contabilidade</li> <li>Almoxarifado/Estoque</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_CalculoItem_Entrada</code> - C\u00e1lculo principal de itens de entrada</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens do documento - <code>ABD01</code> - Tipos de documento (PCD) - <code>ABM01</code> - Cadastro de itens - <code>ABM0101</code> - Configura\u00e7\u00f5es do item por empresa - <code>ABM12</code> - Dados fiscais do item</p> <p>Entidades Envolvidas: - <code>Eaa0103</code> - Item do documento - <code>Eaa01</code> - Documento fiscal - <code>Abd01</code> - Tipo de documento (PCD) - <code>Abm01</code> - Item - <code>Abm0101</code> - Configura\u00e7\u00e3o empresa-item</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa0103 Eaa0103 Sim Item do documento a ser calculado"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o e Valida\u00e7\u00f5es</li> <li>Obt\u00e9m item do documento (EAA0103) e documento pai (EAA01)</li> <li>Carrega dados da central (ABB01) e PCD</li> <li>Valida se documento \u00e9 de entrada</li> <li> <p>Verifica endere\u00e7o principal da entidade</p> </li> <li> <p>Carregamento de Dados Complementares</p> </li> <li>Endere\u00e7os da entidade e empresa</li> <li>Configura\u00e7\u00f5es do item (fiscal, comercial, valores)</li> <li>Dados tribut\u00e1rios (CFOP, NCM, CSTs)</li> <li> <p>Fatores de convers\u00e3o de unidades</p> </li> <li> <p>Ajustes Autom\u00e1ticos de CFOP</p> </li> <li>Determina\u00e7\u00e3o se opera\u00e7\u00e3o \u00e9 intra ou interestadual</li> <li>Ajuste de CFOP baseado no tipo de item</li> <li> <p>Tratamento espec\u00edfico para material de uso e consumo</p> </li> <li> <p>C\u00e1lculos Principais</p> </li> <li>Valores do item e totais</li> <li>Convers\u00f5es de quantidades e unidades</li> <li>Tributos (ICMS, IPI, PIS, COFINS)</li> <li>C\u00e1lculo de custo de aquisi\u00e7\u00e3o</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#validacoes-criticas","title":"Valida\u00e7\u00f5es Cr\u00edticas","text":"<ul> <li>Item deve existir no documento</li> <li>Documento deve ser de entrada (PCD com abd01es \u2260 1)</li> <li>Endere\u00e7o principal da entidade \u00e9 obrigat\u00f3rio</li> <li>Configura\u00e7\u00e3o fiscal do item deve existir</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#ajustes-automaticos-de-cfop","title":"Ajustes Autom\u00e1ticos de CFOP","text":"<ul> <li>Mercadoria para Revenda (00): CFOP 1/2102 ou 1/2403 com IVA</li> <li>Mat\u00e9ria-Prima/Embalagem (01/02): CFOP 1/2101 ou 1/2401 com IVA</li> <li>Material de Uso e Consumo (07): CFOP 1/2556 com ajustes espec\u00edficos de CST</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#calculos-tributarios","title":"C\u00e1lculos Tribut\u00e1rios","text":"<ul> <li>ICMS: Tratamento completo por CST (00, 10, 20, 30, 40, 41, 50, 51, 60, 70, 90)</li> <li>IPI: C\u00e1lculo com base no NCM, com observa\u00e7\u00f5es fiscais para Simples Nacional</li> <li>PIS/COFINS: Tratamento por CST com bases de c\u00e1lculo espec\u00edficas</li> <li>Substitui\u00e7\u00e3o Tribut\u00e1ria: C\u00e1lculo de IVA e ICMS-ST quando aplic\u00e1vel</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#regimes-tributarios","title":"Regimes Tribut\u00e1rios","text":"<ul> <li>Regime Normal: C\u00e1lculos completos de todos os tributos</li> <li>Simples Nacional: Ajustes autom\u00e1ticos de CST e al\u00edquotas espec\u00edficas</li> <li>Importa\u00e7\u00e3o: Tratamento diferenciado para empresas importadoras</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo eaa0103 Item do documento com c\u00e1lculos atualizados Eaa0103"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>sam.dicdados</code> - Defini\u00e7\u00f5es de tipos de f\u00f3rmula - <code>sam.model.entities</code> - Entidades do sistema</p> <p>Entidades Relacionadas: - Todas entidades AA, AB, EA do pacote <code>sam.model.entities</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, executado para cada item do documento</li> <li>Valida\u00e7\u00f5es: Utiliza <code>ValidacaoException</code> para dados inconsistentes</li> <li>Performance: Carregamento otimizado de entidades relacionadas</li> <li>Flexibilidade: Campos livres (JSON) permitem extensibilidade</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#tratamentos-especificos","title":"Tratamentos Espec\u00edficos","text":"<ul> <li>Material de Uso e Consumo: Ajuste autom\u00e1tico de CST para 90 e CFOP espec\u00edfico</li> <li>Observa\u00e7\u00f5es Fiscais de IPI: Geradas automaticamente para opera\u00e7\u00f5es espec\u00edficas</li> <li>Redu\u00e7\u00f5es de Base de C\u00e1lculo: Aplicadas conforme configura\u00e7\u00f5es do item</li> <li>Custo de Aquisi\u00e7\u00e3o: Calculado considerando todos os tributos e descontos</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada/#campos-livres-json-utilizados","title":"Campos Livres (JSON) Utilizados","text":"<ul> <li><code>ipi_obs</code>: Observa\u00e7\u00e3o fiscal de IPI</li> <li><code>custo_aquisicao</code>: Custo total de aquisi\u00e7\u00e3o</li> <li><code>tx_iva_st</code>: Percentual de IVA para substitui\u00e7\u00e3o tribut\u00e1ria</li> <li><code>icm_reduc_bc</code>: Percentual de redu\u00e7\u00e3o de base de c\u00e1lculo do ICMS</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/","title":"SRF_CalculoItem_Entrada_Cte.md","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para c\u00e1lculo de itens em documentos fiscais de entrada com foco em opera\u00e7\u00f5es de Conhecimento de Transporte Eletr\u00f4nico (CT-e), incluindo tratamento completo de tributos e ajustes fiscais.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular valores tribut\u00e1rios, convers\u00f5es de unidades, custos de aquisi\u00e7\u00e3o e tratamentos fiscais espec\u00edficos para opera\u00e7\u00f5es de entrada via CT-e, garantindo conformidade fiscal e precis\u00e3o nos c\u00e1lculos.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Log\u00edstica/Transportes</li> <li>Contabilidade</li> <li>Almoxarifado/Estoque</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_CalculoItem_Entrada_Cte</code> - C\u00e1lculo de itens de entrada via CT-e</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens do documento - <code>ABD01</code> - Tipos de documento (PCD) - <code>ABM01</code> - Cadastro de itens - <code>ABM0101</code> - Configura\u00e7\u00f5es do item por empresa - <code>ABM12</code> - Dados fiscais do item</p> <p>Entidades Envolvidas: - <code>Eaa0103</code> - Item do documento - <code>Eaa01</code> - Documento fiscal - <code>Abd01</code> - Tipo de documento (PCD) - <code>Abm01</code> - Item - <code>Abm0101</code> - Configura\u00e7\u00e3o empresa-item</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa0103 Eaa0103 Sim Item do documento a ser calculado"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o e Valida\u00e7\u00f5es</li> <li>Obt\u00e9m item do documento (EAA0103) e documento pai (EAA01)</li> <li>Carrega dados da central (ABB01) e PCD</li> <li>Valida endere\u00e7o principal da entidade</li> <li> <p>Verifica se documento \u00e9 de entrada</p> </li> <li> <p>Carregamento de Dados Complementares</p> </li> <li>Endere\u00e7os da entidade e empresa</li> <li>Configura\u00e7\u00f5es do item (fiscal, comercial, valores)</li> <li>Dados tribut\u00e1rios (CFOP, NCM, CSTs)</li> <li> <p>Tabela de pre\u00e7os e fatores de convers\u00e3o</p> </li> <li> <p>C\u00e1lculos Principais</p> </li> <li>Valores do item e totais</li> <li>Convers\u00f5es de quantidades e unidades</li> <li>Tributos (ICMS, IPI, PIS, COFINS)</li> <li>Ajustes de CFOP autom\u00e1ticos</li> <li> <p>C\u00e1lculo de custo de aquisi\u00e7\u00e3o</p> </li> <li> <p>Tratamentos Espec\u00edficos CT-e</p> </li> <li>Diferencial de al\u00edquota para opera\u00e7\u00f5es interestaduais</li> <li>Ajustes fiscais espec\u00edficos para transporte</li> <li>Observa\u00e7\u00f5es fiscais autom\u00e1ticas</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#validacoes-criticas","title":"Valida\u00e7\u00f5es Cr\u00edticas","text":"<ul> <li>Item deve existir no documento</li> <li>Documento deve ser de entrada (PCD com abd01es \u2260 1)</li> <li>Endere\u00e7o principal da entidade \u00e9 obrigat\u00f3rio</li> <li>Configura\u00e7\u00e3o fiscal do item deve existir</li> <li>Fator de convers\u00e3o de unidade \u00e9 obrigat\u00f3rio</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#ajustes-automaticos-de-cfop","title":"Ajustes Autom\u00e1ticos de CFOP","text":"<ul> <li>Mercadoria para Revenda (00): CFOP 1/2102 ou 1/2403 com IVA</li> <li>Mat\u00e9ria-Prima/Embalagem (01/02): CFOP 1/2101 ou 1/2401 com IVA</li> <li>Material de Uso e Consumo (07): CFOP 1/2556 com ajustes espec\u00edficos</li> <li>Opera\u00e7\u00f5es com ST: CFOP 1/2403 com tratamentos diferenciados</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#calculos-tributarios","title":"C\u00e1lculos Tribut\u00e1rios","text":"<ul> <li>ICMS: Tratamento completo por CST (00, 10, 20, 30, 40, 50, 51, 60, 61, 70, 90)</li> <li>IPI: C\u00e1lculo com base no NCM, com observa\u00e7\u00f5es fiscais espec\u00edficas</li> <li>PIS/COFINS: Tratamento por CST com bases de c\u00e1lculo ajustadas</li> <li>Diferencial de Al\u00edquota: Aplicado para opera\u00e7\u00f5es interestaduais de uso/consumo</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#conversoes-e-ajustes","title":"Convers\u00f5es e Ajustes","text":"<ul> <li>Convers\u00e3o de quantidade comercial para estoque</li> <li>C\u00e1lculo autom\u00e1tico de valores unit\u00e1rios da tabela de pre\u00e7os</li> <li>Ajustes de redu\u00e7\u00e3o de base de c\u00e1lculo</li> <li>Tratamento de IVA para substitui\u00e7\u00e3o tribut\u00e1ria</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo eaa0103 Item do documento com c\u00e1lculos atualizados Eaa0103"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>sam.dicdados</code> - Defini\u00e7\u00f5es de tipos de f\u00f3rmula - <code>sam.model.entities</code> - Entidades do sistema</p> <p>Entidades Relacionadas: - Todas entidades AA, AB, EA do pacote <code>sam.model.entities</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, executado para cada item do documento</li> <li>Valida\u00e7\u00f5es: Utiliza <code>ValidacaoException</code> para dados inconsistentes</li> <li>Flexibilidade: Campos livres (JSON) permitem extensibilidade</li> <li>Performance: Carregamento otimizado de entidades relacionadas</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#tratamentos-especificos","title":"Tratamentos Espec\u00edficos","text":"<ul> <li>Simples Nacional: Ajustes autom\u00e1ticos de CST e al\u00edquotas</li> <li>Opera\u00e7\u00f5es com ST: C\u00e1lculo completo de IVA e base de c\u00e1lculo</li> <li>Observa\u00e7\u00f5es Fiscais: Gera\u00e7\u00e3o autom\u00e1tica para IPI e diferencial de al\u00edquota</li> <li>CFOP Din\u00e2mico: Ajuste autom\u00e1tico baseado no tipo de item e opera\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Cte/#campos-livres-json-utilizados","title":"Campos Livres (JSON) Utilizados","text":"<ul> <li><code>unit_tabela</code>: Valor unit\u00e1rio da tabela de pre\u00e7os</li> <li><code>ipi_obs</code>: Observa\u00e7\u00e3o fiscal de IPI</li> <li><code>custo_simples</code>: Percentual de custo para Simples Nacional</li> <li><code>custo_aquisicao</code>: Custo total de aquisi\u00e7\u00e3o</li> <li><code>bc_difaliq</code>, <code>valor_difal</code>: Dados do diferencial de al\u00edquota</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/","title":"SRF_CalculoItem_Entrada_Importacao.md","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para c\u00e1lculo de itens em documentos fiscais de entrada de importa\u00e7\u00e3o, com tratamento espec\u00edfico para diferentes modalidades de importa\u00e7\u00e3o (PCD 114 e 314).</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Calcular valores tribut\u00e1rios, convers\u00f5es monet\u00e1rias e custos de aquisi\u00e7\u00e3o em opera\u00e7\u00f5es de importa\u00e7\u00e3o, garantindo conformidade fiscal e precis\u00e3o nos c\u00e1lculos de impostos.</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Com\u00e9rcio Exterior</li> <li>Contabilidade</li> <li>Almoxarifado/Estoque</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_CalculoItem_Entrada_Importacao</code> - C\u00e1lculo de itens de importa\u00e7\u00e3o</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens do documento - <code>ABD01</code> - Tipos de documento (PCD) - <code>ABM01</code> - Cadastro de itens - <code>ABM0101</code> - Configura\u00e7\u00f5es do item por empresa - <code>ABM12</code> - Dados fiscais do item</p> <p>Entidades Envolvidas: - <code>Eaa0103</code> - Item do documento - <code>Eaa01</code> - Documento fiscal - <code>Abd01</code> - Tipo de documento (PCD) - <code>Abm01</code> - Item - <code>Abm0101</code> - Configura\u00e7\u00e3o empresa-item</p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa0103 Eaa0103 Sim Item do documento a ser calculado"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o e Valida\u00e7\u00f5es</li> <li>Obt\u00e9m item do documento (EAA0103)</li> <li>Carrega documento pai (EAA01) e central (ABB01)</li> <li>Recupera dados da PCD, entidade e empresa</li> <li> <p>Valida endere\u00e7o principal da entidade</p> </li> <li> <p>Carregamento de Dados Complementares</p> </li> <li>Endere\u00e7os da entidade e empresa</li> <li>Configura\u00e7\u00f5es do item (fiscal, comercial, valores)</li> <li>Dados tribut\u00e1rios (CFOP, NCM, CSTs)</li> <li> <p>Campos livres (JSON) de diversas entidades</p> </li> <li> <p>Processamento por Modalidade de Importa\u00e7\u00e3o</p> </li> <li>PCD 114: C\u00e1lculo simples baseado em quantidade \u00d7 valor unit\u00e1rio</li> <li> <p>PCD 314: C\u00e1lculo complexo com convers\u00e3o monet\u00e1ria e tributos espec\u00edficos</p> </li> <li> <p>C\u00e1lculos Tribut\u00e1rios</p> </li> <li>Imposto de Importa\u00e7\u00e3o (II)</li> <li>IPI, PIS, COFINS, ICMS</li> <li>Convers\u00f5es de quantidades e unidades</li> <li>C\u00e1lculo de custo de aquisi\u00e7\u00e3o</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#validacoes-criticas","title":"Valida\u00e7\u00f5es Cr\u00edticas","text":"<ul> <li>Item deve existir no documento</li> <li>Endere\u00e7o principal da entidade \u00e9 obrigat\u00f3rio</li> <li>Configura\u00e7\u00e3o fiscal do item deve existir</li> <li>Para PCD 314, cota\u00e7\u00e3o monet\u00e1ria \u00e9 obrigat\u00f3ria</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#tratamento-por-tipo-de-documento-pcd","title":"Tratamento por Tipo de Documento (PCD)","text":"<ul> <li>PCD 114: C\u00e1lculo direto sem convers\u00e3o monet\u00e1ria</li> <li>PCD 314: C\u00e1lculo com convers\u00e3o para Real e tributos espec\u00edficos</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#calculos-tributarios","title":"C\u00e1lculos Tribut\u00e1rios","text":"<ul> <li>II: Base de c\u00e1lculo no valor CIF, zerado quando al\u00edquota zero</li> <li>IPI: Base = CIF + II, com isen\u00e7\u00e3o para al\u00edquota zero</li> <li>PIS/COFINS: Tratamento diferenciado para opera\u00e7\u00f5es com exterior (UF \"EX\")</li> <li>ICMS: C\u00e1lculo complexo com ajuste de base de c\u00e1lculo e tratamento para CST 51</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#conversoes-monetarias-pcd-314","title":"Convers\u00f5es Monet\u00e1rias (PCD 314)","text":"<ul> <li>Utiliza data de cota\u00e7\u00e3o espec\u00edfica ou \u00faltima cota\u00e7\u00e3o dispon\u00edvel</li> <li>Converte valores FOB, frete e seguro para Real</li> <li>Valida exist\u00eancia de cota\u00e7\u00e3o para a data informada</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo eaa0103 Item do documento com c\u00e1lculos atualizados Eaa0103"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>sam.dicdados</code> - Defini\u00e7\u00f5es de tipos de f\u00f3rmula - <code>sam.model.entities</code> - Entidades do sistema</p> <p>Entidades Relacionadas: - Todas entidades AA, AB, EA do pacote <code>sam.model.entities</code></p>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, executado para cada item do documento</li> <li>Tratamento de Erros: Valida\u00e7\u00f5es com <code>ValidacaoException</code> e <code>interromper()</code> para dados inconsistentes</li> <li>Performance: Utiliza carregamento lazy de entidades relacionadas</li> <li>Flexibilidade: Campos livres (JSON) permitem extensibilidade sem altera\u00e7\u00e3o de schema</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#especificidades-por-pcd","title":"Especificidades por PCD","text":"<ul> <li>PCD 114: Foco em importa\u00e7\u00f5es simplificadas</li> <li>PCD 314: Processamento completo com convers\u00e3o monet\u00e1ria e todos os tributos</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#campos-livres-json-utilizados","title":"Campos Livres (JSON) Utilizados","text":"<ul> <li><code>fob_imp_real</code>: Valor FOB convertido para Real</li> <li><code>vlr_frete_real</code>, <code>vlr_seguro_real</code>: Despesas convertidas</li> <li><code>cif_imp</code>: Valor CIF da importa\u00e7\u00e3o</li> <li><code>custo_aquisicao</code>: Custo total de aquisi\u00e7\u00e3o</li> <li><code>vlr_unit_sem</code>, <code>qtde_doc</code>: Dados b\u00e1sicos do item</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_CalculoItem_Entrada_Importacao/#tratamento-de-tributos","title":"Tratamento de Tributos","text":"<ul> <li>Ajuste autom\u00e1tico de base de c\u00e1lculo do ICMS</li> <li>Isen\u00e7\u00e3o de IPI quando al\u00edquota zero no NCM</li> <li>Zeramento de ICMS para CST terminado em \"51\"</li> <li>C\u00e1lculo de PIS/COFINS com al\u00edquotas espec\u00edficas por UF</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF_EnviarEmailsNFe.md","text":""},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de envio automatizado de e-mails para Notas Fiscais Eletr\u00f4nicas (NF-e), incluindo documentos fiscais, boletos e cartas de corre\u00e7\u00e3o para m\u00faltiplos destinat\u00e1rios.</p>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de distribui\u00e7\u00e3o de documentos fiscais eletr\u00f4nicos via e-mail para clientes, representantes, transportadoras e setores internos, garantindo conformidade com a legisla\u00e7\u00e3o fiscal.</p>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Representantes Comerciais</li> <li>Transportadoras</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_EnviarEmailsNFe</code> - Sistema de envio de e-mails NF-e</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>AAA16</code> - Processamento de mensageria - <code>ABB01</code> - Centrais de documento - <code>ABE01</code> - Entidades/clientes - <code>EAA0102</code> - Dados gerais do documento - <code>EAA0114</code> - Cartas de corre\u00e7\u00e3o</p> <p>Entidades Envolvidas: - <code>EmailNFeDto</code> - DTO para transporte de dados de e-mail - <code>Eaa01</code> - Documento fiscal - <code>Abe01</code> - Entidade/cliente</p>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (quando aplic\u00e1vel)"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Inicializa\u00e7\u00e3o e Valida\u00e7\u00f5es</li> <li>Recebe par\u00e2metros de entrada (documento, processamento, carta de corre\u00e7\u00e3o)</li> <li>Carrega dados do documento fiscal e entidade</li> <li> <p>Verifica tipo de processamento (faturamento, cancelamento, carta de corre\u00e7\u00e3o)</p> </li> <li> <p>Composi\u00e7\u00e3o da Mensagem</p> </li> <li>Monta assunto padr\u00e3o com dados da empresa e n\u00famero da NF</li> <li>Comp\u00f5e corpo do e-mail conforme tipo de opera\u00e7\u00e3o</li> <li> <p>Inclui dados do cliente, chave de acesso e protocolo</p> </li> <li> <p>Distribui\u00e7\u00e3o de Destinat\u00e1rios</p> </li> <li>Faturamento: E-mail principal do cliente</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a quando diferente</li> <li>Representantes: E-mails dos representantes comerciais</li> <li>Transportadora: E-mail da transportadora quando houver despacho</li> <li>Contatos da Entidade: E-mails adicionais por classifica\u00e7\u00e3o (9002, 9003, 9004)</li> <li> <p>C\u00f3pia Interna: E-mail nfe@stremasbaterias.com.br</p> </li> <li> <p>Configura\u00e7\u00e3o de Anexos</p> </li> <li>XML da NF-e</li> <li>DANFE (PDF)</li> <li>Boleto banc\u00e1rio</li> <li>Configura\u00e7\u00e3o por tipo de destinat\u00e1rio</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-envio","title":"Tipos de Envio","text":"<ul> <li>Faturamento: XML + DANFE (obrigat\u00f3rio) + Boleto (condicional)</li> <li>Cobran\u00e7a: Boleto (quando e-mail diferente do faturamento)</li> <li>Cancelamento/CC-e: XML apenas</li> <li>Representantes: XML + DANFE + Boleto</li> <li>Transportadora: XML + DANFE</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#classificacao-de-contatos-da-entidade","title":"Classifica\u00e7\u00e3o de Contatos da Entidade","text":"<ul> <li>9002: Envia somente boleto</li> <li>9003: Envia somente XML e PDF</li> <li>9004: Envia boleto, XML e PDF</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#remetentes","title":"Remetentes","text":"<ul> <li>0: Principal</li> <li>1: Cobran\u00e7a  </li> <li>2: Faturamento</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>E-mail de faturamento \u00e9 obrigat\u00f3rio</li> <li>Cancelamentos e cartas de corre\u00e7\u00e3o enviam apenas XML</li> <li>Representantes recebem todos os anexos</li> <li>C\u00f3pia sempre enviada para nfe@stremasbaterias.com.br</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo emails Lista de e-mails configurados para envio List"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>sam.dto.srf</code> - DTOs do m\u00f3dulo SRF</p> <p>Estruturas de Dados: - <code>EmailNFeDto</code> - Transporte de configura\u00e7\u00f5es de e-mail - <code>TableMap</code> - Armazenamento de dados de contatos</p>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, executado durante processamento fiscal</li> <li>Formata\u00e7\u00e3o: E-mails em HTML com dados formatados</li> <li>Flexibilidade: M\u00faltiplos destinat\u00e1rios com configura\u00e7\u00f5es espec\u00edficas</li> <li>Rastreabilidade: Inclui chave de acesso e protocolo da SEFAZ</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-do-emailnfedto","title":"Estrutura do EmailNFeDto","text":"<ul> <li><code>assunto</code>: Assunto do e-mail</li> <li><code>corpo</code>: Corpo da mensagem em HTML</li> <li><code>emailsDestinoPara</code>: Lista de destinat\u00e1rios</li> <li><code>enviarXML</code>: Flag para envio do XML</li> <li><code>enviarDanfe</code>: Flag para envio do DANFE</li> <li><code>enviarBoleto</code>: Flag para envio do boleto</li> <li><code>emailRemetente</code>: Tipo de remetente (0, 1, 2)</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_EnviarEmailsNFe/#busca-de-destinatarios","title":"Busca de Destinat\u00e1rios","text":"<ul> <li>Cobran\u00e7a: Prioridade para endere\u00e7o no documento &gt; endere\u00e7o principal da entidade</li> <li>Representantes: Busca em at\u00e9 5 representantes vinculados ao documento</li> <li>Transportadora: Obtido do campo de despacho do documento</li> <li>Contatos: Consulta direta via SQL por classifica\u00e7\u00e3o espec\u00edfica</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/","title":"SRF_ImportaXmlCTe_Entrada.md","text":""},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de importa\u00e7\u00e3o de XML de Conhecimento de Transporte Eletr\u00f4nico (CT-e) para documentos de entrada, respons\u00e1vel por extrair e processar dados fiscais, valores e informa\u00e7\u00f5es de transporte do arquivo XML.</p>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o processo de importa\u00e7\u00e3o de dados fiscais de CT-e de entrada, garantindo a correta extra\u00e7\u00e3o e mapeamento de informa\u00e7\u00f5es tribut\u00e1rias, valores da presta\u00e7\u00e3o de servi\u00e7o e dados de transporte para o sistema.</p>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Log\u00edstica/Transportes</li> <li>Compras</li> <li>Contabilidade</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - F\u00f3rmula <code>SRF_ImportaXmlCTe_Entrada</code> - Processamento de XML CT-e entrada</p> <p>Localiza\u00e7\u00e3o: <code>strema/formulas/srf/</code></p>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>EAA0103</code> - Itens do documento - <code>EAA0102</code> - Dados gerais do documento - <code>EAA0101</code> - Endere\u00e7os do documento - <code>AAG0201</code> - Munic\u00edpios</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documento fiscal - <code>Eaa0103</code> - Item do documento - <code>ElementXml</code> - Parser de XML</p>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01 Eaa01 Sim Documento fiscal a ser processado elementXmlCte ElementXml Sim Estrutura XML do CT-e a ser importada"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Valida\u00e7\u00e3o Inicial</li> <li>Verifica estrutura do XML (cteProc &gt; CTe &gt; infCte)</li> <li>Obt\u00e9m primeiro item do documento para processamento</li> <li> <p>Valida n\u00f3 principal do documento fiscal</p> </li> <li> <p>Processamento de Dados B\u00e1sicos</p> </li> <li>Define tipo do CT-e (tpCTe) nos dados gerais</li> <li>Configura quantidades padr\u00e3o (1 unidade)</li> <li> <p>Extrai valores da presta\u00e7\u00e3o de servi\u00e7o</p> </li> <li> <p>Processamento Tribut\u00e1rio</p> </li> <li>ICMS 00: Tributa\u00e7\u00e3o normal</li> <li>ICMS 20: Com redu\u00e7\u00e3o de base de c\u00e1lculo</li> <li>ICMS 60: Substitui\u00e7\u00e3o tribut\u00e1ria</li> <li>ICMS 90: Outros casos</li> <li> <p>ICMS Outra UF: Opera\u00e7\u00f5es interestaduais</p> </li> <li> <p>Gest\u00e3o de Endere\u00e7os</p> </li> <li>Remove endere\u00e7os de sa\u00edda e entrega existentes</li> <li>Cria novos endere\u00e7os baseados no XML</li> <li>Busca munic\u00edpios por c\u00f3digo IBGE</li> <li> <p>Define endere\u00e7os de sa\u00edda e entrega</p> </li> <li> <p>Dados Complementares</p> </li> <li>Informa\u00e7\u00f5es adicionais do fisco</li> <li>Valores da carga e averba\u00e7\u00e3o</li> <li>Observa\u00e7\u00f5es fiscais</li> </ol>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#validacoes-de-estrutura","title":"Valida\u00e7\u00f5es de Estrutura","text":"<ul> <li>XML deve conter estrutura cteProc &gt; CTe &gt; infCte</li> <li>Pelo menos um item deve existir no documento</li> <li>Campos num\u00e9ricos s\u00e3o convertidos com casas decimais espec\u00edficas</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#processamento-de-valores","title":"Processamento de Valores","text":"<ul> <li>Quantidade: Fixa em 1 unidade para servi\u00e7os de transporte</li> <li>Valores: Extra\u00eddos da presta\u00e7\u00e3o de servi\u00e7o (vRec)</li> <li>Totais: Replicados para totais do documento e financeiro</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#tributacao-do-ct-e","title":"Tributa\u00e7\u00e3o do CT-e","text":"<ul> <li>ICMS 00: Base de c\u00e1lculo, al\u00edquota e valor normal</li> <li>ICMS 20: Redu\u00e7\u00e3o de base de c\u00e1lculo aplicada</li> <li>ICMS 60: Valores de reten\u00e7\u00e3o por substitui\u00e7\u00e3o tribut\u00e1ria</li> <li>ICMS 90: Tributa\u00e7\u00e3o com redu\u00e7\u00e3o e cr\u00e9dito</li> <li>ICMS Outra UF: Tratamento espec\u00edfico para opera\u00e7\u00f5es interestaduais</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#gestao-de-enderecos","title":"Gest\u00e3o de Endere\u00e7os","text":"<ul> <li>Endere\u00e7os de sa\u00edda e entrega s\u00e3o recriados a cada importa\u00e7\u00e3o</li> <li>Munic\u00edpios s\u00e3o buscados exclusivamente por c\u00f3digo IBGE</li> <li>Endere\u00e7os s\u00e3o marcados com flags espec\u00edficas (saida, entrega)</li> <li>Endere\u00e7o principal permanece inalterado</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo eaa01 Documento fiscal com dados importados Eaa01"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Persist\u00eancia e consultas - <code>br.com.multitec.utils.xml</code> - Processamento de XML</p> <p>Estruturas de Dados: - <code>ElementXml</code> - Parser e navega\u00e7\u00e3o de XML - <code>TableMap</code> - Armazenamento de dados JSON</p>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: S\u00edncrono, execu\u00e7\u00e3o completa do XML</li> <li>Alinhamento: Utiliza alinhamento \"0013\" espec\u00edfico para CT-e</li> <li>Flexibilidade: Suporte a m\u00faltiplos regimes de ICMS</li> <li>Precis\u00e3o: Arredondamentos espec\u00edficos por tipo de campo</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#mapeamento-de-campos-xml","title":"Mapeamento de Campos XML","text":"<ul> <li>Dados B\u00e1sicos: Tipo do CT-e, valores da presta\u00e7\u00e3o</li> <li>Tributa\u00e7\u00e3o: Todos os grupos de ICMS aplic\u00e1veis ao CT-e</li> <li>Endere\u00e7os: C\u00f3digos IBGE de munic\u00edpios de sa\u00edda e entrega</li> <li>Complementares: Informa\u00e7\u00f5es fiscais e valores da carga</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#tratamento-de-dados","title":"Tratamento de Dados","text":"<ul> <li>Convers\u00e3o autom\u00e1tica de valores monet\u00e1rios</li> <li>Busca otimizada de munic\u00edpios por c\u00f3digo IBGE</li> <li>Valida\u00e7\u00e3o de consist\u00eancia de dados municipais</li> <li>Preserva\u00e7\u00e3o de dados originais do XML</li> </ul>"},{"location":"STREMA/formulas/srf/SRF_ImportaXmlCTe_Entrada/#integracao-com-sistema","title":"Integra\u00e7\u00e3o com Sistema","text":"<ul> <li>Atualiza\u00e7\u00e3o em tempo real do documento fiscal</li> <li>Gest\u00e3o din\u00e2mica de endere\u00e7os de transporte</li> <li>Compatibilidade com estrutura de itens de servi\u00e7o</li> <li>Manuten\u00e7\u00e3o de relacionamentos entre entidades</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/","title":"SCV_Orcamento.md","text":""},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o de relat\u00f3rios de or\u00e7amentos para o SCV (Sistema de Controle de Vendas) da Strema, com funcionalidades de impress\u00e3o e envio autom\u00e1tico por e-mail.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar relat\u00f3rios detalhados de or\u00e7amentos comerciais com op\u00e7\u00f5es de visualiza\u00e7\u00e3o, exporta\u00e7\u00e3o e distribui\u00e7\u00e3o automatizada para clientes.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Vendedores</li> <li>Atendimento ao Cliente</li> <li>Gest\u00e3o Comercial</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Classe <code>SCV_Orcamento</code> - Relat\u00f3rio de or\u00e7amentos - Arquivos de imagem (Logo.png, canceladas.png)</p> <p>Localiza\u00e7\u00e3o: <code>strema/relatorios/scv/</code></p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>CBE10</code> - Cabe\u00e7alho de or\u00e7amentos - <code>ABB01</code> - Documentos fiscais - <code>ABE01</code> - Entidades/Clientes - <code>CBE1001</code> - Itens do or\u00e7amento - <code>ABM01</code> - Materiais/Produtos - <code>AAB10</code> - Usu\u00e1rios - <code>ABE0104</code> - Classifica\u00e7\u00e3o de entidades (e-mails)</p> <p>Entidades Envolvidas: - <code>Cbe10</code> - Or\u00e7amento - <code>Abb01</code> - Documento fiscal - <code>Abe01</code> - Entidade/Cliente - <code>Aab10</code> - Usu\u00e1rio - <code>Abe0104</code> - Classifica\u00e7\u00e3o de entidade - <code>Aac10</code> - Empresa</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o numeroInicial Integer N\u00e3o N\u00famero inicial do or\u00e7amento numeroFinal Integer N\u00e3o N\u00famero final do or\u00e7amento entidades List N\u00e3o Lista de entidades para filtro emissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o status List Sim Status dos or\u00e7amentos (0-Criado, 1-Conclu\u00eddo, 2-Cancelado) impressao Integer Sim Tipo de sa\u00edda (0-PDF, 1-XLSX) enviaEmail Boolean N\u00e3o Enviar por e-mail automaticamente tipoSCV7010 Long N\u00e3o Filtro espec\u00edfico da tela SCV7010"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo PDF/XLSX Relat\u00f3rio formatado Arquivo E-mail Or\u00e7amento enviado por e-mail Mensagem"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define valores padr\u00e3o para filtros</li> <li>Carrega logos e recursos visuais</li> <li> <p>Comp\u00f5e dados da empresa</p> </li> <li> <p>Processamento de Filtros</p> </li> <li>Aplica filtros de n\u00famero, entidade, data e status</li> <li>Processa filtro espec\u00edfico da tela SCV7010</li> <li> <p>Valida par\u00e2metros obrigat\u00f3rios</p> </li> <li> <p>Busca de Dados</p> </li> <li>Executa consulta SQL com m\u00faltiplos joins</li> <li>Aplica where padr\u00e3o do sistema</li> <li> <p>Ordena resultados por n\u00famero e c\u00f3digo do material</p> </li> <li> <p>Gera\u00e7\u00e3o de Sa\u00edda</p> </li> <li>Gera PDF ou XLSX conforme sele\u00e7\u00e3o</li> <li>Opcionalmente envia e-mail com anexo</li> <li>Aplica formata\u00e7\u00e3o e assinatura de e-mail</li> </ol>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#filtros-e-validacoes","title":"Filtros e Valida\u00e7\u00f5es","text":"<ul> <li>Status padr\u00e3o: Criado e Conclu\u00eddo</li> <li>Filtro por n\u00famero range opcional</li> <li>Filtro por per\u00edodo de emiss\u00e3o</li> <li>Where padr\u00e3o aplicado para seguran\u00e7a</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#envio-de-e-mail","title":"Envio de E-mail","text":"<ul> <li>E-mail obrigat\u00f3rio no cadastro do usu\u00e1rio</li> <li>Destinat\u00e1rios obtidos da classifica\u00e7\u00e3o \"9001\"</li> <li>Assinatura personalizada quando dispon\u00edvel</li> <li>Anexo PDF com nome personalizado</li> <li>Corpo do e-mail com tratamento de caracteres</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#dados-da-empresa","title":"Dados da Empresa","text":"<ul> <li>Raz\u00e3o social, CNPJ, IE</li> <li>Endere\u00e7o completo formatado</li> <li>Contatos e site</li> <li>Dados fiscais por UF</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#estrutura-do-relatorio","title":"\ud83c\udfa8 Estrutura do Relat\u00f3rio","text":"<p>Cabe\u00e7alho: - Logo da empresa - Dados cadastrais da empresa - Filtros aplicados</p> <p>Detalhes do Or\u00e7amento: - N\u00famero, data, cliente - Condi\u00e7\u00e3o de pagamento - Itens com c\u00f3digo, descri\u00e7\u00e3o, quantidade, unit\u00e1rio, total - Tributos (IPI, ICMS, ST) - Observa\u00e7\u00f5es internas</p> <p>Rodap\u00e9: - Totais do documento - Status do or\u00e7amento - Informa\u00e7\u00f5es de frete</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Crit\u00e9rios e joins - <code>multitec.utils</code> - Utilit\u00e1rios e e-mail - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>javax.mail</code> - Envio de e-mail</p> <p>Servi\u00e7os: - <code>CAS1010Service</code> - Processamento de assinaturas de e-mail</p> <p>Consultas: - Busca de or\u00e7amentos com m\u00faltiplos relacionamentos - Dados da empresa ativa - E-mails de destino por classifica\u00e7\u00e3o - Configura\u00e7\u00e3o de e-mail do usu\u00e1rio</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Recursos Visuais: Logos carregadas dinamicamente do filesystem</li> <li>Formata\u00e7\u00e3o de Dados: Endere\u00e7os concatenados, telefones formatados</li> <li>Tratamento de Caracteres: Normaliza\u00e7\u00e3o para remover acentos no e-mail</li> <li>Seguran\u00e7a: Aplica\u00e7\u00e3o de where padr\u00e3o em todas as consultas</li> <li>Performance: Joins otimizados com fetch estrat\u00e9gico</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#metodos-principais","title":"\ud83d\udd04 M\u00e9todos Principais","text":""},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo do relat\u00f3rio.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#compordadosempresa","title":"<code>comporDadosEmpresa()</code>","text":"<p>Busca e formata dados cadastrais da empresa ativa.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#buscardadosorcamento","title":"<code>buscarDadosOrcamento()</code>","text":"<p>Executa consulta principal com todos os filtros aplicados.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#enviaremail","title":"<code>enviarEmail()</code>","text":"<p>Processa envio autom\u00e1tico do or\u00e7amento por e-mail.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#buscaremaildestino","title":"<code>buscarEmailDestino()</code>","text":"<p>Obt\u00e9m lista de e-mails de destino baseado na classifica\u00e7\u00e3o.</p>"},{"location":"STREMA/relatorio/scv/SCV_Orcamento/#template-de-e-mail","title":"\ud83d\udca1 Template de E-mail","text":"<p>Assunto: \"PROPOSTA COMERCIAL STREMA BATERIAS N\u00b0 [n\u00famero]\"</p> <p>Corpo:</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/","title":"SCV_PedidoVenda.md","text":""},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o de relat\u00f3rios de pedidos de venda para o SCV (Sistema de Controle de Vendas) da Strema, com funcionalidades de impress\u00e3o e envio autom\u00e1tico por e-mail.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar relat\u00f3rios detalhados de pedidos de venda com op\u00e7\u00f5es de visualiza\u00e7\u00e3o, exporta\u00e7\u00e3o e distribui\u00e7\u00e3o automatizada para clientes, incluindo controle de estoque e informa\u00e7\u00f5es fiscais.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Comercial</li> <li>Vendedores</li> <li>Expedi\u00e7\u00e3o</li> <li>Atendimento ao Cliente</li> <li>Gest\u00e3o Comercial</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Classe <code>SCV_PedidoVenda</code> - Relat\u00f3rio de pedidos de venda - Arquivos de imagem (Logo.png, LogoEx-Power.png) - Subrelat\u00f3rios: SCV_PedidoVendaExpedicao_S1, SCV_PedidoVendaExpedicao_S2</p> <p>Localiza\u00e7\u00e3o: <code>strema/relatorios/scv/</code></p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>ABB01</code> - Cabe\u00e7alho de documentos - <code>ABE01</code> - Entidades/Clientes - <code>EAA0103</code> - Itens do pedido - <code>ABM01</code> - Materiais/Produtos - <code>AAB10</code> - Usu\u00e1rios - <code>ABE0104</code> - Classifica\u00e7\u00e3o de entidades (e-mails) - <code>AAC10</code> - Empresa</p> <p>Entidades Envolvidas: - <code>Eaa01</code> - Documento fiscal - <code>Abb01</code> - Cabe\u00e7alho do documento - <code>Abe01</code> - Entidade/Cliente - <code>Eaa0103</code> - Item do pedido - <code>Abm01</code> - Material/Produto - <code>Aab10</code> - Usu\u00e1rio - <code>Abe0104</code> - Classifica\u00e7\u00e3o de entidade - <code>Aac10</code> - Empresa</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o pedido Integer Sim Tipo de pedido (1-Venda, 2-Expedi\u00e7\u00e3o, 3-Venda/Expedi\u00e7\u00e3o) numIni Integer N\u00e3o N\u00famero inicial do pedido numFim Integer N\u00e3o N\u00famero final do pedido tipo List N\u00e3o Lista de tipos de documento entidade List N\u00e3o Lista de entidades representante List N\u00e3o Lista de representantes classeItens List N\u00e3o Lista de classes de itens dataEmissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o dataEntrega LocalDate[] N\u00e3o Per\u00edodo de entrega enviaEmail Boolean N\u00e3o Enviar por e-mail automaticamente tipoSCV2002 Long N\u00e3o Filtro espec\u00edfico da tela SCV2002"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#saidas-do-processo","title":"\ud83d\udccb Sa\u00eddas do Processo","text":"Campo Descri\u00e7\u00e3o Tipo PDF Relat\u00f3rio formatado Arquivo E-mail Pedido enviado por e-mail Mensagem"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Define valores padr\u00e3o para filtros</li> <li>Carrega logos e recursos visuais</li> <li> <p>Comp\u00f5e dados da empresa e inscri\u00e7\u00e3o estadual</p> </li> <li> <p>Processamento de Filtros</p> </li> <li>Aplica filtros de n\u00famero, tipo, entidade, representante</li> <li>Processa filtros de data de emiss\u00e3o e entrega</li> <li> <p>Aplica filtro espec\u00edfico da tela SCV2002</p> </li> <li> <p>Busca de Dados</p> </li> <li>Executa consulta SQL com m\u00faltiplos joins</li> <li>Busca view de itens com c\u00e1lculos de estoque</li> <li> <p>Calcula totais l\u00edquidos por item</p> </li> <li> <p>Gera\u00e7\u00e3o de Relat\u00f3rio</p> </li> <li>Seleciona template baseado no tipo de pedido</li> <li>Configura subrelat\u00f3rios para detalhamento</li> <li> <p>Gera PDF com estrutura complexa</p> </li> <li> <p>Envio de E-mail (Opcional)</p> </li> <li>Envia pedido automaticamente por e-mail</li> <li>Aplica formata\u00e7\u00e3o e assinatura</li> </ol>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#tipos-de-pedido","title":"Tipos de Pedido","text":"<ul> <li>1 - Venda: Relat\u00f3rio padr\u00e3o de pedido de venda</li> <li>2 - Expedi\u00e7\u00e3o: Relat\u00f3rio focado em expedi\u00e7\u00e3o</li> <li>3 - Venda/Expedi\u00e7\u00e3o: Relat\u00f3rio combinado</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#filtros-e-validacoes","title":"Filtros e Valida\u00e7\u00f5es","text":"<ul> <li>Filtro padr\u00e3o por opera\u00e7\u00e3o diferente de 46045860</li> <li>Apenas documentos de classifica\u00e7\u00e3o 0 (venda)</li> <li>Apenas movimenta\u00e7\u00f5es de sa\u00edda (esMov = 1)</li> <li>Documentos n\u00e3o cancelados</li> <li>Endere\u00e7os principais apenas</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#calculos-de-estoque","title":"C\u00e1lculos de Estoque","text":"<ul> <li>Total Saldo: Quantidade em estoque</li> <li>Total Vendido: Quantidade em pedidos de venda</li> <li>Total Compra: Quantidade em pedidos de compra</li> <li>Total Produ\u00e7\u00e3o: Quantidade em produ\u00e7\u00e3o</li> <li>Total L\u00edquido: Saldo - Vendido + Compra + Produ\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#estrutura-do-relatorio","title":"\ud83c\udfa8 Estrutura do Relat\u00f3rio","text":"<p>Cabe\u00e7alho: - Logos da empresa - Dados cadastrais da empresa (endere\u00e7o, CNPJ, IE) - Filtros aplicados</p> <p>Detalhes do Pedido: - N\u00famero, data, cliente - Endere\u00e7o de entrega completo - Condi\u00e7\u00e3o de pagamento - Representante comercial</p> <p>Itens do Pedido: - C\u00f3digo, descri\u00e7\u00e3o, quantidade, unidade, unit\u00e1rio, total - Tributos (ICMS, ST, IPI, al\u00edquotas) - Informa\u00e7\u00f5es de frete</p> <p>Subrelat\u00f3rios: - S1: Detalhes adicionais do pedido - S2: Informa\u00e7\u00f5es complementares</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Crit\u00e9rios e joins - <code>multitec.utils</code> - Utilit\u00e1rios e e-mail - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>javax.mail</code> - Envio de e-mail</p> <p>Servi\u00e7os: - <code>CAS1010Service</code> - Processamento de assinaturas de e-mail</p> <p>Consultas: - Busca de pedidos com m\u00faltiplos relacionamentos - View de itens com c\u00e1lculos de estoque - E-mails de destino por classifica\u00e7\u00e3o - Configura\u00e7\u00e3o de e-mail do usu\u00e1rio</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Recursos Visuais: Logos carregadas dinamicamente do filesystem</li> <li>Formata\u00e7\u00e3o de Dados: CEP formatado (XXXXX-XXX), endere\u00e7os concatenados</li> <li>Subrelat\u00f3rios: Estrutura complexa com m\u00faltiplos n\u00edveis de detalhe</li> <li>C\u00e1lculos em Tempo Real: Totais l\u00edquidos calculados dinamicamente</li> <li>Seguran\u00e7a: Aplica\u00e7\u00e3o de where padr\u00e3o em todas as consultas</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#metodos-principais","title":"\ud83d\udd04 M\u00e9todos Principais","text":""},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo do relat\u00f3rio.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#buscardados","title":"<code>buscarDados()</code>","text":"<p>Executa consulta principal com todos os filtros aplicados.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#buscarviewitens","title":"<code>buscarViewItens()</code>","text":"<p>Cria view complexa com c\u00e1lculos de estoque.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#buscarvalorliqtotal","title":"<code>buscarValorLiqTotal()</code>","text":"<p>Calcula total l\u00edquido por item baseado na view.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#enviaremail","title":"<code>enviarEmail()</code>","text":"<p>Processa envio autom\u00e1tico do pedido por e-mail.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#buscaremaildestino","title":"<code>buscarEmailDestino()</code>","text":"<p>Obt\u00e9m lista de e-mails de destino baseado na classifica\u00e7\u00e3o.</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#view-de-itens","title":"\ud83d\udca1 View de Itens","text":"<p>A view calcula: - Saldo em estoque - Quantidade vendida (pedidos de venda n\u00e3o atendidos) - Quantidade comprada (pedidos de compra n\u00e3o atendidos) - Quantidade em produ\u00e7\u00e3o (ordens de produ\u00e7\u00e3o pendentes) - Saldo l\u00edquido = Saldo - Vendido + Comprado + Produ\u00e7\u00e3o</p>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#validacoes-de-e-mail","title":"\u26a0\ufe0f Valida\u00e7\u00f5es de E-mail","text":"<ul> <li>Usu\u00e1rio deve ter e-mail cadastrado (AAB1008)</li> <li>Entidade deve ter contato classificado como \"9001\"</li> <li>Assinatura opcional do usu\u00e1rio</li> <li>Tratamento de caracteres especiais no corpo</li> <li>Valida\u00e7\u00e3o de exist\u00eancia de destinat\u00e1rios</li> </ul>"},{"location":"STREMA/relatorio/scv/SCV_PedidoVenda/#template-de-e-mail","title":"\ud83d\udcb0 Template de E-mail","text":"<p>Assunto: \"PEDIDO N\u00b0 [n\u00famero] STREMA BATERIAS \u2013 APROVADO\"</p> <p>Corpo:</p>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/","title":"SPP_OrdemProducao - Relat\u00f3rio de Ordem de Produ\u00e7\u00e3o","text":""},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Relat\u00f3rio de ordens de produ\u00e7\u00e3o com filtros por status, n\u00famero, tipo, entidade, itens, lotes e data de emiss\u00e3o, gerando PDF com informa\u00e7\u00f5es completas do processo produtivo.</p>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Fornecer uma vis\u00e3o consolidada das ordens de produ\u00e7\u00e3o, permitindo acompanhamento do status, componentes utilizados, quantidades planejadas e realizadas, al\u00e9m de informa\u00e7\u00f5es espec\u00edficas do processo.</p>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento de Produ\u00e7\u00e3o</li> <li>PCP (Planejamento e Controle de Produ\u00e7\u00e3o)</li> <li>Gestores Industriais</li> <li>Supervisores de Produ\u00e7\u00e3o</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#parametros-do-relatorio","title":"\u2699\ufe0f Par\u00e2metros do Relat\u00f3rio","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o Valores Poss\u00edveis status Integer Sim Status da ordem de produ\u00e7\u00e3o 0=Todos numIni Integer N\u00e3o N\u00famero inicial 0-999999 numFim Integer N\u00e3o N\u00famero final 0-999999 tipo List N\u00e3o Tipos de documento IDs tipos documento entidade List N\u00e3o Entidades espec\u00edficas IDs entidades itens List N\u00e3o Itens espec\u00edficos IDs itens lotes List N\u00e3o Lotes espec\u00edficos C\u00f3digos de lote dataEmissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o Data inicial e final"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#campos-do-relatorio","title":"\ud83d\udccb Campos do Relat\u00f3rio","text":"Campo Descri\u00e7\u00e3o Tipo abb01num N\u00famero do documento Integer abb01data Data do documento Date bab01dtE Data da ordem Date rep Representante String entCodigo C\u00f3digo da entidade String entNome Nome da entidade String bab01qt Quantidade BigDecimal prodDesc Descri\u00e7\u00e3o do produto String prodCodigo C\u00f3digo do produto String abp20bomNumRev N\u00famero revis\u00e3o BOM String abp20bomDtRev Data revis\u00e3o BOM Date compCodigo C\u00f3digo componente String compDesc Descri\u00e7\u00e3o componente String aam06codigo Unidade medida String bab0101qtP Qtde planejada BigDecimal bab0101qtA Qtde realizada BigDecimal bab01obs Observa\u00e7\u00f5es String bab01detProd Detalhes produ\u00e7\u00e3o String carga Informa\u00e7\u00f5es de carga String transporte Informa\u00e7\u00f5es transporte String etiqueta Informa\u00e7\u00f5es etiqueta String outros_itens Outros itens String prioridade Prioridade String"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#1-validacao-de-parametros","title":"1. Valida\u00e7\u00e3o de Par\u00e2metros","text":"<ul> <li>Define valores padr\u00e3o (status = 0)</li> <li>Processa intervalos num\u00e9ricos</li> <li>Converte lista de lotes (separados por \";\")</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#2-configuracao-do-relatorio","title":"2. Configura\u00e7\u00e3o do Relat\u00f3rio","text":"<ul> <li>Localiza arquivo de logo</li> <li>Obt\u00e9m dados da empresa ativa</li> <li>Constr\u00f3i endere\u00e7o completo da empresa</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#3-construcao-da-consulta","title":"3. Constru\u00e7\u00e3o da Consulta","text":"<ul> <li>Monta SQL din\u00e2mico com filtros aplicados</li> <li>Aplica cl\u00e1usulas WHERE conforme par\u00e2metros</li> <li>Define ordena\u00e7\u00e3o por n\u00famero e descri\u00e7\u00e3o do componente</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#4-busca-de-dados","title":"4. Busca de Dados","text":"<ul> <li>Consulta ordens de produ\u00e7\u00e3o no banco</li> <li>Inclui informa\u00e7\u00f5es de produto, componentes e entidades</li> <li>Extrai campos JSON espec\u00edficos</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#5-geracao-de-saida","title":"5. Gera\u00e7\u00e3o de Sa\u00edda","text":"<ul> <li>Passa par\u00e2metros para template JasperReports</li> <li>Gera PDF com dados consultados</li> <li>Retorna arquivo para download</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#filtros-de-busca","title":"Filtros de Busca","text":"<ul> <li>Status: Filtro obrigat\u00f3rio, padr\u00e3o = 0 (todos)</li> <li>N\u00fameros: Intervalo inclusivo (inicial \u2264 n\u00famero \u2264 final)</li> <li>Lotes: Separados por ponto e v\u00edrgula, espa\u00e7os removidos</li> <li>Datas: Per\u00edodo inclusivo (data inicial \u2264 data \u2264 data final)</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#estrutura-de-dados","title":"Estrutura de Dados","text":"<ul> <li>Join com m\u00faltiplas tabelas (bab01, abb01, abe01, abp20, abm01)</li> <li>Componentes listados individualmente por ordem</li> <li>Campos JSON extra\u00eddos para informa\u00e7\u00f5es espec\u00edficas</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#ordenacao","title":"Ordena\u00e7\u00e3o","text":"<ul> <li>Prim\u00e1ria: N\u00famero do documento (abb01num)</li> <li>Secund\u00e1ria: Descri\u00e7\u00e3o do componente (comp.abm01descr)</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#saidas-disponiveis","title":"\ud83c\udfa8 Sa\u00eddas Dispon\u00edveis","text":"Formato Descri\u00e7\u00e3o Template M\u00e9todo PDF Layout padr\u00e3o <code>SPP_OrdemProducao</code> <code>gerarPDF()</code>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>jasperreports</code> - Gera\u00e7\u00e3o de relat\u00f3rios PDF - <code>br.com.multitec.utils</code> - Utilit\u00e1rios e cole\u00e7\u00f5es</p> <p>Recursos: - Arquivo de logo: <code>/resources/strema/relatorios/spp/Logo.png</code> - Template JasperReports</p>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#consulta-sql","title":"Consulta SQL","text":"<ul> <li>SQL din\u00e2mico com m\u00faltiplos filtros opcionais</li> <li>Uso de JSON extraction para campos espec\u00edficos</li> <li>Join complexo com aliases para entidades e itens</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#parametros-do-relatorio_1","title":"Par\u00e2metros do Relat\u00f3rio","text":"<ul> <li>LOGO: Caminho completo do arquivo de logo</li> <li>ENDERECO: Endere\u00e7o formatado da empresa</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#tratamento-de-dados","title":"Tratamento de Dados","text":"<ul> <li>Limpeza de espa\u00e7os em lista de lotes</li> <li>Formata\u00e7\u00e3o de endere\u00e7o multi-linha</li> <li>Valores padr\u00e3o para par\u00e2metros num\u00e9ricos</li> </ul>"},{"location":"STREMA/relatorio/spp/SPP_OrdemProducao/#performance","title":"Performance","text":"<ul> <li>Filtros aplicados no banco de dados</li> <li>Pagina\u00e7\u00e3o tratada pelo JasperReports</li> <li>Consulta otimizada com \u00edndices apropriados</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/","title":"SRF_Danfe.md","text":""},{"location":"STREMA/relatorio/srf/SRF_Danfe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>Sistema de gera\u00e7\u00e3o e envio de Documento Auxiliar da Nota Fiscal Eletr\u00f4nica (DANFE) para documentos fiscais, com suporte a impress\u00e3o e distribui\u00e7\u00e3o autom\u00e1tica por e-mail.</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Gerar o DANFE em formato PDF para documentos fiscais eletr\u00f4nicos, permitindo visualiza\u00e7\u00e3o, impress\u00e3o e distribui\u00e7\u00e3o eletr\u00f4nica autom\u00e1tica para clientes e destinat\u00e1rios.</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Clientes/Fornecedores</li> <li>Transportadoras</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#configuracao","title":"\u2699\ufe0f Configura\u00e7\u00e3o","text":"<p>Recursos Necess\u00e1rios: - Relat\u00f3rio <code>SRF_Danfe</code> - Gera\u00e7\u00e3o do DANFE - Sub-relat\u00f3rio <code>SRF_Danfe_S1</code> - Detalhamento de itens</p> <p>Localiza\u00e7\u00e3o: <code>strema/relatorios/srf/</code></p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>EAA01</code> - Documentos fiscais - <code>ABB01</code> - Centrais de documento - <code>ABE01</code> - Entidades/clientes - <code>EAA0101</code> - Endere\u00e7os do documento - <code>EAA0102</code> - Dados gerais do documento - <code>EAA0103</code> - Itens do documento - <code>EAA0113</code> - Duplicatas</p> <p>Recursos Externos: - <code>Logo.png</code> - Logotipo da empresa - <code>canceladas.png</code> - Imagem para documentos cancelados - <code>SemValorFiscal.png</code> - Imagem para documentos sem valor fiscal</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#parametros-do-processo","title":"\u2699\ufe0f Par\u00e2metros do Processo","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o numeroInicial Integer Sim N\u00famero inicial do documento numeroFinal Integer Sim N\u00famero final do documento entidade List N\u00e3o Filtro por entidades emissao LocalDate[] N\u00e3o Per\u00edodo de emiss\u00e3o entraSai LocalDate[] N\u00e3o Per\u00edodo de entrada/sa\u00edda eaa01id Long N\u00e3o ID espec\u00edfico do documento entInicial String N\u00e3o C\u00f3digo inicial da entidade entFinal String N\u00e3o C\u00f3digo final da entidade serie String N\u00e3o S\u00e9rie do documento enviaEmail Boolean N\u00e3o Flag para envio autom\u00e1tico por e-mail"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":"<ol> <li>Configura\u00e7\u00e3o Inicial</li> <li>Carrega recursos gr\u00e1ficos (logos, imagens)</li> <li>Define par\u00e2metros padr\u00e3o do relat\u00f3rio</li> <li> <p>Configura sub-relat\u00f3rios</p> </li> <li> <p>Busca de Documentos</p> </li> <li>Filtra documentos por n\u00famero, s\u00e9rie, per\u00edodo e entidade</li> <li>Valida documentos do modelo 55 (NF-e)</li> <li> <p>Ordena por n\u00famero do documento</p> </li> <li> <p>Composi\u00e7\u00e3o de Dados</p> </li> <li>Empresa: Dados do emitente</li> <li>Documento: Informa\u00e7\u00f5es fiscais e numera\u00e7\u00e3o</li> <li>Entidade: Dados do destinat\u00e1rio</li> <li>Itens: Produtos/servi\u00e7os com tributos</li> <li>Valores: Totais e impostos</li> <li> <p>Transporte: Dados de frete e ve\u00edculo</p> </li> <li> <p>Gera\u00e7\u00e3o do PDF</p> </li> <li>Processa relat\u00f3rio principal com sub-relat\u00f3rios</li> <li>Aplica formata\u00e7\u00e3o espec\u00edfica do DANFE</li> <li> <p>Gera arquivo PDF para download</p> </li> <li> <p>Envio por E-mail (Opcional)</p> </li> <li>Busca e-mails do destinat\u00e1rio por classifica\u00e7\u00e3o</li> <li>Configura e-mail com anexo PDF</li> <li>Envia automaticamente para contatos cadastrados</li> </ol>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"STREMA/relatorio/srf/SRF_Danfe/#filtros-de-documentos","title":"Filtros de Documentos","text":"<ul> <li>Apenas documentos do modelo 55 (NF-e)</li> <li>Documentos com emiss\u00e3o pr\u00f3pria (eaa01emissao = 1)</li> <li>Ordena\u00e7\u00e3o por n\u00famero do documento</li> <li>Suporte a filtros por s\u00e9rie e per\u00edodo</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#validacoes-de-dados","title":"Valida\u00e7\u00f5es de Dados","text":"<ul> <li>Empresa deve ter munic\u00edpio cadastrado</li> <li>Endere\u00e7o principal do documento \u00e9 obrigat\u00f3rio</li> <li>Munic\u00edpio do endere\u00e7o deve estar preenchido</li> <li>Dados de IE devem estar dispon\u00edveis por estado</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#estrutura-do-danfe","title":"Estrutura do DANFE","text":"<ul> <li>Cabe\u00e7alho: Dados do emitente e destinat\u00e1rio</li> <li>Itens: Descri\u00e7\u00e3o, quantidades, valores unit\u00e1rios e totais</li> <li>Tributos: ICMS, IPI, PIS, COFINS</li> <li>Transporte: Dados do frete e ve\u00edculo</li> <li>Duplicatas: Parcelas e datas de vencimento</li> <li>Informa\u00e7\u00f5es Adicionais: Observa\u00e7\u00f5es fiscais</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#envio-por-e-mail","title":"Envio por E-mail","text":"<ul> <li>Destinat\u00e1rios definidos por classifica\u00e7\u00e3o \"9001\"</li> <li>Assinatura digital do usu\u00e1rio quando dispon\u00edvel</li> <li>Anexo PDF com nome personalizado</li> <li>Corpo da mensagem em HTML formatado</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#saidas-geradas","title":"\ud83c\udfa8 Sa\u00eddas Geradas","text":"Sa\u00edda Descri\u00e7\u00e3o Tipo PDF DANFE em formato PDF DadosParaDownload E-mail Mensagem com anexo (opcional) Email"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>JasperReports</code> - Gera\u00e7\u00e3o de relat\u00f3rios - <code>JavaMail</code> - Envio de e-mails - <code>multiorm</code> - Persist\u00eancia e consultas</p> <p>Servi\u00e7os: - <code>CAS1010Service</code> - Processamento de assinaturas de e-mail</p>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":"<ul> <li>Processamento: Batch para m\u00faltiplos documentos</li> <li>Performance: Consultas otimizadas com joins</li> <li>Formata\u00e7\u00e3o: Layout fiel ao DANFE oficial</li> <li>Internacionaliza\u00e7\u00e3o: Suporte a caracteres especiais</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#recursos-graficos","title":"Recursos Gr\u00e1ficos","text":"<ul> <li>Logotipo da empresa em PNG</li> <li>Carimbo para documentos cancelados</li> <li>Marca d'\u00e1gua para documentos sem valor fiscal</li> <li>Formata\u00e7\u00e3o espec\u00edfica para cada tipo de documento</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#tratamento-de-dados","title":"Tratamento de Dados","text":"<ul> <li>Normaliza\u00e7\u00e3o de caracteres para e-mail</li> <li>Formata\u00e7\u00e3o de valores monet\u00e1rios</li> <li>Convers\u00e3o de datas e horas</li> <li>C\u00e1lculo de percentuais de impostos</li> </ul>"},{"location":"STREMA/relatorio/srf/SRF_Danfe/#integracao-com-e-mail","title":"Integra\u00e7\u00e3o com E-mail","text":"<ul> <li>Configura\u00e7\u00e3o SMTP do usu\u00e1rio logado</li> <li>Suporte a anexos em Base64</li> <li>Assinatura digital em HTML</li> <li>Destinat\u00e1rios m\u00faltiplos por classifica\u00e7\u00e3o</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/","title":"SRF - Enviar Emails NFe (Vetro)","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#descricao","title":"\ud83d\udcd6 Descri\u00e7\u00e3o","text":"<p>F\u00f3rmula especializada para envio automatizado de e-mails relacionados a Notas Fiscais Eletr\u00f4nicas no m\u00f3dulo Vetro, incluindo faturamento, cobran\u00e7a, cancelamentos e cartas de corre\u00e7\u00e3o.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#finalidade","title":"\ud83c\udfaf Finalidade","text":"<p>Automatizar o envio de e-mails para clientes e transportadoras com documentos fiscais eletr\u00f4nicos (XML, DANFE, boletos) de acordo com o tipo de opera\u00e7\u00e3o, adaptado para as necessidades espec\u00edficas do m\u00f3dulo Vetro.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#publico-alvo","title":"\ud83d\udc65 P\u00fablico-Alvo","text":"<ul> <li>Departamento Fiscal</li> <li>Faturamento</li> <li>Cobran\u00e7a</li> <li>Log\u00edstica/Transporte</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#dados-e-fontes","title":"\ud83d\udcca Dados e Fontes","text":"<p>Tabelas Principais: - <code>Eaa01</code> - Documentos fiscais NF-e - <code>Abb01</code> - Cabe\u00e7alho de documentos - <code>Abe01</code> - Entidades (clientes) - <code>Eaa0102</code> - Dados complementares do documento - <code>Aaa16</code> - Processamento da mensageria - <code>Eaa0114</code> - Cartas de corre\u00e7\u00e3o - <code>Eaa0101</code> - E-mails espec\u00edficos por documento - <code>Abe0101</code> - Endere\u00e7os de e-mail das entidades</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#parametros-da-formula","title":"\u2699\ufe0f Par\u00e2metros da F\u00f3rmula","text":"Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o eaa01id Long Sim ID do documento fiscal (Eaa01) aaa16id Long Sim ID do processamento da mensageria eaa0114id Long N\u00e3o ID da carta de corre\u00e7\u00e3o (se aplic\u00e1vel)"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#fluxo-do-processo","title":"\ud83d\udd04 Fluxo do Processo","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#1-configuracao-inicial","title":"1. Configura\u00e7\u00e3o Inicial","text":"<ul> <li>Obten\u00e7\u00e3o dos par\u00e2metros de entrada</li> <li>Carregamento das entidades principais (Eaa01, Aaa16, Abb01, Abe01)</li> <li>Verifica\u00e7\u00e3o da exist\u00eancia de e-mail principal no documento</li> <li>Composi\u00e7\u00e3o do assunto com nome da empresa e n\u00famero da nota</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#2-composicao-do-corpo-da-mensagem","title":"2. Composi\u00e7\u00e3o do Corpo da Mensagem","text":"<ul> <li>Cancelamento: Inclui motivo do cancelamento (Aae11)</li> <li>Carta de Corre\u00e7\u00e3o: Inclui texto da corre\u00e7\u00e3o (Eaa0114)</li> <li>Faturamento Normal: Mensagem padr\u00e3o de envio de NF-e</li> <li>Formata\u00e7\u00e3o HTML com dados do cliente e chave de acesso</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#3-definicao-dos-destinatarios-por-tipo","title":"3. Defini\u00e7\u00e3o dos Destinat\u00e1rios por Tipo","text":"<ul> <li>Cancelamento/CC-e: Apenas e-mail principal do cliente com XML</li> <li>Faturamento: E-mail principal com XML + DANFE</li> <li>Cobran\u00e7a: E-mail espec\u00edfico de cobran\u00e7a com boleto</li> <li>Transportadora: E-mail da empresa de despacho com XML + DANFE</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#4-configuracao-dos-anexos","title":"4. Configura\u00e7\u00e3o dos Anexos","text":"<ul> <li>Cancelamento/CC-e: Apenas XML</li> <li>Faturamento: XML + DANFE (boleto opcional)</li> <li>Cobran\u00e7a: Apenas boleto</li> <li>Transportadora: XML + DANFE</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#regras-de-negocio","title":"\u26a0\ufe0f Regras de Neg\u00f3cio","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#tipos-de-operacao","title":"Tipos de Opera\u00e7\u00e3o","text":"<ul> <li>Cancelamento: Aaa16.TIPO_CANCELAMENTO_NFE</li> <li>Carta de Corre\u00e7\u00e3o: Aaa16.TIPO_CCEEVENTO  </li> <li>Faturamento: Demais tipos</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#hierarquia-de-e-mails-de-cobranca","title":"Hierarquia de E-mails de Cobran\u00e7a","text":"<ol> <li>E-mail espec\u00edfico no documento (Eaa0101) marcado como cobran\u00e7a</li> <li>E-mail principal da entidade (Abe0101) marcado como cobran\u00e7a</li> <li>E-mail principal do documento (Eaa0102)</li> </ol>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#configuracao-de-remetentes","title":"Configura\u00e7\u00e3o de Remetentes","text":"<ul> <li>Faturamento/Transportadora: Remetente 2 (Faturamento)</li> <li>Cobran\u00e7a: Remetente 1 (Cobran\u00e7a)</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#validacoes","title":"Valida\u00e7\u00f5es","text":"<ul> <li>N\u00e3o processa se n\u00e3o houver e-mail principal no documento</li> <li>Verifica diferen\u00e7a entre e-mails de faturamento e cobran\u00e7a</li> <li>Transportadora apenas se houver empresa de despacho informada</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#metodos-principais","title":"\ud83d\udd27 M\u00e9todos Principais","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#executar","title":"<code>executar()</code>","text":"<p>M\u00e9todo principal que orquestra todo o processo de envio de e-mails.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#comporcorpomsgaaa16-aaa16-eaa01-eaa01-abe01-abe01-abb01-abb01-long-eaa0114id","title":"<code>comporCorpoMsg(Aaa16 aaa16, Eaa01 eaa01, Abe01 abe01, Abb01 abb01, Long eaa0114id)</code>","text":"<p>Compoi o corpo do e-mail conforme o tipo de opera\u00e7\u00e3o com formata\u00e7\u00e3o HTML.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#obteremailcobrancalong-eaa01id-long-abe01id-eaa0102-eaa0102","title":"<code>obterEmailCobranca(Long eaa01id, Long abe01id, Eaa0102 eaa0102)</code>","text":"<p>Busca o e-mail de cobran\u00e7a seguindo a hierarquia definida.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#obteremailtransportadoradespachoeaa0102-eaa0102","title":"<code>obterEmailTransportadoraDespacho(Eaa0102 eaa0102)</code>","text":"<p>Busca e-mail da transportadora respons\u00e1vel pelo despacho.</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#estrutura-de-saida","title":"\ud83d\udcca Estrutura de Sa\u00edda","text":"<p>EmailNFeDto: - <code>assunto</code> - Assunto do e-mail formatado - <code>corpo</code> - Corpo em HTML da mensagem - <code>emailsDestinoPara</code> - Lista de destinat\u00e1rios - <code>enviarXML</code> - Indica se envia arquivo XML - <code>enviarDanfe</code> - Indica se envia DANFE - <code>enviarBoleto</code> - Indica se envia boleto - <code>emailRemetente</code> - Tipo de remetente (1: Cobran\u00e7a, 2: Faturamento)</p> <p>Lista de E-mails Gerados: - Retornada no par\u00e2metro <code>emails</code> para processamento pela mensageria</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#dependencias","title":"\ud83d\udd27 Depend\u00eancias","text":"<p>Bibliotecas: - <code>multiorm</code> - Criteria e joins para consultas - <code>sam.dicdados</code> - Tipos de f\u00f3rmula - <code>sam.dto.srf</code> - DTOs espec\u00edficos do m\u00f3dulo SRF - <code>sam.model</code> - Entidades do sistema</p> <p>M\u00f3dulo: Vetro</p>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#observacoes-tecnicas","title":"\ud83d\udcdd Observa\u00e7\u00f5es T\u00e9cnicas","text":""},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#formatacao-html","title":"Formata\u00e7\u00e3o HTML","text":"<ul> <li>Corpo dos e-mails em HTML com tags b\u00e1sicas</li> <li>Links para portal da NF-e e site da Multitec</li> <li>Dados do cliente, CNPJ e chave de acesso</li> <li>Protocolo de autoriza\u00e7\u00e3o da SEFAZ</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#controle-de-anexos","title":"Controle de Anexos","text":"<ul> <li>XML sempre enviado para cliente e transportadora</li> <li>DANFE para faturamento e transportadora</li> <li>Boleto apenas para cobran\u00e7a (separado ou junto)</li> </ul>"},{"location":"VETRO/formulas/srf/SRF_EnviarEmailsNFe/#performance","title":"Performance","text":"<ul> <li>Consultas otimizadas com campos espec\u00edficos</li> <li>Uso de criteria para buscas relacionadas</li> <li>Carregamento lazy de entidades</li> </ul> <p>\u00daltima Altera\u00e7\u00e3o: 27/10/2025 \u00e0s 10:42 Autor: Bruno Tipo: F\u00f3rmula de Envio de E-mails NF-e (Vetro) Vers\u00e3o: 1.0</p>"}]}